<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FW Profile - C1 Implementation: FwSmTestCases.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FW Profile - C1 Implementation
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_fw_sm_test_cases_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">FwSmTestCases.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_fw_sm_test_cases_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_config_8h.html" title="Declaration of the configuration interface for a FW State Machine.">FwProfile/FwSmConfig.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_s_create_8h.html" title="Declaration of the static creation interface for a FW State Machine.">FwProfile/FwSmSCreate.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_d_create_8h.html" title="Declaration of the dynamical creation interface for a FW State Machine.">FwProfile/FwSmDCreate.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_aux_8h.html" title="Declaration of the auxiliary interface for a FW State Machine.">FwProfile/FwSmAux.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_private_8h.html" title="Declaration of the internal data structures of the FW State Machine Module.">FwProfile/FwSmPrivate.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_test_cases_8h.html" title="Declaration of test cases for the FW State Machine Module.">FwSmTestCases.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="_fw_sm_make_test_8h.html" title="Declaration of functions to create and configure test state machines.">FwSmMakeTest.h</a>&quot;</span>
<a name="l00035"></a>00035 
<a name="l00039"></a>00039 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[<a class="code" href="_fw_pr_make_test_8h.html#a5e32f04f82952d563a4425c73ac95e1f" title="Size of the log arrays.">LOG_ARRAY_SIZE</a>];
<a name="l00043"></a>00043 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[<a class="code" href="_fw_pr_make_test_8h.html#a5e32f04f82952d563a4425c73ac95e1f" title="Size of the log arrays.">LOG_ARRAY_SIZE</a>];
<a name="l00047"></a>00047 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>;
<a name="l00048"></a>00048 
<a name="l00068"></a>00068 <span class="keyword">static</span> <span class="keywordtype">int</span> IsClone(<a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc1, <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2);
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="keyword">static</span> <span class="keywordtype">int</span> IsClone(<a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc1, <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2) {
<a name="l00071"></a>00071    <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> i;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073    <span class="comment">/* Check that the two SMs share the same base descriptor */</span>
<a name="l00074"></a>00074    <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#ae159dd9e5377dc95ff9ad3ab44293749" title="pointer to the base descriptor">smBase</a> != smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#ae159dd9e5377dc95ff9ad3ab44293749" title="pointer to the base descriptor">smBase</a>)
<a name="l00075"></a>00075       <span class="keywordflow">return</span> 0;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077    <span class="comment">/* check that the two SMs have the same actions */</span>
<a name="l00078"></a>00078    <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a886180b640c9cbdda3ddac867906a570" title="the number of actions (state actions + transition actions) in the state machine">nOfActions</a> != smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#a886180b640c9cbdda3ddac867906a570" title="the number of actions (state actions + transition actions) in the state machine">nOfActions</a>) {
<a name="l00079"></a>00079       <span class="keywordflow">return</span> 0;
<a name="l00080"></a>00080    }
<a name="l00081"></a>00081    <span class="keywordflow">for</span> (i=0; i&lt;smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a886180b640c9cbdda3ddac867906a570" title="the number of actions (state actions + transition actions) in the state machine">nOfActions</a>; i++)
<a name="l00082"></a>00082       <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#ad0bcceef6844f6617906b66866caf3e6" title="the state machine actions (state and transition actions)">smActions</a>[i] != smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#ad0bcceef6844f6617906b66866caf3e6" title="the state machine actions (state and transition actions)">smActions</a>[i]) {
<a name="l00083"></a>00083          <span class="keywordflow">return</span> 0;
<a name="l00084"></a>00084       }
<a name="l00085"></a>00085 
<a name="l00086"></a>00086    <span class="comment">/* check that the two SMs have the same guards */</span>
<a name="l00087"></a>00087    <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a689cb26a2ad9d3f6a3c5621e6cf80c63" title="the number of guards in the state machine">nOfGuards</a> != smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#a689cb26a2ad9d3f6a3c5621e6cf80c63" title="the number of guards in the state machine">nOfGuards</a>) {
<a name="l00088"></a>00088       <span class="keywordflow">return</span> 0;
<a name="l00089"></a>00089    }
<a name="l00090"></a>00090    <span class="keywordflow">for</span> (i=0; i&lt;smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a689cb26a2ad9d3f6a3c5621e6cf80c63" title="the number of guards in the state machine">nOfGuards</a>; i++)
<a name="l00091"></a>00091       <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#abc45b82786bd47851fca381168e059e3" title="the transition guards in the state machine">smGuards</a>[i] != smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#abc45b82786bd47851fca381168e059e3" title="the transition guards in the state machine">smGuards</a>[i]) {
<a name="l00092"></a>00092          <span class="keywordflow">return</span> 0;
<a name="l00093"></a>00093       }
<a name="l00094"></a>00094 
<a name="l00095"></a>00095    <span class="comment">/* Check that the ESMs of the second SM are structural</span>
<a name="l00096"></a>00096 <span class="comment">    * clones of the ESMs of the first SM */</span>
<a name="l00097"></a>00097    <span class="keywordflow">for</span> (i=0; i&lt;smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#ae159dd9e5377dc95ff9ad3ab44293749" title="pointer to the base descriptor">smBase</a>-&gt;<a class="code" href="struct_sm_base_desc__t.html#a054b4e5ca16f9ecb52e977ac00293770" title="the number of states in the state machine">nOfPStates</a>; i++)
<a name="l00098"></a>00098       <span class="keywordflow">if</span> (smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i] != NULL)
<a name="l00099"></a>00099          <span class="keywordflow">if</span> (!IsClone(smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i], smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i]))
<a name="l00100"></a>00100                <span class="keywordflow">return</span> 0;
<a name="l00101"></a>00101    <span class="keywordflow">for</span> (i=0; i&lt;smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#ae159dd9e5377dc95ff9ad3ab44293749" title="pointer to the base descriptor">smBase</a>-&gt;<a class="code" href="struct_sm_base_desc__t.html#a054b4e5ca16f9ecb52e977ac00293770" title="the number of states in the state machine">nOfPStates</a>; i++)
<a name="l00102"></a>00102       <span class="keywordflow">if</span> (smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i] != NULL)
<a name="l00103"></a>00103          <span class="keywordflow">if</span> (!IsClone(smDesc2-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i], smDesc1-&gt;<a class="code" href="struct_fw_sm_desc.html#a9bed6b2ffb2420fd26513c701be7898d" title="the state machines embedded in the state machine">esmDesc</a>[i]))
<a name="l00104"></a>00104                <span class="keywordflow">return</span> 0;
<a name="l00105"></a>00105    <span class="keywordflow">return</span> 1;
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00110"></a><a class="code" href="_fw_sm_test_cases_8h.html#a4bcba990c9e85d27f06417bc22d09d28">00110</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a4bcba990c9e85d27f06417bc22d09d28" title="Test the Start command on a simple state machine where the initial pseudo-state is directly connected...">FwSmTestCaseStart1</a>() {
<a name="l00111"></a>00111    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00112"></a>00112    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00113"></a>00113    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115    <span class="comment">/* reset log */</span>
<a name="l00116"></a>00116    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00119"></a>00119    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00120"></a>00120    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00121"></a>00121    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00122"></a>00122    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00123"></a>00123    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125    <span class="comment">/* Create first test SM */</span>
<a name="l00126"></a>00126    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l00127"></a>00127    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l00128"></a>00128       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00131"></a>00131    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00132"></a>00132       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00133"></a>00133       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00134"></a>00134    }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136    <span class="comment">/* Check that state machine is not started */</span>
<a name="l00137"></a>00137    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDesc) != 0) {
<a name="l00138"></a>00138       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00139"></a>00139       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00140"></a>00140    }
<a name="l00141"></a>00141 
<a name="l00142"></a>00142    <span class="comment">/* Check that no ESM is returned because the SM is stopped */</span>
<a name="l00143"></a>00143    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc) != NULL) {
<a name="l00144"></a>00144       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00145"></a>00145       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00146"></a>00146    }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00149"></a>00149    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l00150"></a>00150    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l00151"></a>00151       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00152"></a>00152       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00153"></a>00153    }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155    <span class="comment">/* Try re-starting the SM and check that nothing happens */</span>
<a name="l00156"></a>00156    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l00157"></a>00157    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l00158"></a>00158       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00159"></a>00159       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00160"></a>00160    }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162    <span class="comment">/* Check that state machine is started */</span>
<a name="l00163"></a>00163    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDesc) != 1) {
<a name="l00164"></a>00164       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00165"></a>00165       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00166"></a>00166    }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00169"></a>00169    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00173"></a><a class="code" href="_fw_sm_test_cases_8h.html#a75e11ca78e74bb98829bc3a04974a1fb">00173</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a75e11ca78e74bb98829bc3a04974a1fb" title="Test the Start command on a state machine where the initial pseudo-state is connected to a choice pse...">FwSmTestCaseStart2</a>() {
<a name="l00174"></a>00174    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00175"></a>00175    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00176"></a>00176    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178    <span class="comment">/* reset log */</span>
<a name="l00179"></a>00179    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00182"></a>00182    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00183"></a>00183    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00184"></a>00184    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00185"></a>00185    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;  <span class="comment">/* this forces the selection of the transition from IPS to FPS */</span>
<a name="l00186"></a>00186    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188    <span class="comment">/* Create test SM */</span>
<a name="l00189"></a>00189    smDesc2 = <a class="code" href="_fw_sm_make_test_8c.html#aff539c380811965de45ddcc6d31e399c" title="Operation to create and configure the state machine SM2.">FwSmMakeTestSM2</a>(smData);
<a name="l00190"></a>00190    <span class="keywordflow">if</span> (smDesc2==NULL)
<a name="l00191"></a>00191       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00194"></a>00194    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc2) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00195"></a>00195       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l00196"></a>00196       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00197"></a>00197    }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00200"></a>00200    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l00201"></a>00201    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=0)) {
<a name="l00202"></a>00202       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l00203"></a>00203       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00204"></a>00204    }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206    <span class="comment">/* Modify flags to force transition into S1 upon start */</span>
<a name="l00207"></a>00207    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l00208"></a>00208    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00211"></a>00211    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l00212"></a>00212    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00213"></a>00213       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l00214"></a>00214       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00215"></a>00215    }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217    <span class="comment">/* Verify the function to get the state of an embedded state machine in the case</span>
<a name="l00218"></a>00218 <span class="comment">    * where a state has no embedded state machine */</span>
<a name="l00219"></a>00219    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc2)!=-1) {
<a name="l00220"></a>00220          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l00221"></a>00221          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00222"></a>00222       }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l00225"></a>00225    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00229"></a><a class="code" href="_fw_sm_test_cases_8h.html#af6df7cba082a7ffd9b92684478610176">00229</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#af6df7cba082a7ffd9b92684478610176" title="Test the Start command on a simple state machine where the initial pseudo-state is directly connected...">FwSmTestCaseStart3</a>() {
<a name="l00230"></a>00230    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00231"></a>00231    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00232"></a>00232    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00233"></a>00233    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00234"></a>00234    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc3;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236    <span class="comment">/* reset log */</span>
<a name="l00237"></a>00237    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l00240"></a>00240    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00241"></a>00241    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00242"></a>00242    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00243"></a>00243    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00244"></a>00244    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l00247"></a>00247    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00248"></a>00248    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00249"></a>00249    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00250"></a>00250    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1; <span class="comment">/* this forces the selection of the transition from IPS to FPS */</span>
<a name="l00251"></a>00251    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253    <span class="comment">/* Create test SM */</span>
<a name="l00254"></a>00254    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#ae460bee9c3d9ccb5eb556b7a46fd8002" title="Operation to create and configure the state machine SM3.">FwSmMakeTestSM3</a>(smData, esmData);
<a name="l00255"></a>00255    <span class="keywordflow">if</span> (smDesc3==NULL)
<a name="l00256"></a>00256       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00259"></a>00259    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00260"></a>00260       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00261"></a>00261       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00262"></a>00262    }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264    <span class="comment">/* Check the function to retrieve the current sub-state */</span>
<a name="l00265"></a>00265    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc3) != -1) {
<a name="l00266"></a>00266       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00267"></a>00267       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00268"></a>00268    }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00271"></a>00271    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l00272"></a>00272    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00273"></a>00273       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00274"></a>00274       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00275"></a>00275    }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc3)!=0)) {
<a name="l00278"></a>00278       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00279"></a>00279       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00280"></a>00280    }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00283"></a>00283    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00287"></a><a class="code" href="_fw_sm_test_cases_8h.html#af1449a7924c3c6139baba6c464cb4098">00287</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#af1449a7924c3c6139baba6c464cb4098" title="Test the Stop command on a state machine without embedded state machines.">FwSmTestCaseStop1</a>() {
<a name="l00288"></a>00288    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00289"></a>00289    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00290"></a>00290    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292    <span class="comment">/* reset log */</span>
<a name="l00293"></a>00293    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00296"></a>00296    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00297"></a>00297    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00298"></a>00298    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00299"></a>00299    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00300"></a>00300    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302    <span class="comment">/* Create test SM */</span>
<a name="l00303"></a>00303    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l00304"></a>00304    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l00305"></a>00305       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00306"></a>00306 
<a name="l00307"></a>00307    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00308"></a>00308    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00309"></a>00309       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00310"></a>00310       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00311"></a>00311    }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313    <span class="comment">/* Check that stopping a SM which is already stopped has no effect */</span>
<a name="l00314"></a>00314    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l00315"></a>00315    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l00316"></a>00316       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00317"></a>00317       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00318"></a>00318    }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00321"></a>00321    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l00322"></a>00322    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00323"></a>00323       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00324"></a>00324       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00325"></a>00325    }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327    <span class="comment">/* Stop SM and check success */</span>
<a name="l00328"></a>00328    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l00329"></a>00329    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l00330"></a>00330       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00331"></a>00331       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00332"></a>00332    }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00335"></a>00335    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00339"></a><a class="code" href="_fw_sm_test_cases_8h.html#a09ad4a1ba771831521ac8f7ca4fbd792">00339</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a09ad4a1ba771831521ac8f7ca4fbd792" title="Test the Stop command for a state machine with an embedded state machine.">FwSmTestCaseStop2</a>() {
<a name="l00340"></a>00340    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00341"></a>00341    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00342"></a>00342    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00343"></a>00343    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00344"></a>00344    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc3;
<a name="l00345"></a>00345    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347    <span class="comment">/* reset log */</span>
<a name="l00348"></a>00348    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l00351"></a>00351    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00352"></a>00352    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00353"></a>00353    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00354"></a>00354    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00355"></a>00355    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l00358"></a>00358    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00359"></a>00359    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00360"></a>00360    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1; <span class="comment">/* this forces the selection of the transition from IPS to S1 */</span>
<a name="l00361"></a>00361    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00362"></a>00362    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364    <span class="comment">/* Create test SM */</span>
<a name="l00365"></a>00365    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#ae460bee9c3d9ccb5eb556b7a46fd8002" title="Operation to create and configure the state machine SM3.">FwSmMakeTestSM3</a>(smData, esmData);
<a name="l00366"></a>00366    <span class="keywordflow">if</span> (smDesc3==NULL)
<a name="l00367"></a>00367       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00370"></a>00370    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00371"></a>00371       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00372"></a>00372       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00373"></a>00373    }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00376"></a>00376    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l00377"></a>00377    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00378"></a>00378       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00379"></a>00379       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00380"></a>00380    }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00383"></a>00383       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00384"></a>00384       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00385"></a>00385    }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387    <span class="comment">/* Stop SM and check outcome of stop operation */</span>
<a name="l00388"></a>00388    smDesc2 = <a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc3); <span class="comment">/* get the SM embedded in the current state of smDesc3 */</span>
<a name="l00389"></a>00389    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc3);
<a name="l00390"></a>00390    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=0)) {
<a name="l00391"></a>00391       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00392"></a>00392       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00393"></a>00393    }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=0)) {
<a name="l00396"></a>00396       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00397"></a>00397       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00398"></a>00398    }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00401"></a>00401    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00405"></a><a class="code" href="_fw_sm_test_cases_8h.html#a7d4590ddf6e9830d2ab69f4dd1ebde35">00405</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a7d4590ddf6e9830d2ab69f4dd1ebde35" title="Test the Stop command for a state machine with an embedded state machine.">FwSmTestCaseStop3</a>() {
<a name="l00406"></a>00406    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00407"></a>00407    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00408"></a>00408    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00409"></a>00409    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00410"></a>00410    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc3;
<a name="l00411"></a>00411    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2;
<a name="l00412"></a>00412 
<a name="l00413"></a>00413    <span class="comment">/* reset log */</span>
<a name="l00414"></a>00414    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00415"></a>00415 
<a name="l00416"></a>00416    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l00417"></a>00417    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00418"></a>00418    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00419"></a>00419    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00420"></a>00420    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00421"></a>00421    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l00424"></a>00424    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00425"></a>00425    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00426"></a>00426    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00427"></a>00427    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1; <span class="comment">/* this forces the selection of the transition from IPS to FPS */</span>
<a name="l00428"></a>00428    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430    <span class="comment">/* Create test SM */</span>
<a name="l00431"></a>00431    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#ae460bee9c3d9ccb5eb556b7a46fd8002" title="Operation to create and configure the state machine SM3.">FwSmMakeTestSM3</a>(smData, esmData);
<a name="l00432"></a>00432    <span class="keywordflow">if</span> (smDesc3==NULL)
<a name="l00433"></a>00433       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00436"></a>00436    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00437"></a>00437       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00438"></a>00438       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00439"></a>00439    }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00442"></a>00442    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l00443"></a>00443    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00444"></a>00444       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00445"></a>00445       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00446"></a>00446    }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc3))!=0)) {
<a name="l00449"></a>00449       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00450"></a>00450       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00451"></a>00451    }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453    <span class="comment">/* Stop SM and check outcome of stop operation */</span>
<a name="l00454"></a>00454    smDesc2 = <a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc3); <span class="comment">/* get the SM embedded in the current state of smDesc3 */</span>
<a name="l00455"></a>00455    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc3);
<a name="l00456"></a>00456    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=0)) {
<a name="l00457"></a>00457       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00458"></a>00458       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00459"></a>00459    }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=0)) {
<a name="l00462"></a>00462       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00463"></a>00463       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00464"></a>00464    }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00467"></a>00467    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00468"></a>00468 }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00471"></a><a class="code" href="_fw_sm_test_cases_8h.html#a4996a0bdcdc135d20277e07419889629">00471</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a4996a0bdcdc135d20277e07419889629" title="Test the Execute command in a configuration where the command only causes the do-action of a simple s...">FwSmTestCaseExecute1</a>() {
<a name="l00472"></a>00472    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00473"></a>00473    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00474"></a>00474    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476    <span class="comment">/* reset log */</span>
<a name="l00477"></a>00477    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00478"></a>00478 
<a name="l00479"></a>00479    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00480"></a>00480    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00481"></a>00481    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00482"></a>00482    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00483"></a>00483    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00484"></a>00484    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486    <span class="comment">/* Create test SM */</span>
<a name="l00487"></a>00487    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l00488"></a>00488    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l00489"></a>00489       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00490"></a>00490 
<a name="l00491"></a>00491    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00492"></a>00492    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00493"></a>00493       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l00494"></a>00494       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00495"></a>00495    }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497    <span class="comment">/* Attempt executing a stopped state machine and check that nothing happens */</span>
<a name="l00498"></a>00498    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l00499"></a>00499    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0) ||
<a name="l00500"></a>00500          (smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a>!=0)) {
<a name="l00501"></a>00501       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l00502"></a>00502       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00503"></a>00503    }
<a name="l00504"></a>00504 
<a name="l00505"></a>00505    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00506"></a>00506    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l00507"></a>00507    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00508"></a>00508       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l00509"></a>00509       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00510"></a>00510    }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512    <span class="comment">/* Execute state machine twice and check success */</span>
<a name="l00513"></a>00513    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00514"></a>00514    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00515"></a>00515       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l00516"></a>00516       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00517"></a>00517    }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00520"></a>00520    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00521"></a>00521       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l00522"></a>00522       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00523"></a>00523    }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l00526"></a>00526    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00527"></a>00527 }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00530"></a><a class="code" href="_fw_sm_test_cases_8h.html#ab55b1785b252a40a17ef347b7bad471c">00530</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ab55b1785b252a40a17ef347b7bad471c" title="Test the Execute command in a configuration where the command only causes the do-action of a state wi...">FwSmTestCaseExecute2</a>() {
<a name="l00531"></a>00531    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00532"></a>00532    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00533"></a>00533    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00534"></a>00534    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00535"></a>00535    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc3;
<a name="l00536"></a>00536    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc2;
<a name="l00537"></a>00537 
<a name="l00538"></a>00538    <span class="comment">/* reset log */</span>
<a name="l00539"></a>00539    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00540"></a>00540 
<a name="l00541"></a>00541    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l00542"></a>00542    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00543"></a>00543    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00544"></a>00544    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00545"></a>00545    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00546"></a>00546    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00547"></a>00547 
<a name="l00548"></a>00548    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l00549"></a>00549    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00550"></a>00550    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00551"></a>00551    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1; <span class="comment">/* this forces the selection of the transition from IPS to S1 */</span>
<a name="l00552"></a>00552    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00553"></a>00553    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555    <span class="comment">/* Create test SM */</span>
<a name="l00556"></a>00556    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#ae460bee9c3d9ccb5eb556b7a46fd8002" title="Operation to create and configure the state machine SM3.">FwSmMakeTestSM3</a>(smData, esmData);
<a name="l00557"></a>00557    <span class="keywordflow">if</span> (smDesc3==NULL)
<a name="l00558"></a>00558       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00561"></a>00561    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00562"></a>00562       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00563"></a>00563       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00564"></a>00564    }
<a name="l00565"></a>00565 
<a name="l00566"></a>00566    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00567"></a>00567    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l00568"></a>00568    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00569"></a>00569       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00570"></a>00570       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00571"></a>00571    }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc3))!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00574"></a>00574       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00575"></a>00575       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00576"></a>00576    }
<a name="l00577"></a>00577 
<a name="l00578"></a>00578    <span class="comment">/* Execute SM twice and check outcome of Execute operation */</span>
<a name="l00579"></a>00579    smDesc2 = <a class="code" href="_fw_sm_core_8c.html#abe7bd8035f5d885b02ab0d2419abae7e" title="Return the state machine embedded in the current state.">FwSmGetEmbSmCur</a>(smDesc3); <span class="comment">/* get the SM embedded in the current state of smDesc3 */</span>
<a name="l00580"></a>00580    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00581"></a>00581    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00582"></a>00582       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00583"></a>00583       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00584"></a>00584    }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00587"></a>00587       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00588"></a>00588       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00589"></a>00589    }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00592"></a>00592    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00593"></a>00593       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00594"></a>00594       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00595"></a>00595    }
<a name="l00596"></a>00596 
<a name="l00597"></a>00597    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00598"></a>00598       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00599"></a>00599       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00600"></a>00600    }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc3);
<a name="l00603"></a>00603    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00604"></a>00604 }
<a name="l00605"></a>00605 
<a name="l00606"></a>00606 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00607"></a><a class="code" href="_fw_sm_test_cases_8h.html#a36e66c37842721c2365fb26359c118a1">00607</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a36e66c37842721c2365fb26359c118a1" title="Test the Execute command in a configuration where the command triggers a transition between two prope...">FwSmTestCaseExecute3</a>() {
<a name="l00608"></a>00608    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00609"></a>00609    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00610"></a>00610    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc4;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612    <span class="comment">/* reset log */</span>
<a name="l00613"></a>00613    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00616"></a>00616    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00617"></a>00617    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00618"></a>00618    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* Allow transition to take place */</span>
<a name="l00619"></a>00619    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00620"></a>00620    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622    <span class="comment">/* Create test SM */</span>
<a name="l00623"></a>00623    smDesc4 = <a class="code" href="_fw_sm_make_test_8c.html#a1d8a4f7b283c6063a4d6d4e1d2d2bfe4" title="Operation to create and configure the state machine SM4.">FwSmMakeTestSM4</a>(smData);
<a name="l00624"></a>00624    <span class="keywordflow">if</span> (smDesc4==NULL)
<a name="l00625"></a>00625       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00628"></a>00628    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc4) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00629"></a>00629       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00630"></a>00630       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00631"></a>00631    }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00634"></a>00634    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc4);
<a name="l00635"></a>00635    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00636"></a>00636       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00637"></a>00637       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00638"></a>00638    }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640    <span class="comment">/* Execute state machine and check success */</span>
<a name="l00641"></a>00641    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc4, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00642"></a>00642    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00643"></a>00643       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00644"></a>00644       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00645"></a>00645    }
<a name="l00646"></a>00646 
<a name="l00647"></a>00647    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc4, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00648"></a>00648    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=15) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00649"></a>00649       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00650"></a>00650       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00651"></a>00651    }
<a name="l00652"></a>00652 
<a name="l00653"></a>00653    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00654"></a>00654    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00658"></a><a class="code" href="_fw_sm_test_cases_8h.html#a843747be877c688a695627c84e2efee0">00658</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a843747be877c688a695627c84e2efee0" title="Test a self-transition on a simple state (state S2 of SM4).">FwSmTestCaseSelfTrans1</a>() {
<a name="l00659"></a>00659    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00660"></a>00660    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00661"></a>00661    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc4;
<a name="l00662"></a>00662 
<a name="l00663"></a>00663    <span class="comment">/* reset log */</span>
<a name="l00664"></a>00664    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00665"></a>00665 
<a name="l00666"></a>00666    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00667"></a>00667    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00668"></a>00668    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00669"></a>00669    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* Allow transition to take place */</span>
<a name="l00670"></a>00670    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00671"></a>00671    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673    <span class="comment">/* Create test SM */</span>
<a name="l00674"></a>00674    smDesc4 = <a class="code" href="_fw_sm_make_test_8c.html#a1d8a4f7b283c6063a4d6d4e1d2d2bfe4" title="Operation to create and configure the state machine SM4.">FwSmMakeTestSM4</a>(smData);
<a name="l00675"></a>00675    <span class="keywordflow">if</span> (smDesc4==NULL)
<a name="l00676"></a>00676       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00677"></a>00677 
<a name="l00678"></a>00678    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00679"></a>00679    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc4) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00680"></a>00680       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00681"></a>00681       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00682"></a>00682    }
<a name="l00683"></a>00683 
<a name="l00684"></a>00684    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00685"></a>00685    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc4);
<a name="l00686"></a>00686    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00687"></a>00687       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00688"></a>00688       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00689"></a>00689    }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691    <span class="comment">/* Execute state machine to bring it to state S2 */</span>
<a name="l00692"></a>00692    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc4, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00693"></a>00693    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00694"></a>00694       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00695"></a>00695       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00696"></a>00696    }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698    <span class="comment">/* Execute self-transition */</span>
<a name="l00699"></a>00699    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l00700"></a>00700    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc4, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l00701"></a>00701    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=13) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc4)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00702"></a>00702       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00703"></a>00703       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00704"></a>00704    }
<a name="l00705"></a>00705    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l00706"></a>00706       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00707"></a>00707       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00708"></a>00708    }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc4);
<a name="l00711"></a>00711    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00715"></a><a class="code" href="_fw_sm_test_cases_8h.html#a6d8ce72d2cc692adbaebb3f0518686d0">00715</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a6d8ce72d2cc692adbaebb3f0518686d0" title="Test a direct transition between two simple states (states S1 and S2 of SM5).">FwSmTestCaseTrans1</a>() {
<a name="l00716"></a>00716    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00717"></a>00717    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00718"></a>00718    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc5;
<a name="l00719"></a>00719 
<a name="l00720"></a>00720    <span class="comment">/* reset log */</span>
<a name="l00721"></a>00721    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00722"></a>00722 
<a name="l00723"></a>00723    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00724"></a>00724    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00725"></a>00725    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00726"></a>00726    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* allow transition to take place */</span>
<a name="l00727"></a>00727    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00728"></a>00728    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730    <span class="comment">/* Create test SM */</span>
<a name="l00731"></a>00731    smDesc5 = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(smData);
<a name="l00732"></a>00732    <span class="keywordflow">if</span> (smDesc5==NULL)
<a name="l00733"></a>00733       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00734"></a>00734 
<a name="l00735"></a>00735    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00736"></a>00736    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc5) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00737"></a>00737       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00738"></a>00738       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00739"></a>00739    }
<a name="l00740"></a>00740    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00741"></a>00741    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc5);
<a name="l00742"></a>00742    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00743"></a>00743       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00744"></a>00744       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00745"></a>00745    }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747    <span class="comment">/* Send transition command TR4 to SM and check that this has no effect */</span>
<a name="l00748"></a>00748    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00749"></a>00749    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l00750"></a>00750    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l00751"></a>00751       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00752"></a>00752       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00753"></a>00753    }
<a name="l00754"></a>00754 
<a name="l00755"></a>00755    <span class="comment">/* Set guard to prevent transition TR2 from S1 to S2 and then check that transition does not take place */</span>
<a name="l00756"></a>00756    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00757"></a>00757    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l00758"></a>00758    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l00759"></a>00759       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00760"></a>00760       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00761"></a>00761    }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763    <span class="comment">/* Set guard to allow transition TR2 from S1 to S2 and then check that transition does take place */</span>
<a name="l00764"></a>00764    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l00765"></a>00765    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l00766"></a>00766    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3)) {
<a name="l00767"></a>00767       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00768"></a>00768       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00769"></a>00769    }
<a name="l00770"></a>00770    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l00771"></a>00771       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00772"></a>00772       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00773"></a>00773    }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00776"></a>00776    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00777"></a>00777 }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00780"></a><a class="code" href="_fw_sm_test_cases_8h.html#ae48c5f31c38721ebec16a82f21c46d4c">00780</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ae48c5f31c38721ebec16a82f21c46d4c" title="Test a transition through a choice pseudo-state between two simple states (states S1 and S2 of SM5)...">FwSmTestCaseTrans2</a>() {
<a name="l00781"></a>00781    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00782"></a>00782    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00783"></a>00783    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc5;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785    <span class="comment">/* reset log */</span>
<a name="l00786"></a>00786    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00787"></a>00787 
<a name="l00788"></a>00788    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l00789"></a>00789    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00790"></a>00790    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00791"></a>00791    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* allow transition to take place */</span>
<a name="l00792"></a>00792    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00793"></a>00793    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795    <span class="comment">/* Create test SM */</span>
<a name="l00796"></a>00796    smDesc5 = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(smData);
<a name="l00797"></a>00797    <span class="keywordflow">if</span> (smDesc5==NULL)
<a name="l00798"></a>00798       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00801"></a>00801    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc5) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00802"></a>00802       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00803"></a>00803       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00804"></a>00804    }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l00807"></a>00807    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc5);
<a name="l00808"></a>00808    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00809"></a>00809       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00810"></a>00810       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00811"></a>00811    }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813    <span class="comment">/* Send transition command TR2 to SM (this brings it to state S2) */</span>
<a name="l00814"></a>00814    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l00815"></a>00815    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00816"></a>00816       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00817"></a>00817       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00818"></a>00818    }
<a name="l00819"></a>00819 
<a name="l00820"></a>00820    <span class="comment">/* Set guards to open transition from S2 to S1 and then perform transition */</span>
<a name="l00821"></a>00821    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l00822"></a>00822    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00823"></a>00823    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00824"></a>00824    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a9d297a475108ba8248e6001bd18fd5ee" title="A transition identifier.">TR6</a>);
<a name="l00825"></a>00825    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=11) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4)) {
<a name="l00826"></a>00826       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00827"></a>00827       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00828"></a>00828    }
<a name="l00829"></a>00829    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=1)) {
<a name="l00830"></a>00830       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00831"></a>00831       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00832"></a>00832    }
<a name="l00833"></a>00833    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=1)) {
<a name="l00834"></a>00834       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00835"></a>00835       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00836"></a>00836    }
<a name="l00837"></a>00837 
<a name="l00838"></a>00838    <span class="comment">/* Send transition command TR2 to SM (this brings it to state S2) */</span>
<a name="l00839"></a>00839    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l00840"></a>00840    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=16) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=5) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00841"></a>00841       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00842"></a>00842       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00843"></a>00843    }
<a name="l00844"></a>00844 
<a name="l00845"></a>00845    <span class="comment">/* Set guards to open transition from S2 back to S2 and then perform transition */</span>
<a name="l00846"></a>00846    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l00847"></a>00847    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l00848"></a>00848    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00849"></a>00849    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a9d297a475108ba8248e6001bd18fd5ee" title="A transition identifier.">TR6</a>);
<a name="l00850"></a>00850    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=21) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=7) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4)) {
<a name="l00851"></a>00851       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00852"></a>00852       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00853"></a>00853    }
<a name="l00854"></a>00854    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=1)) {
<a name="l00855"></a>00855       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00856"></a>00856       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00857"></a>00857    }
<a name="l00858"></a>00858    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=2)) {
<a name="l00859"></a>00859       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00860"></a>00860       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00861"></a>00861    }
<a name="l00862"></a>00862 
<a name="l00863"></a>00863    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc5);
<a name="l00864"></a>00864    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00865"></a>00865 }
<a name="l00866"></a>00866 
<a name="l00867"></a>00867 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00868"></a><a class="code" href="_fw_sm_test_cases_8h.html#a2c199d5aa5d7df46ace7326372fe7ea0">00868</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a2c199d5aa5d7df46ace7326372fe7ea0" title="Test propagation of a transition command from an SM to its ESM in a situation where the command has n...">FwSmTestCaseTrans3</a>() {
<a name="l00869"></a>00869    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00870"></a>00870    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00871"></a>00871    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00872"></a>00872    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00873"></a>00873    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc6;
<a name="l00874"></a>00874 
<a name="l00875"></a>00875    <span class="comment">/* reset log */</span>
<a name="l00876"></a>00876    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l00879"></a>00879    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00880"></a>00880    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00881"></a>00881    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* this allows all transitions in embedding SM */</span>
<a name="l00882"></a>00882    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00883"></a>00883    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l00886"></a>00886    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l00887"></a>00887    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l00888"></a>00888    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1; <span class="comment">/* this forces the selection of the transition from S2 to S1 in ESM */</span>
<a name="l00889"></a>00889    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l00890"></a>00890    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 10;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892    <span class="comment">/* Create test SM */</span>
<a name="l00893"></a>00893    smDesc6 = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smData, esmData);
<a name="l00894"></a>00894    <span class="keywordflow">if</span> (smDesc6==NULL)
<a name="l00895"></a>00895       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897    <span class="comment">/* Check configuration of state machine */</span>
<a name="l00898"></a>00898    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc6) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l00899"></a>00899       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00900"></a>00900       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00901"></a>00901    }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l00904"></a>00904    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l00905"></a>00905    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc6);
<a name="l00906"></a>00906    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=1)) {
<a name="l00907"></a>00907       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00908"></a>00908       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00909"></a>00909    }
<a name="l00910"></a>00910    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>))!=0)) {
<a name="l00911"></a>00911       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00912"></a>00912       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00913"></a>00913    }
<a name="l00914"></a>00914    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=1)) {
<a name="l00915"></a>00915       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00916"></a>00916       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00917"></a>00917    }
<a name="l00918"></a>00918    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=0) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=1)) {
<a name="l00919"></a>00919       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00920"></a>00920       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00921"></a>00921    }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923    <span class="comment">/* Execute SM (this causes a transition from S1 to S2 and the starting of the ESM) */</span>
<a name="l00924"></a>00924    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l00925"></a>00925    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00926"></a>00926       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00927"></a>00927       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00928"></a>00928    }
<a name="l00929"></a>00929    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00930"></a>00930       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00931"></a>00931       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00932"></a>00932    }
<a name="l00933"></a>00933    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[4]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[5]!=1)) {
<a name="l00934"></a>00934       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00935"></a>00935       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00936"></a>00936    }
<a name="l00937"></a>00937    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=1) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=1) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[4]!=1) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[5]!=2)) {
<a name="l00938"></a>00938       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00939"></a>00939       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00940"></a>00940    }
<a name="l00941"></a>00941    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[6]!=14) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[7]!=11)) {
<a name="l00942"></a>00942       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00943"></a>00943       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00944"></a>00944    }
<a name="l00945"></a>00945    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[6]!=10) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[7]!=11)) {
<a name="l00946"></a>00946       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00947"></a>00947       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00948"></a>00948    }
<a name="l00949"></a>00949 
<a name="l00950"></a>00950    <span class="comment">/* Send TR5 command to SM (this has no effect on either the SM or its ESM) */</span>
<a name="l00951"></a>00951    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a0bcf12088b25ec6bf193f4a171155565" title="A transition identifier.">TR5</a>);
<a name="l00952"></a>00952    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00953"></a>00953       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00954"></a>00954       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00955"></a>00955    }
<a name="l00956"></a>00956    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l00957"></a>00957       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00958"></a>00958       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00959"></a>00959    }
<a name="l00960"></a>00960    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=8) {
<a name="l00961"></a>00961       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00962"></a>00962       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00963"></a>00963    }
<a name="l00964"></a>00964 
<a name="l00965"></a>00965    <span class="comment">/* Send TR2 command to SM (this has no effect on the SM but causes the ESM to go from S1 to S2) */</span>
<a name="l00966"></a>00966    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l00967"></a>00967    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00968"></a>00968       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00969"></a>00969       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00970"></a>00970    }
<a name="l00971"></a>00971    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l00972"></a>00972       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00973"></a>00973       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00974"></a>00974    }
<a name="l00975"></a>00975    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=11) {
<a name="l00976"></a>00976       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00977"></a>00977       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00978"></a>00978    }
<a name="l00979"></a>00979    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[8]!=13) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[9]!=14) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[10]!=11)) {
<a name="l00980"></a>00980       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00981"></a>00981       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00982"></a>00982    }
<a name="l00983"></a>00983    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[8]!=11) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[9]!=11) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[10]!=12)) {
<a name="l00984"></a>00984       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00985"></a>00985       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l00986"></a>00986    }
<a name="l00987"></a>00987 
<a name="l00988"></a>00988    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l00989"></a>00989    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l00990"></a>00990 }
<a name="l00991"></a>00991 
<a name="l00992"></a>00992 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l00993"></a><a class="code" href="_fw_sm_test_cases_8h.html#a01c879c0c62b003412b35e6107d057a0">00993</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a01c879c0c62b003412b35e6107d057a0" title="Test propagation of execution command to an ESM.">FwSmTestCaseExecute4</a>() {
<a name="l00994"></a>00994    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l00995"></a>00995    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l00996"></a>00996    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l00997"></a>00997    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l00998"></a>00998    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc6;
<a name="l00999"></a>00999 
<a name="l01000"></a>01000    <span class="comment">/* reset log */</span>
<a name="l01001"></a>01001    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01004"></a>01004    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01005"></a>01005    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01006"></a>01006    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* this allows all transitions in embedding SM */</span>
<a name="l01007"></a>01007    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01008"></a>01008    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l01011"></a>01011    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01012"></a>01012    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01013"></a>01013    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1; <span class="comment">/* this forces the selection of the transition from S2 to S1 in ESM */</span>
<a name="l01014"></a>01014    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01015"></a>01015    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 10;
<a name="l01016"></a>01016 
<a name="l01017"></a>01017    <span class="comment">/* Create test SM */</span>
<a name="l01018"></a>01018    smDesc6 = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smData, esmData);
<a name="l01019"></a>01019    <span class="keywordflow">if</span> (smDesc6==NULL)
<a name="l01020"></a>01020       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01021"></a>01021 
<a name="l01022"></a>01022    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01023"></a>01023    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc6) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01024"></a>01024       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01025"></a>01025       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01026"></a>01026    }
<a name="l01027"></a>01027 
<a name="l01028"></a>01028    <span class="comment">/* Start and execute SM (this brings the embedding SM in S2 and starts the ESM) */</span>
<a name="l01029"></a>01029    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01030"></a>01030    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc6);
<a name="l01031"></a>01031    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc6);
<a name="l01032"></a>01032    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01033"></a>01033       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01034"></a>01034       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01035"></a>01035    }
<a name="l01036"></a>01036    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01037"></a>01037       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01038"></a>01038       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01039"></a>01039    }
<a name="l01040"></a>01040 
<a name="l01041"></a>01041    <span class="comment">/* Send TR2 command to SM (this has no effect on the SM but causes the ESM to go from S1 to S2) */</span>
<a name="l01042"></a>01042    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01043"></a>01043    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01044"></a>01044       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01045"></a>01045       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01046"></a>01046    }
<a name="l01047"></a>01047    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01048"></a>01048       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01049"></a>01049       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01050"></a>01050    }
<a name="l01051"></a>01051    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053    <span class="comment">/* Execute the SM (this causes the do-action of the S2 of both the SM and ESM to be executed and then triggers */</span>
<a name="l01054"></a>01054    <span class="comment">/* a transition from S2 to S1 in the SM) */</span>
<a name="l01055"></a>01055    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc6);
<a name="l01056"></a>01056    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=15) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01057"></a>01057       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01058"></a>01058       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01059"></a>01059    }
<a name="l01060"></a>01060    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>))!=0)) {
<a name="l01061"></a>01061       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01062"></a>01062       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01063"></a>01063    }
<a name="l01064"></a>01064    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=6) {
<a name="l01065"></a>01065       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01066"></a>01066       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01067"></a>01067    }
<a name="l01068"></a>01068    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=12)|| (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=13) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=3) ||
<a name="l01069"></a>01069          (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[4]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[5]!=1)) {
<a name="l01070"></a>01070       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01071"></a>01071       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01072"></a>01072    }
<a name="l01073"></a>01073    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=12)|| (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=12) ||
<a name="l01074"></a>01074          (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[4]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[5]!=1)) {
<a name="l01075"></a>01075       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01076"></a>01076       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01077"></a>01077    }
<a name="l01078"></a>01078 
<a name="l01079"></a>01079    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01080"></a>01080    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01081"></a>01081 }
<a name="l01082"></a>01082 
<a name="l01083"></a>01083 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01084"></a><a class="code" href="_fw_sm_test_cases_8h.html#adfb95db2d5e09840fa6ee6040ed648b1">01084</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#adfb95db2d5e09840fa6ee6040ed648b1" title="Test a transition command which triggers a transition in both the embedding and in the embedded state...">FwSmTestCaseTrans4</a>() {
<a name="l01085"></a>01085    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01086"></a>01086    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01087"></a>01087    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l01088"></a>01088    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l01089"></a>01089    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc6;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091    <span class="comment">/* reset log */</span>
<a name="l01092"></a>01092    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01093"></a>01093 
<a name="l01094"></a>01094    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01095"></a>01095    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01096"></a>01096    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01097"></a>01097    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* this allows all transitions in embedding SM */</span>
<a name="l01098"></a>01098    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01099"></a>01099    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01100"></a>01100 
<a name="l01101"></a>01101    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l01102"></a>01102    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01103"></a>01103    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01104"></a>01104    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1; <span class="comment">/* this forces the selection of the transition from S2 to S1 in ESM */</span>
<a name="l01105"></a>01105    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01106"></a>01106    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 10;
<a name="l01107"></a>01107 
<a name="l01108"></a>01108    <span class="comment">/* Create test SM */</span>
<a name="l01109"></a>01109    smDesc6 = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smData, esmData);
<a name="l01110"></a>01110    <span class="keywordflow">if</span> (smDesc6==NULL)
<a name="l01111"></a>01111       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01112"></a>01112 
<a name="l01113"></a>01113    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01114"></a>01114    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc6) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01115"></a>01115       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01116"></a>01116       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01117"></a>01117    }
<a name="l01118"></a>01118 
<a name="l01119"></a>01119    <span class="comment">/* Start and execute SM (this brings the embedding SM in S2 and starts the ESM) */</span>
<a name="l01120"></a>01120    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01121"></a>01121    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc6);
<a name="l01122"></a>01122    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc6);
<a name="l01123"></a>01123    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01124"></a>01124       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01125"></a>01125       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01126"></a>01126    }
<a name="l01127"></a>01127    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01128"></a>01128       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01129"></a>01129       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01130"></a>01130    }
<a name="l01131"></a>01131 
<a name="l01132"></a>01132    <span class="comment">/* Send TR2 command to SM (this has no effect on the SM but causes the ESM to go from S1 to S2) */</span>
<a name="l01133"></a>01133    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01134"></a>01134    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01135"></a>01135       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01136"></a>01136       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01137"></a>01137    }
<a name="l01138"></a>01138    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01139"></a>01139       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01140"></a>01140       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01141"></a>01141    }
<a name="l01142"></a>01142 
<a name="l01143"></a>01143    <span class="comment">/* Send TR4 command to SM (this causes a self-transition on both the SM and the ESM) */</span>
<a name="l01144"></a>01144    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log counter */</span>
<a name="l01145"></a>01145    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc6, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l01146"></a>01146    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=13) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l01147"></a>01147       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01148"></a>01148       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01149"></a>01149    }
<a name="l01150"></a>01150    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=16) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc6)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01151"></a>01151       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01152"></a>01152       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01153"></a>01153    }
<a name="l01154"></a>01154    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=9) {
<a name="l01155"></a>01155       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01156"></a>01156       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01157"></a>01157    }
<a name="l01158"></a>01158    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=13) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=14) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=11) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=13) ||
<a name="l01159"></a>01159          (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[4]!=3)) {
<a name="l01160"></a>01160       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01161"></a>01161       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01162"></a>01162    }
<a name="l01163"></a>01163    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[5]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[6]!=1) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[7]!=14) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[8]!=11)) {
<a name="l01164"></a>01164       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01165"></a>01165       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01166"></a>01166    }
<a name="l01167"></a>01167    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=12) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=12) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=12)|| (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=12) ||
<a name="l01168"></a>01168          (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[4]!=2)) {
<a name="l01169"></a>01169       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01170"></a>01170       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01171"></a>01171    }
<a name="l01172"></a>01172    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[5]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[6]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[7]!=10) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[8]!=11)) {
<a name="l01173"></a>01173       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01174"></a>01174       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01175"></a>01175    }
<a name="l01176"></a>01176 
<a name="l01177"></a>01177    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc6);
<a name="l01178"></a>01178    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01179"></a>01179 }
<a name="l01180"></a>01180 
<a name="l01181"></a>01181 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01182"></a><a class="code" href="_fw_sm_test_cases_8h.html#a53702d3b635ce3b60cf1bdd8f77f5056">01182</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a53702d3b635ce3b60cf1bdd8f77f5056" title="Verify the correct behaviour of a state machine descriptor which was created by directly instantiatin...">FwSmTestCaseDescDir1</a>() {
<a name="l01183"></a>01183    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01184"></a>01184    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01185"></a>01185    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc5;
<a name="l01186"></a>01186 
<a name="l01187"></a>01187    <span class="comment">/* reset log */</span>
<a name="l01188"></a>01188    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01189"></a>01189 
<a name="l01190"></a>01190    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l01191"></a>01191    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01192"></a>01192    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01193"></a>01193    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* allow transition to take place */</span>
<a name="l01194"></a>01194    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01195"></a>01195    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01196"></a>01196 
<a name="l01197"></a>01197    <span class="comment">/* Create test SM */</span>
<a name="l01198"></a>01198    smDesc5 = <a class="code" href="_fw_sm_make_test_8c.html#af1e9545a65b7c56321ce1404cb45a1de" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM5 and figure below) by dir...">FwSmMakeTestSM5Dir</a>(smData);
<a name="l01199"></a>01199 
<a name="l01200"></a>01200    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01201"></a>01201    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc5) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01202"></a>01202       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01203"></a>01203    }
<a name="l01204"></a>01204 
<a name="l01205"></a>01205    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l01206"></a>01206    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc5);
<a name="l01207"></a>01207    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01208"></a>01208       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01209"></a>01209    }
<a name="l01210"></a>01210 
<a name="l01211"></a>01211    <span class="comment">/* Send transition command TR4 to SM and check that this has no effect */</span>
<a name="l01212"></a>01212    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01213"></a>01213    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l01214"></a>01214    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l01215"></a>01215       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01216"></a>01216    }
<a name="l01217"></a>01217 
<a name="l01218"></a>01218    <span class="comment">/* Set guard to prevent transition TR2 from S1 to S2 and then check that transition does not take place */</span>
<a name="l01219"></a>01219    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01220"></a>01220    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01221"></a>01221    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l01222"></a>01222       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01223"></a>01223    }
<a name="l01224"></a>01224 
<a name="l01225"></a>01225    <span class="comment">/* Set guard to allow transition TR2 from S1 to S2 and then check that transition does take place */</span>
<a name="l01226"></a>01226    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l01227"></a>01227    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01228"></a>01228    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3)) {
<a name="l01229"></a>01229       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01230"></a>01230    }
<a name="l01231"></a>01231    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l01232"></a>01232       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01233"></a>01233    }
<a name="l01234"></a>01234 
<a name="l01235"></a>01235    <span class="comment">/* Set guard to allow transition from CPS1 to S2 and then trigger transition from S2 back to S2 via CPS1 */</span>
<a name="l01236"></a>01236    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01237"></a>01237    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l01238"></a>01238    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01239"></a>01239    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a9d297a475108ba8248e6001bd18fd5ee" title="A transition identifier.">TR6</a>);
<a name="l01240"></a>01240    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=11) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4)) {
<a name="l01241"></a>01241       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01242"></a>01242    }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244    <span class="comment">/* Set guard to allow transition from S2 to FPS and then trigger transition */</span>
<a name="l01245"></a>01245    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l01246"></a>01246    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01247"></a>01247    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a0bcf12088b25ec6bf193f4a171155565" title="A transition identifier.">TR5</a>);
<a name="l01248"></a>01248    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=15) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=5) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=0) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=2)) {
<a name="l01249"></a>01249       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01250"></a>01250    }
<a name="l01251"></a>01251 
<a name="l01252"></a>01252    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01253"></a>01253 }
<a name="l01254"></a>01254 
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01257"></a><a class="code" href="_fw_sm_test_cases_8h.html#a985b4b34b592c220bfcd1d600708c705">01257</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a985b4b34b592c220bfcd1d600708c705" title="Verify the correct behaviour of a state machine descriptor which was created statically using the ser...">FwSmTestCaseDescStatic2</a>() {
<a name="l01258"></a>01258    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01259"></a>01259    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01260"></a>01260    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc5;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262    <span class="comment">/* reset log */</span>
<a name="l01263"></a>01263    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01264"></a>01264 
<a name="l01265"></a>01265    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l01266"></a>01266    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01267"></a>01267    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01268"></a>01268    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;  <span class="comment">/* allow transition to take place */</span>
<a name="l01269"></a>01269    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l01270"></a>01270    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01271"></a>01271 
<a name="l01272"></a>01272    <span class="comment">/* Create test SM */</span>
<a name="l01273"></a>01273    smDesc5 = <a class="code" href="_fw_sm_make_test_8c.html#a877e06c6da3d200bf089bdaf06ad169d" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM5 and figure below) static...">FwSmMakeTestSM5Static</a>(smData);
<a name="l01274"></a>01274 
<a name="l01275"></a>01275    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01276"></a>01276    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc5) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01277"></a>01277       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01278"></a>01278    }
<a name="l01279"></a>01279 
<a name="l01280"></a>01280    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l01281"></a>01281    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc5);
<a name="l01282"></a>01282    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01283"></a>01283       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01284"></a>01284    }
<a name="l01285"></a>01285 
<a name="l01286"></a>01286    <span class="comment">/* Send transition command TR4 to SM and check that this has no effect */</span>
<a name="l01287"></a>01287    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01288"></a>01288    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l01289"></a>01289    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l01290"></a>01290       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01291"></a>01291    }
<a name="l01292"></a>01292 
<a name="l01293"></a>01293    <span class="comment">/* Set guard to prevent transition TR2 from S1 to S2 and then check that transition does not take place */</span>
<a name="l01294"></a>01294    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01295"></a>01295    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01296"></a>01296    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l01297"></a>01297       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01298"></a>01298    }
<a name="l01299"></a>01299 
<a name="l01300"></a>01300    <span class="comment">/* Set guard to allow transition TR2 from S1 to S2 and then check that transition does take place */</span>
<a name="l01301"></a>01301    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l01302"></a>01302    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l01303"></a>01303    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3)) {
<a name="l01304"></a>01304       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01305"></a>01305    }
<a name="l01306"></a>01306    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l01307"></a>01307       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01308"></a>01308    }
<a name="l01309"></a>01309 
<a name="l01310"></a>01310    <span class="comment">/* Set guard to allow transition from CPS1 to S2 and then trigger transition from S2 back to S2 via CPS1 */</span>
<a name="l01311"></a>01311    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01312"></a>01312    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l01313"></a>01313    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01314"></a>01314    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a9d297a475108ba8248e6001bd18fd5ee" title="A transition identifier.">TR6</a>);
<a name="l01315"></a>01315    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=11) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4)) {
<a name="l01316"></a>01316       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01317"></a>01317    }
<a name="l01318"></a>01318 
<a name="l01319"></a>01319    <span class="comment">/* Set guard to allow transition from S2 to FPS and then trigger transition */</span>
<a name="l01320"></a>01320    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l01321"></a>01321    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01322"></a>01322    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc5, <a class="code" href="_fw_sm_make_test_8h.html#a0bcf12088b25ec6bf193f4a171155565" title="A transition identifier.">TR5</a>);
<a name="l01323"></a>01323    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=15) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=5) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc5)!=0) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=2)) {
<a name="l01324"></a>01324       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01325"></a>01325    }
<a name="l01326"></a>01326 
<a name="l01327"></a>01327    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01328"></a>01328 }
<a name="l01329"></a>01329 
<a name="l01330"></a>01330 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01331"></a><a class="code" href="_fw_sm_test_cases_8h.html#abe7c98b8d1ca4be69d85db26c93b9821">01331</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#abe7c98b8d1ca4be69d85db26c93b9821" title="Test an application which attempts to perform illegal configuration operations on a State Machine Des...">FwSmTestCaseConfigErr1</a>() {
<a name="l01332"></a>01332    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01333"></a>01333    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01334"></a>01334    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l01335"></a>01335    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01336"></a>01336    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01337"></a>01337    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01338"></a>01338 
<a name="l01339"></a>01339    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l01340"></a>01340    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01341"></a>01341    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01342"></a>01342 
<a name="l01343"></a>01343    <span class="comment">/* Attempt to add a state with a negative number of out-going transitions */</span>
<a name="l01344"></a>01344    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, -1, NULL, NULL, NULL, NULL);
<a name="l01345"></a>01345    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa43dd2f5acb415ed751c0056862205b23" title="A state is added with a negative number of outgoing transitions.">smNegOutTrans</a>) {
<a name="l01346"></a>01346       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01347"></a>01347       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01348"></a>01348    }
<a name="l01349"></a>01349 
<a name="l01350"></a>01350    <span class="comment">/* Attempt to add the same state twice and check that an error is returned */</span>
<a name="l01351"></a>01351    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01352"></a>01352    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01353"></a>01353    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faee73e3777f15541068114892fd3ae676" title="A state is added twice to the same state machine.">smStateIdInUse</a>) {
<a name="l01354"></a>01354       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01355"></a>01355       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01356"></a>01356    }
<a name="l01357"></a>01357 
<a name="l01358"></a>01358    <span class="comment">/* Attempt to add a state with an illegal identifier */</span>
<a name="l01359"></a>01359    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, 0, 1, NULL, NULL, NULL, NULL);
<a name="l01360"></a>01360    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0da813d4e604587dc6ede2bd07677fc1" title="A state is added to a state machine with an illegal (out-of-range) identifier.">smIllStateId</a>) {
<a name="l01361"></a>01361       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01362"></a>01362       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01363"></a>01363    }
<a name="l01364"></a>01364    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, 2, 1, NULL, NULL, NULL, NULL);
<a name="l01365"></a>01365    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0da813d4e604587dc6ede2bd07677fc1" title="A state is added to a state machine with an illegal (out-of-range) identifier.">smIllStateId</a>) {
<a name="l01366"></a>01366       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01367"></a>01367       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01368"></a>01368    }
<a name="l01369"></a>01369 
<a name="l01370"></a>01370    <span class="comment">/* Attempt to add the same choice pseudo-state twice and check that an error is returned */</span>
<a name="l01371"></a>01371    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01372"></a>01372    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01373"></a>01373    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3221c7e832716d09734fdb17dcd23801" title="A choice pseudo-state is added twice to the same state machine.">smChoiceIdInUse</a>) {
<a name="l01374"></a>01374       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01375"></a>01375       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01376"></a>01376    }
<a name="l01377"></a>01377 
<a name="l01378"></a>01378    <span class="comment">/* Attempt to add a choice pseudo-state with an illegal identifier */</span>
<a name="l01379"></a>01379    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, 0, 2);
<a name="l01380"></a>01380    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fae45d8f4d47ab74e68ff3ac8a316af614" title="A choice pseudo-state is added to a state machine with an illegal (out-of-range) identifier.">smIllChoiceId</a>) {
<a name="l01381"></a>01381       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01382"></a>01382       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01383"></a>01383    }
<a name="l01384"></a>01384    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, 2, 2);
<a name="l01385"></a>01385    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fae45d8f4d47ab74e68ff3ac8a316af614" title="A choice pseudo-state is added to a state machine with an illegal (out-of-range) identifier.">smIllChoiceId</a>) {
<a name="l01386"></a>01386       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01387"></a>01387       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01388"></a>01388    }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390    <span class="comment">/* Attempt to add too many transitions and check that an error is returned */</span>
<a name="l01391"></a>01391    <a class="code" href="_fw_sm_config_8c.html#a9db430ff105d2c0de6563e6025c9fa2e" title="Create a transition from a proper state to a proper state and add it to a state machine.">FwSmAddTransStaToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01392"></a>01392    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fae45d8f4d47ab74e68ff3ac8a316af614" title="A choice pseudo-state is added to a state machine with an illegal (out-of-range) identifier.">smIllChoiceId</a>) {
<a name="l01393"></a>01393       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01394"></a>01394       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01395"></a>01395    }
<a name="l01396"></a>01396    <a class="code" href="_fw_sm_config_8c.html#a9db430ff105d2c0de6563e6025c9fa2e" title="Create a transition from a proper state to a proper state and add it to a state machine.">FwSmAddTransStaToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01397"></a>01397    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l01398"></a>01398       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01399"></a>01399       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01400"></a>01400    }
<a name="l01401"></a>01401 
<a name="l01402"></a>01402    <span class="comment">/* Attempt to add the initial transition twice and check that an error is returned */</span>
<a name="l01403"></a>01403    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01404"></a>01404    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l01405"></a>01405       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01406"></a>01406       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01407"></a>01407    }
<a name="l01408"></a>01408    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01409"></a>01409    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l01410"></a>01410       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01411"></a>01411       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01412"></a>01412    }
<a name="l01413"></a>01413 
<a name="l01414"></a>01414    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01415"></a>01415    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01416"></a>01416 }
<a name="l01417"></a>01417 
<a name="l01418"></a>01418 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01419"></a><a class="code" href="_fw_sm_test_cases_8h.html#a9360dce8d424511a31a507054444488d">01419</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a9360dce8d424511a31a507054444488d" title="Verify the ability of FwSmCheck to detect and report the configuration error due to a state in a stat...">FwSmTestCaseCheck1</a>() {
<a name="l01420"></a>01420    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01421"></a>01421    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01422"></a>01422    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l01423"></a>01423    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01424"></a>01424    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01425"></a>01425    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01426"></a>01426 
<a name="l01427"></a>01427    <span class="comment">/* Create a state machine with one state, one CPS, and three transitions */</span>
<a name="l01428"></a>01428    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01429"></a>01429    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01430"></a>01430 
<a name="l01431"></a>01431    <span class="comment">/* Configure state machine without defining the state */</span>
<a name="l01432"></a>01432    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01433"></a>01433    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01434"></a>01434    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01435"></a>01435    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01436"></a>01436 
<a name="l01437"></a>01437    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01438"></a>01438    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa019c3b43fad79b4ea3cd44196ca914d2" title="There is an undefined state in a state machine.">smNullPState</a>) {
<a name="l01439"></a>01439       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01440"></a>01440       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01441"></a>01441    }
<a name="l01442"></a>01442    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01443"></a>01443       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01444"></a>01444       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01445"></a>01445    }
<a name="l01446"></a>01446 
<a name="l01447"></a>01447    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01448"></a>01448    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01449"></a>01449 }
<a name="l01450"></a>01450 
<a name="l01451"></a>01451 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01452"></a><a class="code" href="_fw_sm_test_cases_8h.html#aed5cd0ba1be48ed93966090a2760fe43">01452</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aed5cd0ba1be48ed93966090a2760fe43" title="Verify the ability of FwSmCheck to detect and report the configuration error due to a choice pseudo-s...">FwSmTestCaseCheck2</a>() {
<a name="l01453"></a>01453    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01454"></a>01454    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01455"></a>01455    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 2;    <span class="comment">/* number of transitions */</span>
<a name="l01456"></a>01456    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01457"></a>01457    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01458"></a>01458    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01459"></a>01459 
<a name="l01460"></a>01460    <span class="comment">/* Create a state machine with one state, one CPS, and two transitions */</span>
<a name="l01461"></a>01461    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01462"></a>01462    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01463"></a>01463 
<a name="l01464"></a>01464    <span class="comment">/* Configure state machine without defining the CPS */</span>
<a name="l01465"></a>01465    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01466"></a>01466    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01467"></a>01467    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01468"></a>01468 
<a name="l01469"></a>01469    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01470"></a>01470    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fae1b99f937ab8693e3bd8c9acbf621ba7" title="There is an undefined choice pseudo-state in a state machine.">smNullCState</a>) {
<a name="l01471"></a>01471       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01472"></a>01472       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01473"></a>01473    }
<a name="l01474"></a>01474    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01475"></a>01475       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01476"></a>01476       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01477"></a>01477    }
<a name="l01478"></a>01478 
<a name="l01479"></a>01479    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01480"></a>01480    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01481"></a>01481 }
<a name="l01482"></a>01482 
<a name="l01483"></a>01483 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01484"></a><a class="code" href="_fw_sm_test_cases_8h.html#ae61311dcef68174de093e23d10410da6">01484</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ae61311dcef68174de093e23d10410da6" title="Verify the ability of FwSmCheck to detect and report the configuration error due to a transition in a...">FwSmTestCaseCheck3</a>() {
<a name="l01485"></a>01485    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01486"></a>01486    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01487"></a>01487    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l01488"></a>01488    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01489"></a>01489    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01490"></a>01490    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01491"></a>01491 
<a name="l01492"></a>01492    <span class="comment">/* Create a state machine with one state, one CPS, and three transitions */</span>
<a name="l01493"></a>01493    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01494"></a>01494    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01495"></a>01495 
<a name="l01496"></a>01496    <span class="comment">/* Configure state machine without defining one of the transitions */</span>
<a name="l01497"></a>01497    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l01498"></a>01498    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01499"></a>01499    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01500"></a>01500    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01501"></a>01501 
<a name="l01502"></a>01502    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01503"></a>01503    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa14aa8489c8e10e300eaea2bd2e5623dc" title="There is an undefined transition in a state machine.">smNullTrans</a>) {
<a name="l01504"></a>01504       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01505"></a>01505       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01506"></a>01506    }
<a name="l01507"></a>01507    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01508"></a>01508       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01509"></a>01509       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01510"></a>01510    }
<a name="l01511"></a>01511 
<a name="l01512"></a>01512    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01513"></a>01513    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01514"></a>01514 }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01517"></a><a class="code" href="_fw_sm_test_cases_8h.html#a9dadda9d9c620568e3072f0957e998d5">01517</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a9dadda9d9c620568e3072f0957e998d5" title="Verify the ability of FwSmCheck to detect and report the configuration error due to initial pseudo-st...">FwSmTestCaseCheck4</a>() {
<a name="l01518"></a>01518    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01519"></a>01519    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01520"></a>01520    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l01521"></a>01521    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01522"></a>01522    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01523"></a>01523    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01524"></a>01524 
<a name="l01525"></a>01525    <span class="comment">/* Create a state machine with one state, one CPS, and three transitions */</span>
<a name="l01526"></a>01526    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01527"></a>01527    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01528"></a>01528 
<a name="l01529"></a>01529    <span class="comment">/* Configure state machine without defining the initial transition */</span>
<a name="l01530"></a>01530    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l01531"></a>01531    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01532"></a>01532    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01533"></a>01533    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01534"></a>01534 
<a name="l01535"></a>01535    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01536"></a>01536    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa14aa8489c8e10e300eaea2bd2e5623dc" title="There is an undefined transition in a state machine.">smNullTrans</a>) {
<a name="l01537"></a>01537       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01538"></a>01538       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01539"></a>01539    }
<a name="l01540"></a>01540    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01541"></a>01541       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01542"></a>01542       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01543"></a>01543    }
<a name="l01544"></a>01544 
<a name="l01545"></a>01545    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01546"></a>01546    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01547"></a>01547 }
<a name="l01548"></a>01548 
<a name="l01549"></a>01549 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01550"></a><a class="code" href="_fw_sm_test_cases_8h.html#a5ca251dc611d00f4830b206b7ffe26d3">01550</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a5ca251dc611d00f4830b206b7ffe26d3" title="Verify the ability of FwSmCheck to detect and report the configuration error due an out-going transit...">FwSmTestCaseCheck5</a>() {
<a name="l01551"></a>01551    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01552"></a>01552    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01553"></a>01553    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l01554"></a>01554    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01555"></a>01555    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01556"></a>01556    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01557"></a>01557 
<a name="l01558"></a>01558    <span class="comment">/* Create a state machine with one state, no CPS, and three transitions */</span>
<a name="l01559"></a>01559    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01560"></a>01560    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01561"></a>01561 
<a name="l01562"></a>01562    <span class="comment">/* Configure state machine with an extra transition out of S1 */</span>
<a name="l01563"></a>01563    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 2, NULL, NULL, NULL, NULL);
<a name="l01564"></a>01564    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01565"></a>01565    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01566"></a>01566 
<a name="l01567"></a>01567    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01568"></a>01568    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa14aa8489c8e10e300eaea2bd2e5623dc" title="There is an undefined transition in a state machine.">smNullTrans</a>) {
<a name="l01569"></a>01569       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01570"></a>01570       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01571"></a>01571    }
<a name="l01572"></a>01572    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01573"></a>01573       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01574"></a>01574       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01575"></a>01575    }
<a name="l01576"></a>01576 
<a name="l01577"></a>01577    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01578"></a>01578    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01579"></a>01579 }
<a name="l01580"></a>01580 
<a name="l01581"></a>01581 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01582"></a><a class="code" href="_fw_sm_test_cases_8h.html#ad4b00fa01e6666e8e32895b496f45c2e">01582</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ad4b00fa01e6666e8e32895b496f45c2e" title="Verify the ability of FwSmCheck to detect and report the configuration error due an out-going transit...">FwSmTestCaseCheck6</a>() {
<a name="l01583"></a>01583    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01584"></a>01584    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01585"></a>01585    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 5;    <span class="comment">/* number of transitions */</span>
<a name="l01586"></a>01586    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01587"></a>01587    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01588"></a>01588    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01589"></a>01589 
<a name="l01590"></a>01590    <span class="comment">/* Create a state machine with one state, one CPS, and five transitions */</span>
<a name="l01591"></a>01591    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01592"></a>01592    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01593"></a>01593 
<a name="l01594"></a>01594    <span class="comment">/* Configure state machine with an extra transition out of CPS */</span>
<a name="l01595"></a>01595    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01596"></a>01596    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 3);
<a name="l01597"></a>01597    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01598"></a>01598    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01599"></a>01599    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01600"></a>01600    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01601"></a>01601 
<a name="l01602"></a>01602    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01603"></a>01603    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa14aa8489c8e10e300eaea2bd2e5623dc" title="There is an undefined transition in a state machine.">smNullTrans</a>) {
<a name="l01604"></a>01604       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01605"></a>01605       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01606"></a>01606    }
<a name="l01607"></a>01607    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01608"></a>01608       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01609"></a>01609       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01610"></a>01610    }
<a name="l01611"></a>01611 
<a name="l01612"></a>01612    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01613"></a>01613    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01614"></a>01614 }
<a name="l01615"></a>01615 
<a name="l01616"></a>01616 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01617"></a><a class="code" href="_fw_sm_test_cases_8h.html#a45d986dee9d87e2f1e1cc73a56ad5506">01617</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a45d986dee9d87e2f1e1cc73a56ad5506" title="Verify the ability of the configuration functions of a state machine to detect and report the followi...">FwSmTestCaseCheck7</a>() {
<a name="l01618"></a>01618    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01619"></a>01619    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01620"></a>01620    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l01621"></a>01621    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01622"></a>01622    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01623"></a>01623    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01624"></a>01624 
<a name="l01625"></a>01625    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l01626"></a>01626    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01627"></a>01627    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01628"></a>01628 
<a name="l01629"></a>01629    <span class="comment">/* Configure state machine - state S1 has no out-going transitions */</span>
<a name="l01630"></a>01630    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l01631"></a>01631    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01632"></a>01632    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01633"></a>01633    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01634"></a>01634    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01635"></a>01635 
<a name="l01636"></a>01636    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01637"></a>01637    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01638"></a>01638    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faa6e52b01832f0ca9c01a3297a389332f" title="A transition is added to a state machine with a source which has an illegal identifier.">smIllTransSrc</a>) {
<a name="l01639"></a>01639       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01640"></a>01640       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01641"></a>01641    }
<a name="l01642"></a>01642 
<a name="l01643"></a>01643    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01644"></a>01644    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01645"></a>01645 }
<a name="l01646"></a>01646 
<a name="l01647"></a>01647 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01648"></a><a class="code" href="_fw_sm_test_cases_8h.html#abda44b76fd8caec4a1f95cf3fd9d34ab">01648</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#abda44b76fd8caec4a1f95cf3fd9d34ab" title="Verify the ability of the configuration functions of a state machine to detect and report the followi...">FwSmTestCaseCheck8</a>() {
<a name="l01649"></a>01649    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01650"></a>01650    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01651"></a>01651    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 5;    <span class="comment">/* number of transitions */</span>
<a name="l01652"></a>01652    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01653"></a>01653    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01654"></a>01654    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01655"></a>01655 
<a name="l01656"></a>01656    <span class="comment">/* Create a state machine with one state, one CPS, and five transitions */</span>
<a name="l01657"></a>01657    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01658"></a>01658    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01659"></a>01659 
<a name="l01660"></a>01660    <span class="comment">/* Configure state machine - CPS1 has only two out-going transitions */</span>
<a name="l01661"></a>01661    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01662"></a>01662    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01663"></a>01663    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01664"></a>01664    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01665"></a>01665    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01666"></a>01666    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);  <span class="comment">/* Two identical transitions from CPS1 to FPS */</span>
<a name="l01667"></a>01667    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01668"></a>01668 
<a name="l01669"></a>01669    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01670"></a>01670    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa422fde8f0ddfead19f99d76cfe004037" title="A configuration error has been detected during the state machine configuration process.">smConfigErr</a>) {
<a name="l01671"></a>01671       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01672"></a>01672       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01673"></a>01673    }
<a name="l01674"></a>01674    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l01675"></a>01675       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01676"></a>01676       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01677"></a>01677    }
<a name="l01678"></a>01678 
<a name="l01679"></a>01679    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01680"></a>01680    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01681"></a>01681 }
<a name="l01682"></a>01682 
<a name="l01683"></a>01683 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01684"></a><a class="code" href="_fw_sm_test_cases_8h.html#a634b539cd61c97be0326d299d7c8c29b">01684</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a634b539cd61c97be0326d299d7c8c29b" title="Verify the ability of the configuration check to detect and report a configuration error in an embedd...">FwSmTestCaseCheck9</a>() {
<a name="l01685"></a>01685    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01686"></a>01686    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01687"></a>01687    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 2;    <span class="comment">/* number of transitions */</span>
<a name="l01688"></a>01688    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01689"></a>01689    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01690"></a>01690    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01691"></a>01691    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> esmDesc;
<a name="l01692"></a>01692 
<a name="l01693"></a>01693    <span class="comment">/* Create a state machine with a missing transition */</span>
<a name="l01694"></a>01694    esmDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01695"></a>01695    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(esmDesc, NULL);
<a name="l01696"></a>01696 
<a name="l01697"></a>01697    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(esmDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l01698"></a>01698    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(esmDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01699"></a>01699 
<a name="l01700"></a>01700    <span class="comment">/* Create a state machine embedding the previous state machine */</span>
<a name="l01701"></a>01701    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, 0, 2, 0, 0);
<a name="l01702"></a>01702    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01703"></a>01703 
<a name="l01704"></a>01704    <span class="comment">/* Configure state machine */</span>
<a name="l01705"></a>01705    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, esmDesc);
<a name="l01706"></a>01706    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l01707"></a>01707    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01708"></a>01708 
<a name="l01709"></a>01709    <span class="comment">/* Check outer state machine and verify that no error is reported */</span>
<a name="l01710"></a>01710    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01711"></a>01711       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01712"></a>01712       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01713"></a>01713    }
<a name="l01714"></a>01714    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01715"></a>01715       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01716"></a>01716       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01717"></a>01717    }
<a name="l01718"></a>01718 
<a name="l01719"></a>01719    <span class="comment">/* Check outer state machine recursively and verify that error is reported */</span>
<a name="l01720"></a>01720    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa14aa8489c8e10e300eaea2bd2e5623dc" title="There is an undefined transition in a state machine.">smNullTrans</a>) {
<a name="l01721"></a>01721       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01722"></a>01722       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01723"></a>01723    }
<a name="l01724"></a>01724    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01725"></a>01725       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01726"></a>01726       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01727"></a>01727    }
<a name="l01728"></a>01728 
<a name="l01729"></a>01729    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01730"></a>01730    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01731"></a>01731 }
<a name="l01732"></a>01732 
<a name="l01733"></a>01733 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01734"></a><a class="code" href="_fw_sm_test_cases_8h.html#adfe322c37ef68b37baa619bf4a98c93e">01734</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#adfe322c37ef68b37baa619bf4a98c93e" title="Verify the ability of the configuration functions of a state machine to detect and report the followi...">FwSmTestCaseCheck10</a>() {
<a name="l01735"></a>01735    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01736"></a>01736    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01737"></a>01737    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l01738"></a>01738    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01739"></a>01739    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l01740"></a>01740    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01741"></a>01741 
<a name="l01742"></a>01742    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l01743"></a>01743    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l01744"></a>01744    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l01745"></a>01745 
<a name="l01746"></a>01746    <span class="comment">/* Configure state machine - one transition has an illegal destination */</span>
<a name="l01747"></a>01747    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l01748"></a>01748    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l01749"></a>01749    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l01750"></a>01750    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 3, NULL, NULL);  <span class="comment">/* illegal destination */</span>
<a name="l01751"></a>01751    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l01752"></a>01752    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l01753"></a>01753 
<a name="l01754"></a>01754    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l01755"></a>01755    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa6bf2006d1717979d5ed0f55c865acc9e" title="A transition is added to a state machine with an illegal (out-of-range) state destination.">smIllegalPDest</a>) {
<a name="l01756"></a>01756       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01757"></a>01757       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01758"></a>01758    }
<a name="l01759"></a>01759    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01760"></a>01760       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01761"></a>01761       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01762"></a>01762    }
<a name="l01763"></a>01763 
<a name="l01764"></a>01764    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l01765"></a>01765    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01766"></a>01766 }
<a name="l01767"></a>01767 
<a name="l01768"></a>01768 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01769"></a><a class="code" href="_fw_sm_test_cases_8h.html#adbd5e87f10db6d2032ee7bdb25047357">01769</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#adbd5e87f10db6d2032ee7bdb25047357" title="Test a transition from a state to the final pseudo-state passing through a choice pseudo-state...">FwSmTestCaseTrans5</a>() {
<a name="l01770"></a>01770    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01771"></a>01771    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01772"></a>01772    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01773"></a>01773 
<a name="l01774"></a>01774    <span class="comment">/* reset log */</span>
<a name="l01775"></a>01775    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01776"></a>01776 
<a name="l01777"></a>01777    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01778"></a>01778    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01779"></a>01779    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01780"></a>01780    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01781"></a>01781    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;  <span class="comment">/* this allows transition from CPS to FPS */</span>
<a name="l01782"></a>01782    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01783"></a>01783 
<a name="l01784"></a>01784    <span class="comment">/* Create test SM */</span>
<a name="l01785"></a>01785    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a11a91969fcb6678e120741cd1ed54b5f" title="Operation to create and configure the state machine SM7.">FwSmMakeTestSM7</a>(smData);
<a name="l01786"></a>01786    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l01787"></a>01787       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01788"></a>01788 
<a name="l01789"></a>01789    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01790"></a>01790    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01791"></a>01791       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01792"></a>01792       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01793"></a>01793    }
<a name="l01794"></a>01794 
<a name="l01795"></a>01795    <span class="comment">/* Start SM (this brings it to S1 */</span>
<a name="l01796"></a>01796    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01797"></a>01797    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l01798"></a>01798    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01799"></a>01799       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01800"></a>01800       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01801"></a>01801    }
<a name="l01802"></a>01802    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=1) {
<a name="l01803"></a>01803       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01804"></a>01804       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01805"></a>01805    }
<a name="l01806"></a>01806 
<a name="l01807"></a>01807    <span class="comment">/* Send TR1 command to SM (this brings it to the FPS via CPS1) */</span>
<a name="l01808"></a>01808    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l01809"></a>01809    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=4) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDesc)!=0)) {
<a name="l01810"></a>01810       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01811"></a>01811       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01812"></a>01812    }
<a name="l01813"></a>01813    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4) {
<a name="l01814"></a>01814       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01815"></a>01815       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01816"></a>01816    }
<a name="l01817"></a>01817 
<a name="l01818"></a>01818    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01819"></a>01819    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01820"></a>01820 }
<a name="l01821"></a>01821 
<a name="l01822"></a>01822 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01823"></a><a class="code" href="_fw_sm_test_cases_8h.html#aad2e8e504662f048fb2448bfbfc4cc16">01823</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aad2e8e504662f048fb2448bfbfc4cc16" title="Verify the behaviour of a degenerate state machine which has no states.">FwSmTestCaseDummySM1</a>() {
<a name="l01824"></a>01824    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01825"></a>01825    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01826"></a>01826    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01827"></a>01827 
<a name="l01828"></a>01828    <span class="comment">/* reset log */</span>
<a name="l01829"></a>01829    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01830"></a>01830 
<a name="l01831"></a>01831    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01832"></a>01832    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01833"></a>01833    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01834"></a>01834    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01835"></a>01835    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l01836"></a>01836    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01837"></a>01837 
<a name="l01838"></a>01838    <span class="comment">/* Create test SM */</span>
<a name="l01839"></a>01839    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ab957c37fd85d7a77b84b625f74a66bec" title="Operation to create and configure a degenerate state machine with no states.">FwSmMakeTestSM8</a>(smData);
<a name="l01840"></a>01840    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l01841"></a>01841       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01842"></a>01842 
<a name="l01843"></a>01843    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01844"></a>01844    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01845"></a>01845       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01846"></a>01846       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01847"></a>01847    }
<a name="l01848"></a>01848 
<a name="l01849"></a>01849    <span class="comment">/* Start SM (this brings it to the FPS */</span>
<a name="l01850"></a>01850    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01851"></a>01851    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l01852"></a>01852    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDesc)!=0)) {
<a name="l01853"></a>01853       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01854"></a>01854       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01855"></a>01855    }
<a name="l01856"></a>01856    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=2) {
<a name="l01857"></a>01857       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01858"></a>01858       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01859"></a>01859    }
<a name="l01860"></a>01860    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01861"></a>01861    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01862"></a>01862 }
<a name="l01863"></a>01863 
<a name="l01864"></a>01864 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01865"></a><a class="code" href="_fw_sm_test_cases_8h.html#a84928a982a3909a0e263fca4deb139da">01865</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a84928a982a3909a0e263fca4deb139da" title="Verify the behaviour of a degenerate state machine which has no transitions other than the transition...">FwSmTestCaseDummySM9</a>() {
<a name="l01866"></a>01866    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01867"></a>01867    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01868"></a>01868    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01869"></a>01869 
<a name="l01870"></a>01870    <span class="comment">/* reset log */</span>
<a name="l01871"></a>01871    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01872"></a>01872 
<a name="l01873"></a>01873    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01874"></a>01874    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01875"></a>01875    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01876"></a>01876    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01877"></a>01877    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l01878"></a>01878    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01879"></a>01879 
<a name="l01880"></a>01880    <span class="comment">/* Create test SM */</span>
<a name="l01881"></a>01881    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a956692f82e07c526c9b287ae3274a5d4" title="Operation to create and configure a degenerate state machine with no transitions other than the initi...">FwSmMakeTestSM9</a>(smData);
<a name="l01882"></a>01882    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l01883"></a>01883       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01884"></a>01884 
<a name="l01885"></a>01885    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01886"></a>01886    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01887"></a>01887       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01888"></a>01888       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01889"></a>01889    }
<a name="l01890"></a>01890 
<a name="l01891"></a>01891    <span class="comment">/* Start SM (this brings it to S1 */</span>
<a name="l01892"></a>01892    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01893"></a>01893    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l01894"></a>01894    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01895"></a>01895       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01896"></a>01896       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01897"></a>01897    }
<a name="l01898"></a>01898    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=2) {
<a name="l01899"></a>01899       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01900"></a>01900       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01901"></a>01901    }
<a name="l01902"></a>01902 
<a name="l01903"></a>01903    <span class="comment">/* Execute SM */</span>
<a name="l01904"></a>01904    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l01905"></a>01905    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01906"></a>01906       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01907"></a>01907       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01908"></a>01908    }
<a name="l01909"></a>01909    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3) {
<a name="l01910"></a>01910       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01911"></a>01911       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01912"></a>01912    }
<a name="l01913"></a>01913 
<a name="l01914"></a>01914    <span class="comment">/* Stop SM */</span>
<a name="l01915"></a>01915    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l01916"></a>01916    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=7) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l01917"></a>01917       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01918"></a>01918       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01919"></a>01919    }
<a name="l01920"></a>01920    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4) {
<a name="l01921"></a>01921       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01922"></a>01922       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01923"></a>01923    }
<a name="l01924"></a>01924 
<a name="l01925"></a>01925    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01926"></a>01926    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01927"></a>01927 }
<a name="l01928"></a>01928 
<a name="l01929"></a>01929 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01930"></a><a class="code" href="_fw_sm_test_cases_8h.html#a66ced02fb261288dbd6da070d77fccbe">01930</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a66ced02fb261288dbd6da070d77fccbe" title="Verify the behaviour of a degenerate state machine which has no transitions other than the transition...">FwSmTestCaseDummySM9Static</a>() {
<a name="l01931"></a>01931    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l01932"></a>01932    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l01933"></a>01933    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l01934"></a>01934 
<a name="l01935"></a>01935    <span class="comment">/* reset log */</span>
<a name="l01936"></a>01936    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l01937"></a>01937 
<a name="l01938"></a>01938    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l01939"></a>01939    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l01940"></a>01940    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l01941"></a>01941    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l01942"></a>01942    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l01943"></a>01943    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l01944"></a>01944 
<a name="l01945"></a>01945    <span class="comment">/* Create test SM */</span>
<a name="l01946"></a>01946    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ac144bc80bac19903bb0ad24c036a34d4" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM9 and figure below) static...">FwSmMakeTestSM9Static</a>(smData);
<a name="l01947"></a>01947    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l01948"></a>01948       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01949"></a>01949 
<a name="l01950"></a>01950    <span class="comment">/* Check configuration of state machine */</span>
<a name="l01951"></a>01951    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l01952"></a>01952       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01953"></a>01953       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01954"></a>01954    }
<a name="l01955"></a>01955 
<a name="l01956"></a>01956    <span class="comment">/* Start SM (this brings it to S1 */</span>
<a name="l01957"></a>01957    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l01958"></a>01958    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l01959"></a>01959    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01960"></a>01960       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01961"></a>01961       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01962"></a>01962    }
<a name="l01963"></a>01963    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=2) {
<a name="l01964"></a>01964       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01965"></a>01965       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01966"></a>01966    }
<a name="l01967"></a>01967 
<a name="l01968"></a>01968    <span class="comment">/* Execute SM */</span>
<a name="l01969"></a>01969    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l01970"></a>01970    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l01971"></a>01971       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01972"></a>01972       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01973"></a>01973    }
<a name="l01974"></a>01974    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3) {
<a name="l01975"></a>01975       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01976"></a>01976       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01977"></a>01977    }
<a name="l01978"></a>01978 
<a name="l01979"></a>01979    <span class="comment">/* Stop SM */</span>
<a name="l01980"></a>01980    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l01981"></a>01981    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=7) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l01982"></a>01982       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01983"></a>01983       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01984"></a>01984    }
<a name="l01985"></a>01985    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=4) {
<a name="l01986"></a>01986       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l01987"></a>01987       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l01988"></a>01988    }
<a name="l01989"></a>01989 
<a name="l01990"></a>01990    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l01991"></a>01991 }
<a name="l01992"></a>01992 
<a name="l01993"></a>01993 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l01994"></a><a class="code" href="_fw_sm_test_cases_8h.html#a436745bcced6eb2ad0a83c0fa85f9530">01994</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a436745bcced6eb2ad0a83c0fa85f9530" title="Verify the ability of the state machine configuration functions to detect and report illegal configur...">FwSmTestCaseCheck11</a>() {
<a name="l01995"></a>01995    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l01996"></a>01996    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l01997"></a>01997    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l01998"></a>01998    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l01999"></a>01999    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02000"></a>02000    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02001"></a>02001 
<a name="l02002"></a>02002    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l02003"></a>02003    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02004"></a>02004    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02005"></a>02005 
<a name="l02006"></a>02006    <span class="comment">/* Attempt to add a CPS with zero out-going transitions */</span>
<a name="l02007"></a>02007    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 0);
<a name="l02008"></a>02008    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa40afcc56eb2aec0b26164f4ced6ae2da" title="A choice pseudo-state is added to a state machine with less than 1 out-going transitions.">smIllNOfOutTrans</a>) {
<a name="l02009"></a>02009       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02010"></a>02010       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02011"></a>02011    }
<a name="l02012"></a>02012 
<a name="l02013"></a>02013    <span class="comment">/* Attempt to add a transition without first adding its source state */</span>
<a name="l02014"></a>02014    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02015"></a>02015    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0a016709135a0622fede69b64806ff37" title="A transition is added to a state machine with a source (either a state or a choice pseudo-state) whic...">smUndefinedTransSrc</a>) {
<a name="l02016"></a>02016       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02017"></a>02017       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02018"></a>02018    }
<a name="l02019"></a>02019 
<a name="l02020"></a>02020    <span class="comment">/* Attempt to add a transition without first adding its source state */</span>
<a name="l02021"></a>02021    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l02022"></a>02022    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0a016709135a0622fede69b64806ff37" title="A transition is added to a state machine with a source (either a state or a choice pseudo-state) whic...">smUndefinedTransSrc</a>) {
<a name="l02023"></a>02023       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02024"></a>02024       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02025"></a>02025    }
<a name="l02026"></a>02026 
<a name="l02027"></a>02027    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02028"></a>02028    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02029"></a>02029 }
<a name="l02030"></a>02030 
<a name="l02031"></a>02031 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02032"></a><a class="code" href="_fw_sm_test_cases_8h.html#a163cf5d54cdea30d7540360854adb1e4">02032</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a163cf5d54cdea30d7540360854adb1e4" title="Verify the ability of FwSmCheck to detect and report the configuration error due a transition having ...">FwSmTestCaseCheck12</a>() {
<a name="l02033"></a>02033    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02034"></a>02034    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02035"></a>02035    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l02036"></a>02036    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02037"></a>02037    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02038"></a>02038    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02039"></a>02039 
<a name="l02040"></a>02040    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l02041"></a>02041    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02042"></a>02042    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02043"></a>02043 
<a name="l02044"></a>02044    <span class="comment">/* Configure state machine - one transition has an illegal destination */</span>
<a name="l02045"></a>02045    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l02046"></a>02046    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l02047"></a>02047    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02048"></a>02048    <a class="code" href="_fw_sm_config_8c.html#ac813b1b7b822d8715723c2e29364edb1" title="Create a transition from a proper state to a choice pseudo-state and add it to a state machine...">FwSmAddTransStaToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 3, NULL, NULL);  <span class="comment">/* illegal destination */</span>
<a name="l02049"></a>02049    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l02050"></a>02050    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02051"></a>02051 
<a name="l02052"></a>02052    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l02053"></a>02053    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fade0e809ac8697776c9a8c50547df2000" title="A transition is added to a state machine with an illegal (out-of-range) choice pseudo-state destinati...">smIllegalCDest</a>) {
<a name="l02054"></a>02054       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02055"></a>02055       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02056"></a>02056    }
<a name="l02057"></a>02057    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02058"></a>02058       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02059"></a>02059       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02060"></a>02060    }
<a name="l02061"></a>02061 
<a name="l02062"></a>02062    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02063"></a>02063    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02064"></a>02064 }
<a name="l02065"></a>02065 
<a name="l02066"></a>02066 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02067"></a><a class="code" href="_fw_sm_test_cases_8h.html#a4a46d436d5a475ffad0ef3ab37e3209c">02067</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a4a46d436d5a475ffad0ef3ab37e3209c" title="Test a transition from one state to another state with an embedded state machine.">FwSmTestCaseTrans6</a>() {
<a name="l02068"></a>02068    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02069"></a>02069    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02070"></a>02070    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l02071"></a>02071    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l02072"></a>02072    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02073"></a>02073 
<a name="l02074"></a>02074    <span class="comment">/* reset log */</span>
<a name="l02075"></a>02075    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02076"></a>02076 
<a name="l02077"></a>02077    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l02078"></a>02078    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02079"></a>02079    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02080"></a>02080    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02081"></a>02081    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02082"></a>02082    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02083"></a>02083 
<a name="l02084"></a>02084    <span class="comment">/* Initialize data structure to hold the data of the embedded state machine */</span>
<a name="l02085"></a>02085    esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02086"></a>02086    esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02087"></a>02087    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02088"></a>02088    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02089"></a>02089    esmData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 10;
<a name="l02090"></a>02090 
<a name="l02091"></a>02091    <span class="comment">/* Create test SM */</span>
<a name="l02092"></a>02092    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ae65fbf8435ebbbb974761293f8c7b732" title="Operation to create and configure the state machine SM10.">FwSmMakeTestSM10</a>(smData, esmData);
<a name="l02093"></a>02093    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02094"></a>02094       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02095"></a>02095 
<a name="l02096"></a>02096    <span class="comment">/* Check configuration of state machine */</span>
<a name="l02097"></a>02097    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02098"></a>02098       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02099"></a>02099       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02100"></a>02100    }
<a name="l02101"></a>02101 
<a name="l02102"></a>02102    <span class="comment">/* Start and execute SM (this brings the embedding SM in S1 - the execute command has no effect) */</span>
<a name="l02103"></a>02103    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l02104"></a>02104    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02105"></a>02105    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l02106"></a>02106    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02107"></a>02107       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02108"></a>02108       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02109"></a>02109    }
<a name="l02110"></a>02110    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>))!=0)) {
<a name="l02111"></a>02111       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02112"></a>02112       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02113"></a>02113    }
<a name="l02114"></a>02114 
<a name="l02115"></a>02115    <span class="comment">/* Send TR1 command to SM (this brings the embedded SM to S2 and starts the embedded SM) */</span>
<a name="l02116"></a>02116    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l02117"></a>02117    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l02118"></a>02118       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02119"></a>02119       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02120"></a>02120    }
<a name="l02121"></a>02121    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02122"></a>02122       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02123"></a>02123       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02124"></a>02124    }
<a name="l02125"></a>02125 
<a name="l02126"></a>02126    <span class="comment">/* Stop the embedded SM (this also stops the embedded SM) */</span>
<a name="l02127"></a>02127    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l02128"></a>02128    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=10) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l02129"></a>02129       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02130"></a>02130       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02131"></a>02131    }
<a name="l02132"></a>02132    <span class="keywordflow">if</span> ((esmData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>))!=0)) {
<a name="l02133"></a>02133       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02134"></a>02134       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02135"></a>02135    }
<a name="l02136"></a>02136 
<a name="l02137"></a>02137    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02138"></a>02138    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02139"></a>02139 }
<a name="l02140"></a>02140 
<a name="l02141"></a>02141 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02142"></a><a class="code" href="_fw_sm_test_cases_8h.html#a94dc009f7d74174185e04da9ded0cbc1">02142</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a94dc009f7d74174185e04da9ded0cbc1" title="Verify the ability of the configuration functions of a state machine to detect and report the followi...">FwSmTestCaseCheck14</a>() {
<a name="l02143"></a>02143    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02144"></a>02144    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02145"></a>02145    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 4;    <span class="comment">/* number of transitions */</span>
<a name="l02146"></a>02146    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02147"></a>02147    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02148"></a>02148    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02149"></a>02149 
<a name="l02150"></a>02150    <span class="comment">/* Create a state machine with one state, one CPS, and four transitions */</span>
<a name="l02151"></a>02151    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02152"></a>02152    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02153"></a>02153 
<a name="l02154"></a>02154    <span class="comment">/* Configure state machine  */</span>
<a name="l02155"></a>02155    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l02156"></a>02156    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l02157"></a>02157    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02158"></a>02158    <a class="code" href="_fw_sm_config_8c.html#ac813b1b7b822d8715723c2e29364edb1" title="Create a transition from a proper state to a choice pseudo-state and add it to a state machine...">FwSmAddTransStaToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, 2, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l02159"></a>02159    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faa6e52b01832f0ca9c01a3297a389332f" title="A transition is added to a state machine with a source which has an illegal identifier.">smIllTransSrc</a>) {  <span class="comment">/* illegal source */</span>
<a name="l02160"></a>02160       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02161"></a>02161       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02162"></a>02162    }
<a name="l02163"></a>02163    <a class="code" href="_fw_sm_config_8c.html#a9db430ff105d2c0de6563e6025c9fa2e" title="Create a transition from a proper state to a proper state and add it to a state machine.">FwSmAddTransStaToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, 2, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02164"></a>02164    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faa6e52b01832f0ca9c01a3297a389332f" title="A transition is added to a state machine with a source which has an illegal identifier.">smIllTransSrc</a>) {  <span class="comment">/* illegal source */</span>
<a name="l02165"></a>02165       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02166"></a>02166       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02167"></a>02167    }
<a name="l02168"></a>02168    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, 2, NULL, NULL);
<a name="l02169"></a>02169    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faa6e52b01832f0ca9c01a3297a389332f" title="A transition is added to a state machine with a source which has an illegal identifier.">smIllTransSrc</a>) {  <span class="comment">/* illegal source */</span>
<a name="l02170"></a>02170       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02171"></a>02171       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02172"></a>02172    }
<a name="l02173"></a>02173 
<a name="l02174"></a>02174    <span class="comment">/* Check state machine and verify that an error is reported */</span>
<a name="l02175"></a>02175    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) == <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02176"></a>02176       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02177"></a>02177       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02178"></a>02178    }
<a name="l02179"></a>02179 
<a name="l02180"></a>02180    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02181"></a>02181    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02182"></a>02182 }
<a name="l02183"></a>02183 
<a name="l02184"></a>02184 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02185"></a><a class="code" href="_fw_sm_test_cases_8h.html#aeebda386ce786c65942c1003c4b72ab0">02185</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aeebda386ce786c65942c1003c4b72ab0" title="Verify the ability of the state machine creation function FwSmCreate to detect illegal values of its ...">FwSmTestCaseCheck15</a>() {
<a name="l02186"></a>02186    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02187"></a>02187 
<a name="l02188"></a>02188    <span class="comment">/* Create a state machine with an illegal number of states */</span>
<a name="l02189"></a>02189    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(-1, 1, 1, 0, 0);
<a name="l02190"></a>02190    <span class="keywordflow">if</span> (smDesc != NULL)
<a name="l02191"></a>02191       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02192"></a>02192 
<a name="l02193"></a>02193    <span class="comment">/* Create a state machine with an illegal number of transitions */</span>
<a name="l02194"></a>02194    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, 1, 0, 0, 0);
<a name="l02195"></a>02195    <span class="keywordflow">if</span> (smDesc != NULL)
<a name="l02196"></a>02196       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02197"></a>02197 
<a name="l02198"></a>02198    <span class="comment">/* Create a state machine with an illegal number of choice pseudo-states */</span>
<a name="l02199"></a>02199    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, -1, 1, 0, 0);
<a name="l02200"></a>02200    <span class="keywordflow">if</span> (smDesc != NULL)
<a name="l02201"></a>02201       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02202"></a>02202 
<a name="l02203"></a>02203    <span class="comment">/* Create a state machine with an illegal number of actions */</span>
<a name="l02204"></a>02204    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, 1, 1, -1, 0);
<a name="l02205"></a>02205    <span class="keywordflow">if</span> (smDesc != NULL)
<a name="l02206"></a>02206       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02207"></a>02207 
<a name="l02208"></a>02208    <span class="comment">/* Create a state machine with an illegal number of guards */</span>
<a name="l02209"></a>02209    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, 1, 1, 0, -1);
<a name="l02210"></a>02210    <span class="keywordflow">if</span> (smDesc != NULL)
<a name="l02211"></a>02211       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02212"></a>02212 
<a name="l02213"></a>02213    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02214"></a>02214 }
<a name="l02215"></a>02215 
<a name="l02216"></a>02216 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02217"></a><a class="code" href="_fw_sm_test_cases_8h.html#a53a4a4a42f8dffdfceaab13275620f9c">02217</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a53a4a4a42f8dffdfceaab13275620f9c" title="Test a transition which goes through a choice pseudo-state without any out-going transition with a tr...">FwSmTestCaseTransErr1</a>() {
<a name="l02218"></a>02218    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02219"></a>02219    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02220"></a>02220    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02221"></a>02221 
<a name="l02222"></a>02222    <span class="comment">/* reset log */</span>
<a name="l02223"></a>02223    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02224"></a>02224 
<a name="l02225"></a>02225    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l02226"></a>02226    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02227"></a>02227    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02228"></a>02228    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02229"></a>02229    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02230"></a>02230    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02231"></a>02231 
<a name="l02232"></a>02232    <span class="comment">/* Create test SM */</span>
<a name="l02233"></a>02233    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#aff539c380811965de45ddcc6d31e399c" title="Operation to create and configure the state machine SM2.">FwSmMakeTestSM2</a>(smData);
<a name="l02234"></a>02234    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02235"></a>02235       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02236"></a>02236 
<a name="l02237"></a>02237    <span class="comment">/* Check configuration of state machine */</span>
<a name="l02238"></a>02238    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02239"></a>02239       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02240"></a>02240       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02241"></a>02241    }
<a name="l02242"></a>02242 
<a name="l02243"></a>02243    <span class="comment">/* Start SM (this leaves it in an undefined state because both flag_1 and flag_2 are false */</span>
<a name="l02244"></a>02244    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l02245"></a>02245    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02246"></a>02246    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l02247"></a>02247       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02248"></a>02248       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02249"></a>02249    }
<a name="l02250"></a>02250    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc)!=<a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa012e27cba3627e133e277cbf07c35b28" title="An error was encountered while executing a transition in a state machine (see FwSmMakeTrans).">smTransErr</a>)) {
<a name="l02251"></a>02251       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02252"></a>02252       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02253"></a>02253    }
<a name="l02254"></a>02254 
<a name="l02255"></a>02255    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02256"></a>02256    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02257"></a>02257 }
<a name="l02258"></a>02258 
<a name="l02259"></a>02259 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02260"></a><a class="code" href="_fw_sm_test_cases_8h.html#a56a5399a72f207f9168d54f133e8f02f">02260</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a56a5399a72f207f9168d54f133e8f02f" title="Verify the behaviour of a degenerate state machine which consists of a single direct transition from ...">FwSmTestCaseDummySM3</a>() {
<a name="l02261"></a>02261    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02262"></a>02262    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02263"></a>02263    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02264"></a>02264 
<a name="l02265"></a>02265    <span class="comment">/* reset log */</span>
<a name="l02266"></a>02266    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02267"></a>02267 
<a name="l02268"></a>02268    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l02269"></a>02269    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02270"></a>02270    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02271"></a>02271    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02272"></a>02272    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02273"></a>02273    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02274"></a>02274 
<a name="l02275"></a>02275    <span class="comment">/* Create test SM */</span>
<a name="l02276"></a>02276    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a3da81efe980b0456ce792e0d4f2f4726" title="Operation to create and configure a degenerate state machine with neither states nor choice pseudo-st...">FwSmMakeTestSM11</a>(smData);
<a name="l02277"></a>02277    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02278"></a>02278       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02279"></a>02279 
<a name="l02280"></a>02280    <span class="comment">/* Check configuration of state machine */</span>
<a name="l02281"></a>02281    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02282"></a>02282       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02283"></a>02283       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02284"></a>02284    }
<a name="l02285"></a>02285 
<a name="l02286"></a>02286    <span class="comment">/* Start SM (this causes it to terminate immediately) */</span>
<a name="l02287"></a>02287    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l02288"></a>02288    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02289"></a>02289    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l02290"></a>02290       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02291"></a>02291    }
<a name="l02292"></a>02292 
<a name="l02293"></a>02293    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02294"></a>02294 }
<a name="l02295"></a>02295 
<a name="l02296"></a>02296 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02297"></a><a class="code" href="_fw_sm_test_cases_8h.html#ac882f165af925fa72ce3a2b01f47b686">02297</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ac882f165af925fa72ce3a2b01f47b686" title="Test a transition which has a choice pseudo-state as both source and destination.">FwSmTestCaseTransErr2</a>() {
<a name="l02298"></a>02298    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02299"></a>02299    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02300"></a>02300    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02301"></a>02301 
<a name="l02302"></a>02302    <span class="comment">/* reset log */</span>
<a name="l02303"></a>02303    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02304"></a>02304 
<a name="l02305"></a>02305    <span class="comment">/* Initialize data structure to hold the data of the embedding state machine */</span>
<a name="l02306"></a>02306    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02307"></a>02307    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02308"></a>02308    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02309"></a>02309    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02310"></a>02310    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02311"></a>02311 
<a name="l02312"></a>02312    <span class="comment">/* Create test SM */</span>
<a name="l02313"></a>02313    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a8b1e541b0cf6e7b29b38efbd1c0043cd" title="Operation to create and configure a state machine where a transition has a choice pseudo-state as bot...">FwSmMakeTestSM12</a>(smData);
<a name="l02314"></a>02314    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02315"></a>02315       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02316"></a>02316 
<a name="l02317"></a>02317    <span class="comment">/* Check configuration of state machine (state S1 is unreachable) */</span>
<a name="l02318"></a>02318    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa5d4036701ca8bf9bc1582b6418ecc67f" title="The state machine has a state which is not a destination of any transition.">smUnreachablePState</a>) {
<a name="l02319"></a>02319       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02320"></a>02320       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02321"></a>02321    }
<a name="l02322"></a>02322 
<a name="l02323"></a>02323    <span class="comment">/* Start SM and verifies that transition encounters an error */</span>
<a name="l02324"></a>02324    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l02325"></a>02325    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02326"></a>02326    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa012e27cba3627e133e277cbf07c35b28" title="An error was encountered while executing a transition in a state machine (see FwSmMakeTrans).">smTransErr</a>) {
<a name="l02327"></a>02327       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02328"></a>02328       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02329"></a>02329    }
<a name="l02330"></a>02330 
<a name="l02331"></a>02331    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02332"></a>02332    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02333"></a>02333 }
<a name="l02334"></a>02334 
<a name="l02335"></a>02335 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02336"></a><a class="code" href="_fw_sm_test_cases_8h.html#a3c742a437de30a5608d09cc2bb629bfd">02336</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a3c742a437de30a5608d09cc2bb629bfd" title="Verify the ability of the configuration functions of a state machine to detect and report the followi...">FwSmTestCaseCheck16</a>() {
<a name="l02337"></a>02337    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02338"></a>02338    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02339"></a>02339    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l02340"></a>02340    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02341"></a>02341    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02342"></a>02342    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02343"></a>02343 
<a name="l02344"></a>02344    <span class="comment">/* Create a state machine with one state, one choice pseudo-state and three transitions */</span>
<a name="l02345"></a>02345    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02346"></a>02346    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02347"></a>02347 
<a name="l02348"></a>02348    <span class="comment">/* Configure state with too many out-going transitions  */</span>
<a name="l02349"></a>02349    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 3, NULL, NULL, NULL, NULL);
<a name="l02350"></a>02350    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa117697e1ede7b3eb926655ac34dff971" title="A state or choice pseudo-state is added to a state machine which has more out-going transitions than ...">smTooManyOutTrans</a>) {
<a name="l02351"></a>02351       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02352"></a>02352       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02353"></a>02353    }
<a name="l02354"></a>02354 
<a name="l02355"></a>02355    <span class="comment">/* Configure choice pseudo-state with too many out-going transitions  */</span>
<a name="l02356"></a>02356    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 3);
<a name="l02357"></a>02357    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa117697e1ede7b3eb926655ac34dff971" title="A state or choice pseudo-state is added to a state machine which has more out-going transitions than ...">smTooManyOutTrans</a>) {
<a name="l02358"></a>02358       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02359"></a>02359       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02360"></a>02360    }
<a name="l02361"></a>02361 
<a name="l02362"></a>02362    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02363"></a>02363    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02364"></a>02364 }
<a name="l02365"></a>02365 
<a name="l02366"></a>02366 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02367"></a><a class="code" href="_fw_sm_test_cases_8h.html#a2f01c31f96a7e2591aa4fb31c07053e3">02367</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a2f01c31f96a7e2591aa4fb31c07053e3" title="Configure a state to exceed the maximum number of actions and check that an error is reported...">FwSmTestCaseCheck17</a>() {
<a name="l02368"></a>02368    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 3;  <span class="comment">/* number of proper states */</span>
<a name="l02369"></a>02369    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02370"></a>02370    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 1;    <span class="comment">/* number of transitions */</span>
<a name="l02371"></a>02371    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02372"></a>02372    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02373"></a>02373    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02374"></a>02374 
<a name="l02375"></a>02375    <span class="comment">/* Create a state machine with three state and one transition */</span>
<a name="l02376"></a>02376    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02377"></a>02377    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02378"></a>02378 
<a name="l02379"></a>02379    <span class="comment">/* Configure state with an entry action (not allowed because no actions have been declared */</span>
<a name="l02380"></a>02380    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, &amp;<a class="code" href="_fw_sm_core_8c.html#a680c61bfb01c35e8d3242349c978e3c7" title="Dummy action which returns without doing anything.">SmDummyAction</a>, NULL, NULL, NULL);
<a name="l02381"></a>02381    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fafde5b5a1f3f242a71664ea8df52e5264" title="The number of actions added to the state machine exceeds the number of actions declared when the stat...">smTooManyActions</a>) {
<a name="l02382"></a>02382       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02383"></a>02383       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02384"></a>02384    }
<a name="l02385"></a>02385 
<a name="l02386"></a>02386    <span class="comment">/* Configure state with an exit action (not allowed because no actions have been declared */</span>
<a name="l02387"></a>02387    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>, 0, NULL, &amp;<a class="code" href="_fw_sm_core_8c.html#a680c61bfb01c35e8d3242349c978e3c7" title="Dummy action which returns without doing anything.">SmDummyAction</a>, NULL, NULL);
<a name="l02388"></a>02388    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fafde5b5a1f3f242a71664ea8df52e5264" title="The number of actions added to the state machine exceeds the number of actions declared when the stat...">smTooManyActions</a>) {
<a name="l02389"></a>02389       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02390"></a>02390       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02391"></a>02391    }
<a name="l02392"></a>02392 
<a name="l02393"></a>02393    <span class="comment">/* Configure state with a do-action (not allowed because no actions have been declared */</span>
<a name="l02394"></a>02394    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>, 0, NULL, NULL, &amp;<a class="code" href="_fw_sm_core_8c.html#a680c61bfb01c35e8d3242349c978e3c7" title="Dummy action which returns without doing anything.">SmDummyAction</a>, NULL);
<a name="l02395"></a>02395    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fafde5b5a1f3f242a71664ea8df52e5264" title="The number of actions added to the state machine exceeds the number of actions declared when the stat...">smTooManyActions</a>) {
<a name="l02396"></a>02396       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02397"></a>02397       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02398"></a>02398    }
<a name="l02399"></a>02399 
<a name="l02400"></a>02400    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02401"></a>02401    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02402"></a>02402 }
<a name="l02403"></a>02403 
<a name="l02404"></a>02404 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02405"></a><a class="code" href="_fw_sm_test_cases_8h.html#a23e7b4af315970dc4c672b4ccd7f4a16">02405</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a23e7b4af315970dc4c672b4ccd7f4a16" title="Configure a transitions to exceed the maximum number of actions and the maximum number of guards and ...">FwSmTestCaseCheck18</a>() {
<a name="l02406"></a>02406    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02407"></a>02407    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02408"></a>02408    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l02409"></a>02409    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02410"></a>02410    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02411"></a>02411    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02412"></a>02412 
<a name="l02413"></a>02413    <span class="comment">/* Create a state machine with one state and three transitions */</span>
<a name="l02414"></a>02414    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02415"></a>02415    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02416"></a>02416 
<a name="l02417"></a>02417    <span class="comment">/* Configure state */</span>
<a name="l02418"></a>02418    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 2, NULL, NULL, NULL, NULL);
<a name="l02419"></a>02419    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02420"></a>02420       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02421"></a>02421       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02422"></a>02422    }
<a name="l02423"></a>02423 
<a name="l02424"></a>02424    <span class="comment">/* Configure transition with an action (not allowed because no actions have been declared */</span>
<a name="l02425"></a>02425    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, &amp;<a class="code" href="_fw_sm_core_8c.html#a680c61bfb01c35e8d3242349c978e3c7" title="Dummy action which returns without doing anything.">SmDummyAction</a>, NULL);
<a name="l02426"></a>02426    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fafde5b5a1f3f242a71664ea8df52e5264" title="The number of actions added to the state machine exceeds the number of actions declared when the stat...">smTooManyActions</a>) {
<a name="l02427"></a>02427       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02428"></a>02428       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02429"></a>02429    }
<a name="l02430"></a>02430 
<a name="l02431"></a>02431    <span class="comment">/* Configure transition with a guard (not allowed because no guards have been declared */</span>
<a name="l02432"></a>02432    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, &amp;<a class="code" href="_fw_sm_core_8c.html#ae7e27f9965b8aa7dde4dfb2c8a6fa23f" title="Dummy guard which always returns true.">SmDummyGuard</a>);
<a name="l02433"></a>02433    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa7ba3aac97aa59ec776ee164b3e92d900" title="The number of guards added to the state machine exceeds the number of guards declared when the state ...">smTooManyGuards</a>) {
<a name="l02434"></a>02434       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02435"></a>02435       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02436"></a>02436    }
<a name="l02437"></a>02437 
<a name="l02438"></a>02438    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02439"></a>02439    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02440"></a>02440 }
<a name="l02441"></a>02441 
<a name="l02442"></a>02442 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02443"></a><a class="code" href="_fw_sm_test_cases_8h.html#a560958f76c84de779bf12396e9fa714a">02443</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a560958f76c84de779bf12396e9fa714a" title="Configure a state machine to have too few actions and check that FwSmCheck detects and reports this s...">FwSmTestCaseCheck19</a>() {
<a name="l02444"></a>02444    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02445"></a>02445    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02446"></a>02446    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 2;    <span class="comment">/* number of transitions */</span>
<a name="l02447"></a>02447    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 1;  <span class="comment">/* number of actions */</span>
<a name="l02448"></a>02448    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02449"></a>02449    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02450"></a>02450 
<a name="l02451"></a>02451    <span class="comment">/* Create a state machine with one state, two transitions, and one action */</span>
<a name="l02452"></a>02452    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02453"></a>02453    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02454"></a>02454 
<a name="l02455"></a>02455    <span class="comment">/* Configure state */</span>
<a name="l02456"></a>02456    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l02457"></a>02457    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02458"></a>02458       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02459"></a>02459       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02460"></a>02460    }
<a name="l02461"></a>02461 
<a name="l02462"></a>02462    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02463"></a>02463    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02464"></a>02464       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02465"></a>02465       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02466"></a>02466    }
<a name="l02467"></a>02467 
<a name="l02468"></a>02468    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02469"></a>02469    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02470"></a>02470       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02471"></a>02471       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02472"></a>02472    }
<a name="l02473"></a>02473 
<a name="l02474"></a>02474    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa55dea1413601839937aa8f5bab44d6f1" title="The number of actions added to the state machine is smaller than the number of actions declared when ...">smTooFewActions</a>) {
<a name="l02475"></a>02475       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02476"></a>02476       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02477"></a>02477    }
<a name="l02478"></a>02478 
<a name="l02479"></a>02479    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02480"></a>02480    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02481"></a>02481 }
<a name="l02482"></a>02482 
<a name="l02483"></a>02483 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02484"></a><a class="code" href="_fw_sm_test_cases_8h.html#a78e81fd0e74cd7d47c5ad7c2429b0f5e">02484</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a78e81fd0e74cd7d47c5ad7c2429b0f5e" title="Configure a state machine to have too few actions and check that FwSmCheck detects and reports this s...">FwSmTestCaseCheck20</a>() {
<a name="l02485"></a>02485    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02486"></a>02486    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02487"></a>02487    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 2;    <span class="comment">/* number of transitions */</span>
<a name="l02488"></a>02488    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02489"></a>02489    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 1;   <span class="comment">/* number of guards */</span>
<a name="l02490"></a>02490    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02491"></a>02491 
<a name="l02492"></a>02492    <span class="comment">/* Create a state machine with one state, two transitions, and one guard */</span>
<a name="l02493"></a>02493    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02494"></a>02494    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02495"></a>02495 
<a name="l02496"></a>02496    <span class="comment">/* Configure state */</span>
<a name="l02497"></a>02497    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 1, NULL, NULL, NULL, NULL);
<a name="l02498"></a>02498    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02499"></a>02499       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02500"></a>02500       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02501"></a>02501    }
<a name="l02502"></a>02502 
<a name="l02503"></a>02503    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02504"></a>02504    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02505"></a>02505       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02506"></a>02506       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02507"></a>02507    }
<a name="l02508"></a>02508 
<a name="l02509"></a>02509    <a class="code" href="_fw_sm_config_8c.html#af9f6353dda744022c0bfc91a1794ce50" title="Create a transition from a proper state to the final pseudo-state and add it to a state machine...">FwSmAddTransStaToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02510"></a>02510    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02511"></a>02511       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02512"></a>02512       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02513"></a>02513    }
<a name="l02514"></a>02514 
<a name="l02515"></a>02515    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa964c169364d9b24833606d05e87c9f21" title="The number of guards added to the state machine is smaller than the number of guards declared when th...">smTooFewGuards</a>) {
<a name="l02516"></a>02516       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02517"></a>02517       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02518"></a>02518    }
<a name="l02519"></a>02519 
<a name="l02520"></a>02520    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02521"></a>02521    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02522"></a>02522 }
<a name="l02523"></a>02523 
<a name="l02524"></a>02524 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02525"></a><a class="code" href="_fw_sm_test_cases_8h.html#a68a0a69f38c14803221a382a609a849f">02525</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a68a0a69f38c14803221a382a609a849f" title="Configure a state machine to have a state which is not reachable and check that FwSmCheck detects and...">FwSmTestCaseCheck21</a>() {
<a name="l02526"></a>02526    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 2;  <span class="comment">/* number of proper states */</span>
<a name="l02527"></a>02527    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 0;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02528"></a>02528    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 1;    <span class="comment">/* number of transitions */</span>
<a name="l02529"></a>02529    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02530"></a>02530    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02531"></a>02531    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02532"></a>02532 
<a name="l02533"></a>02533    <span class="comment">/* Create and configure the test state machine */</span>
<a name="l02534"></a>02534    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02535"></a>02535    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02536"></a>02536 
<a name="l02537"></a>02537    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l02538"></a>02538    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>, 0, NULL, NULL, NULL, NULL);
<a name="l02539"></a>02539 
<a name="l02540"></a>02540    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02541"></a>02541 
<a name="l02542"></a>02542    <span class="comment">/* Check that configuration error is detected */</span>
<a name="l02543"></a>02543    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa5d4036701ca8bf9bc1582b6418ecc67f" title="The state machine has a state which is not a destination of any transition.">smUnreachablePState</a>) {
<a name="l02544"></a>02544       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02545"></a>02545       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02546"></a>02546    }
<a name="l02547"></a>02547 
<a name="l02548"></a>02548    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02549"></a>02549    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02550"></a>02550 }
<a name="l02551"></a>02551 
<a name="l02552"></a>02552 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02553"></a><a class="code" href="_fw_sm_test_cases_8h.html#a9bbf5bc8ad2d6440a8cea8273567dddc">02553</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a9bbf5bc8ad2d6440a8cea8273567dddc" title="Configure a state machine to have a choice pseudo-state which is not reachable and check that FwSmChe...">FwSmTestCaseCheck22</a>() {
<a name="l02554"></a>02554    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfPStates = 1;  <span class="comment">/* number of proper states */</span>
<a name="l02555"></a>02555    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfCStates = 1;  <span class="comment">/* number of choice pseudo-states */</span>
<a name="l02556"></a>02556    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfTrans = 3;    <span class="comment">/* number of transitions */</span>
<a name="l02557"></a>02557    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfActions = 0;  <span class="comment">/* number of actions */</span>
<a name="l02558"></a>02558    <span class="keyword">const</span> <a class="code" href="_fw_sm_constants_8h.html#aa5de17303e6a8f583244c9e26a64c02d" title="Type used for signed counters with a &quot;short&quot; range.">FwSmCounterS1_t</a> nOfGuards = 0;   <span class="comment">/* number of guards */</span>
<a name="l02559"></a>02559    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02560"></a>02560 
<a name="l02561"></a>02561    <span class="comment">/* Create and configure the test state machine */</span>
<a name="l02562"></a>02562    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(nOfPStates, nOfCStates, nOfTrans, nOfActions, nOfGuards);
<a name="l02563"></a>02563    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDesc, NULL);
<a name="l02564"></a>02564 
<a name="l02565"></a>02565    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 0, NULL, NULL, NULL, NULL);
<a name="l02566"></a>02566    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l02567"></a>02567 
<a name="l02568"></a>02568    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02569"></a>02569    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02570"></a>02570    <a class="code" href="_fw_sm_config_8c.html#a35a994bed52345e79186a2f2434795a8" title="Create a transition from a choice pseudo-state to a proper state and add it to a state machine...">FwSmAddTransCpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l02571"></a>02571 
<a name="l02572"></a>02572    <span class="comment">/* Check that configuration error is detected */</span>
<a name="l02573"></a>02573    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa71853c853a0d99a438789cfc619ccf68" title="The state machine has a choice pseudo-state which is not a destination of any transition.">smUnreachableCState</a>) {
<a name="l02574"></a>02574       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02575"></a>02575       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02576"></a>02576    }
<a name="l02577"></a>02577 
<a name="l02578"></a>02578    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02579"></a>02579    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02580"></a>02580 }
<a name="l02581"></a>02581 
<a name="l02582"></a>02582 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02583"></a><a class="code" href="_fw_sm_test_cases_8h.html#abc98907f845af87e4f39ddfca7ba68e0">02583</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#abc98907f845af87e4f39ddfca7ba68e0" title="Create state machine SM1 statically and then check that it behaves correctly.">FwSmTestCaseDescStatic3</a>() {
<a name="l02584"></a>02584    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02585"></a>02585    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02586"></a>02586    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02587"></a>02587 
<a name="l02588"></a>02588    <span class="comment">/* reset log */</span>
<a name="l02589"></a>02589    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02590"></a>02590 
<a name="l02591"></a>02591    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l02592"></a>02592    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02593"></a>02593    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02594"></a>02594    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02595"></a>02595    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02596"></a>02596    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02597"></a>02597 
<a name="l02598"></a>02598    <span class="comment">/* Create test SM */</span>
<a name="l02599"></a>02599    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a8334c81675b5287452a14e81d7d2dce0" title="Operation to create and configure the state machine SM1 (see FwSmMakeTestSM1 and figure below) static...">FwSmMakeTestSM1Static</a>(smData);
<a name="l02600"></a>02600    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02601"></a>02601       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02602"></a>02602 
<a name="l02603"></a>02603    <span class="comment">/* Check configuration of state machine */</span>
<a name="l02604"></a>02604    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02605"></a>02605       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02606"></a>02606    }
<a name="l02607"></a>02607 
<a name="l02608"></a>02608    <span class="comment">/* Attempt executing a stopped state machine and check that nothing happens */</span>
<a name="l02609"></a>02609    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l02610"></a>02610    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0) ||
<a name="l02611"></a>02611          (smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a>!=0)) {
<a name="l02612"></a>02612       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02613"></a>02613    }
<a name="l02614"></a>02614 
<a name="l02615"></a>02615    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l02616"></a>02616    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02617"></a>02617    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02618"></a>02618       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02619"></a>02619    }
<a name="l02620"></a>02620 
<a name="l02621"></a>02621    <span class="comment">/* Execute state machine twice and check success */</span>
<a name="l02622"></a>02622    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02623"></a>02623    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02624"></a>02624       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02625"></a>02625    }
<a name="l02626"></a>02626 
<a name="l02627"></a>02627    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02628"></a>02628    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02629"></a>02629       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02630"></a>02630    }
<a name="l02631"></a>02631 
<a name="l02632"></a>02632    <span class="comment">/* Stop state machine twice and check success */</span>
<a name="l02633"></a>02633    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc);
<a name="l02634"></a>02634    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=5) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l02635"></a>02635       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02636"></a>02636    }
<a name="l02637"></a>02637 
<a name="l02638"></a>02638    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02639"></a>02639 }
<a name="l02640"></a>02640 
<a name="l02641"></a>02641 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02642"></a><a class="code" href="_fw_sm_test_cases_8h.html#a6d1829e1c832ea3bbaadc3f6368e18ab">02642</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a6d1829e1c832ea3bbaadc3f6368e18ab" title="Verify the ability of the FwSmPrintConfig function to write to a file the configuration of a state ma...">FwSmTestCasePrint1</a>() {
<a name="l02643"></a>02643    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02644"></a>02644    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02645"></a>02645    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmData;
<a name="l02646"></a>02646    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmData = &amp;sEsmData;
<a name="l02647"></a>02647    FILE* outfile;
<a name="l02648"></a>02648    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02649"></a>02649 
<a name="l02650"></a>02650    outfile = fopen(<span class="stringliteral">&quot;FwSmPrint.out&quot;</span>,<span class="stringliteral">&quot;w&quot;</span>);
<a name="l02651"></a>02651 
<a name="l02652"></a>02652    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM1 =====\n&quot;</span>);
<a name="l02653"></a>02653    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l02654"></a>02654    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02655"></a>02655    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02656"></a>02656 
<a name="l02657"></a>02657    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM1 (Static Initialization) =====\n&quot;</span>);
<a name="l02658"></a>02658    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a8334c81675b5287452a14e81d7d2dce0" title="Operation to create and configure the state machine SM1 (see FwSmMakeTestSM1 and figure below) static...">FwSmMakeTestSM1Static</a>(smData);
<a name="l02659"></a>02659    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02660"></a>02660 
<a name="l02661"></a>02661    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM2 =====\n&quot;</span>);
<a name="l02662"></a>02662    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#aff539c380811965de45ddcc6d31e399c" title="Operation to create and configure the state machine SM2.">FwSmMakeTestSM2</a>(smData);
<a name="l02663"></a>02663    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02664"></a>02664    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02665"></a>02665 
<a name="l02666"></a>02666    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM3 =====\n&quot;</span>);
<a name="l02667"></a>02667    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ae460bee9c3d9ccb5eb556b7a46fd8002" title="Operation to create and configure the state machine SM3.">FwSmMakeTestSM3</a>(smData, esmData);
<a name="l02668"></a>02668    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02669"></a>02669    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02670"></a>02670 
<a name="l02671"></a>02671    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM4 =====\n&quot;</span>);
<a name="l02672"></a>02672    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a1d8a4f7b283c6063a4d6d4e1d2d2bfe4" title="Operation to create and configure the state machine SM4.">FwSmMakeTestSM4</a>(smData);
<a name="l02673"></a>02673    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02674"></a>02674    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02675"></a>02675 
<a name="l02676"></a>02676    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM5 =====\n&quot;</span>);
<a name="l02677"></a>02677    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(smData);
<a name="l02678"></a>02678    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02679"></a>02679    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02680"></a>02680 
<a name="l02681"></a>02681    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM5 (Static Initialization) =====\n&quot;</span>);
<a name="l02682"></a>02682    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a877e06c6da3d200bf089bdaf06ad169d" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM5 and figure below) static...">FwSmMakeTestSM5Static</a>(smData);
<a name="l02683"></a>02683    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02684"></a>02684 
<a name="l02685"></a>02685    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM5 (Direct Initialization) =====\n&quot;</span>);
<a name="l02686"></a>02686    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#af1e9545a65b7c56321ce1404cb45a1de" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM5 and figure below) by dir...">FwSmMakeTestSM5Dir</a>(smData);
<a name="l02687"></a>02687    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02688"></a>02688 
<a name="l02689"></a>02689    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM6 =====\n&quot;</span>);
<a name="l02690"></a>02690    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smData, esmData);
<a name="l02691"></a>02691    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02692"></a>02692    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02693"></a>02693 
<a name="l02694"></a>02694    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM7 =====\n&quot;</span>);
<a name="l02695"></a>02695    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a11a91969fcb6678e120741cd1ed54b5f" title="Operation to create and configure the state machine SM7.">FwSmMakeTestSM7</a>(smData);
<a name="l02696"></a>02696    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02697"></a>02697    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02698"></a>02698 
<a name="l02699"></a>02699    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM8 =====\n&quot;</span>);
<a name="l02700"></a>02700    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ab957c37fd85d7a77b84b625f74a66bec" title="Operation to create and configure a degenerate state machine with no states.">FwSmMakeTestSM8</a>(smData);
<a name="l02701"></a>02701    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02702"></a>02702    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02703"></a>02703 
<a name="l02704"></a>02704    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM9 =====\n&quot;</span>);
<a name="l02705"></a>02705    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a956692f82e07c526c9b287ae3274a5d4" title="Operation to create and configure a degenerate state machine with no transitions other than the initi...">FwSmMakeTestSM9</a>(smData);
<a name="l02706"></a>02706    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02707"></a>02707    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02708"></a>02708 
<a name="l02709"></a>02709    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM9 (Static Initialization) =====\n&quot;</span>);
<a name="l02710"></a>02710    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ac144bc80bac19903bb0ad24c036a34d4" title="Operation to create and configure the state machine SM5 (see FwSmMakeTestSM9 and figure below) static...">FwSmMakeTestSM9Static</a>(smData);
<a name="l02711"></a>02711    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02712"></a>02712 
<a name="l02713"></a>02713    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM10 =====\n&quot;</span>);
<a name="l02714"></a>02714    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#ae65fbf8435ebbbb974761293f8c7b732" title="Operation to create and configure the state machine SM10.">FwSmMakeTestSM10</a>(smData, esmData);
<a name="l02715"></a>02715    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02716"></a>02716 
<a name="l02717"></a>02717    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM10 (After it has been started) =====\n&quot;</span>);
<a name="l02718"></a>02718    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02719"></a>02719    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02720"></a>02720    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDesc);
<a name="l02721"></a>02721 
<a name="l02722"></a>02722    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM11 (Static Initialization) =====\n&quot;</span>);
<a name="l02723"></a>02723    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a3da81efe980b0456ce792e0d4f2f4726" title="Operation to create and configure a degenerate state machine with neither states nor choice pseudo-st...">FwSmMakeTestSM11</a>(smData);
<a name="l02724"></a>02724    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02725"></a>02725 
<a name="l02726"></a>02726    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM13 =====\n&quot;</span>);
<a name="l02727"></a>02727    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a55bbf82a54d5031c0ecdaeb979e3fcd6" title="Operation to create and configure a state machine where the &#39;execute&#39; transition has a choice pseudo-...">FwSmMakeTestSM13</a>(smData);
<a name="l02728"></a>02728    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02729"></a>02729    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02730"></a>02730 
<a name="l02731"></a>02731    fclose(outfile);
<a name="l02732"></a>02732 
<a name="l02733"></a>02733    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02734"></a>02734 }
<a name="l02735"></a>02735 
<a name="l02736"></a>02736 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02737"></a><a class="code" href="_fw_sm_test_cases_8h.html#a5d045e2bb95da9d56ce34ea58f6246f9">02737</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a5d045e2bb95da9d56ce34ea58f6246f9" title="Verify the ability of the FwSmPrintConfig function to write to a file the configuration of a state ma...">FwSmTestCasePrint2</a>() {
<a name="l02738"></a>02738    FILE* outfile;
<a name="l02739"></a>02739    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02740"></a>02740 
<a name="l02741"></a>02741    outfile = fopen(<span class="stringliteral">&quot;FwSmPrint.out&quot;</span>,<span class="stringliteral">&quot;a&quot;</span>);
<a name="l02742"></a>02742 
<a name="l02743"></a>02743    fprintf(outfile,<span class="stringliteral">&quot;\n===== FwSmPrint is called with a NULL State Machine Descriptor =====\n&quot;</span>);
<a name="l02744"></a>02744    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(NULL, outfile);
<a name="l02745"></a>02745 
<a name="l02746"></a>02746    fprintf(outfile,<span class="stringliteral">&quot;\n===== TEST STATE MACHINE SM12 (this SM has an illegal configuration) =====\n&quot;</span>);
<a name="l02747"></a>02747    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a8b1e541b0cf6e7b29b38efbd1c0043cd" title="Operation to create and configure a state machine where a transition has a choice pseudo-state as bot...">FwSmMakeTestSM12</a>(NULL);
<a name="l02748"></a>02748    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02749"></a>02749    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02750"></a>02750 
<a name="l02751"></a>02751    fprintf(outfile,<span class="stringliteral">&quot;\n===== FwSmPrint is called with an unconfigured State Machine Descriptor =====\n&quot;</span>);
<a name="l02752"></a>02752    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(2, 1, 3, 3, 3);
<a name="l02753"></a>02753    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02754"></a>02754    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02755"></a>02755 
<a name="l02756"></a>02756    fprintf(outfile,<span class="stringliteral">&quot;\n===== FwSmPrint is called on a State Machine Descriptor with Undefined State =====\n&quot;</span>);
<a name="l02757"></a>02757    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(1, 0, 2, 0, 0);
<a name="l02758"></a>02758    <a class="code" href="_fw_sm_config_8c.html#a1eb3b5b8b0872678d1156dd731c9bace" title="Create a transition from the initial pseudo-state to a proper state and add it to a state machine...">FwSmAddTransIpsToSta</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL);
<a name="l02759"></a>02759    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02760"></a>02760    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02761"></a>02761 
<a name="l02762"></a>02762    fprintf(outfile,<span class="stringliteral">&quot;\n===== FwSmPrint is called on a State Machine Descriptor with Undefined Choice Pseudo-State =====\n&quot;</span>);
<a name="l02763"></a>02763    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(0, 1, 3, 0, 0);
<a name="l02764"></a>02764    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l02765"></a>02765    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02766"></a>02766    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02767"></a>02767 
<a name="l02768"></a>02768    fprintf(outfile,<span class="stringliteral">&quot;\n===== FwSmPrint is called on a State Machine Descriptor with no states =====\n&quot;</span>);
<a name="l02769"></a>02769    smDesc = <a class="code" href="_fw_sm_d_create_8c.html#a369bf6a3be0b6e1bcfe0957acd84e377" title="Create a new state machine descriptor.">FwSmCreate</a>(0, 1, 3, 0, 0);
<a name="l02770"></a>02770    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l02771"></a>02771    <a class="code" href="_fw_sm_config_8c.html#ad662f2d1ca4a4a914b4995bdfe5280e2" title="Create a transition from the initial pseudo-state to a choice pseudo-state and add it to a state mach...">FwSmAddTransIpsToCps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL);
<a name="l02772"></a>02772    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l02773"></a>02773    <a class="code" href="_fw_sm_config_8c.html#a4fc2137697d87b7928585f1b468a61db" title="Create a transition from a choice pseudo-state to the final pseudo-state and add it to a state machin...">FwSmAddTransCpsToFps</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l02774"></a>02774    <a class="code" href="_fw_sm_aux_8c.html#ab84b0967fa4371f3336cc40dcf4d12f7" title="Print the configuration of the state machine to an output stream.">FwSmPrintConfig</a>(smDesc, outfile);
<a name="l02775"></a>02775    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02776"></a>02776 
<a name="l02777"></a>02777    fclose(outfile);
<a name="l02778"></a>02778 
<a name="l02779"></a>02779    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02780"></a>02780 }
<a name="l02781"></a>02781 
<a name="l02782"></a>02782 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02783"></a><a class="code" href="_fw_sm_test_cases_8h.html#a3f6364b095ced203e738f4c9f8edf477">02783</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a3f6364b095ced203e738f4c9f8edf477" title="Verify the &#39;Execute&#39; command when it triggers a transition from a state to a choice pseudo-state and ...">FwSmTestCaseExecute5</a>() {
<a name="l02784"></a>02784    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02785"></a>02785    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02786"></a>02786    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l02787"></a>02787 
<a name="l02788"></a>02788    <span class="comment">/* reset log */</span>
<a name="l02789"></a>02789    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02790"></a>02790 
<a name="l02791"></a>02791    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l02792"></a>02792    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02793"></a>02793    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02794"></a>02794    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02795"></a>02795    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02796"></a>02796    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02797"></a>02797 
<a name="l02798"></a>02798    <span class="comment">/* Create test SM */</span>
<a name="l02799"></a>02799    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a55bbf82a54d5031c0ecdaeb979e3fcd6" title="Operation to create and configure a state machine where the &#39;execute&#39; transition has a choice pseudo-...">FwSmMakeTestSM13</a>(smData);
<a name="l02800"></a>02800    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l02801"></a>02801       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02802"></a>02802 
<a name="l02803"></a>02803    <span class="comment">/* Check configuration of state machine */</span>
<a name="l02804"></a>02804    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02805"></a>02805       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02806"></a>02806       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02807"></a>02807    }
<a name="l02808"></a>02808 
<a name="l02809"></a>02809    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l02810"></a>02810    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l02811"></a>02811    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02812"></a>02812       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02813"></a>02813       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02814"></a>02814    }
<a name="l02815"></a>02815 
<a name="l02816"></a>02816    <span class="comment">/* Execute state machine and check success */</span>
<a name="l02817"></a>02817    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02818"></a>02818    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02819"></a>02819       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02820"></a>02820       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02821"></a>02821    }
<a name="l02822"></a>02822 
<a name="l02823"></a>02823    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02824"></a>02824    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l02825"></a>02825 
<a name="l02826"></a>02826    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02827"></a>02827    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=14) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l02828"></a>02828       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02829"></a>02829       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02830"></a>02830    }
<a name="l02831"></a>02831 
<a name="l02832"></a>02832    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l02833"></a>02833    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02834"></a>02834 }
<a name="l02835"></a>02835 
<a name="l02836"></a>02836 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02837"></a><a class="code" href="_fw_sm_test_cases_8h.html#a63a46aef82c26a92cfe4efbe46312ebe">02837</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a63a46aef82c26a92cfe4efbe46312ebe" title="Create a derived state machine by extending state machine SM5 (see FwSmMakeTestSM5) and then verify t...">FwSmTestCaseDer1</a>() {
<a name="l02838"></a>02838    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02839"></a>02839    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02840"></a>02840    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l02841"></a>02841 
<a name="l02842"></a>02842    <span class="comment">/* reset log */</span>
<a name="l02843"></a>02843    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02844"></a>02844 
<a name="l02845"></a>02845    <span class="comment">/* Initialize data structures for the base state machine SM5 */</span>
<a name="l02846"></a>02846    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02847"></a>02847    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02848"></a>02848    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02849"></a>02849    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02850"></a>02850    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02851"></a>02851 
<a name="l02852"></a>02852    <span class="comment">/* Create the base state machine */</span>
<a name="l02853"></a>02853    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(NULL);
<a name="l02854"></a>02854    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l02855"></a>02855       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02856"></a>02856 
<a name="l02857"></a>02857    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l02858"></a>02858    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02859"></a>02859       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l02860"></a>02860       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02861"></a>02861    }
<a name="l02862"></a>02862 
<a name="l02863"></a>02863    <span class="comment">/* Create the derived state machine */</span>
<a name="l02864"></a>02864    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l02865"></a>02865 
<a name="l02866"></a>02866    <span class="comment">/* Set the data structure for the derived state machine */</span>
<a name="l02867"></a>02867    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDescDer, smData);
<a name="l02868"></a>02868 
<a name="l02869"></a>02869    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l02870"></a>02870    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02871"></a>02871       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02872"></a>02872       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02873"></a>02873       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02874"></a>02874    }
<a name="l02875"></a>02875 
<a name="l02876"></a>02876    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l02877"></a>02877    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l02878"></a>02878    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02879"></a>02879       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02880"></a>02880       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02881"></a>02881       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02882"></a>02882    }
<a name="l02883"></a>02883 
<a name="l02884"></a>02884    <span class="comment">/* Send transition command TR4 to SM and check that this has no effect */</span>
<a name="l02885"></a>02885    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02886"></a>02886    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l02887"></a>02887    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l02888"></a>02888       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02889"></a>02889       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02890"></a>02890       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02891"></a>02891    }
<a name="l02892"></a>02892 
<a name="l02893"></a>02893    <span class="comment">/* Set guard to prevent transition TR2 from S1 to S2 and then check that transition does not take place */</span>
<a name="l02894"></a>02894    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02895"></a>02895    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l02896"></a>02896    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l02897"></a>02897       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02898"></a>02898       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02899"></a>02899       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02900"></a>02900    }
<a name="l02901"></a>02901 
<a name="l02902"></a>02902    <span class="comment">/* Set guard to allow transition TR2 from S1 to S2 and then check that transition does take place */</span>
<a name="l02903"></a>02903    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l02904"></a>02904    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l02905"></a>02905    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3)) {
<a name="l02906"></a>02906       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02907"></a>02907       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02908"></a>02908       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02909"></a>02909    }
<a name="l02910"></a>02910    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l02911"></a>02911       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02912"></a>02912       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02913"></a>02913       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02914"></a>02914    }
<a name="l02915"></a>02915 
<a name="l02916"></a>02916    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02917"></a>02917    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02918"></a>02918    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l02919"></a>02919 }
<a name="l02920"></a>02920 
<a name="l02921"></a>02921 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l02922"></a><a class="code" href="_fw_sm_test_cases_8h.html#a6e70f62833d59fcd57af0cbeb6350e6a">02922</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a6e70f62833d59fcd57af0cbeb6350e6a" title="Create a derived state machine by extending state machine SM1 (see FwSmMakeTestSM1), override one of its actions and one of its guards, and then verify the correct behaviour of the derived state machine.">FwSmTestCaseDer2</a>() {
<a name="l02923"></a>02923    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l02924"></a>02924    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l02925"></a>02925    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l02926"></a>02926 
<a name="l02927"></a>02927    <span class="comment">/* reset log */</span>
<a name="l02928"></a>02928    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l02929"></a>02929 
<a name="l02930"></a>02930    <span class="comment">/* Initialize data structures for the base state machine SM1 */</span>
<a name="l02931"></a>02931    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l02932"></a>02932    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l02933"></a>02933    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l02934"></a>02934    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l02935"></a>02935    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l02936"></a>02936 
<a name="l02937"></a>02937    <span class="comment">/* Create the base state machine */</span>
<a name="l02938"></a>02938    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l02939"></a>02939    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l02940"></a>02940       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02941"></a>02941 
<a name="l02942"></a>02942    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l02943"></a>02943    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02944"></a>02944       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l02945"></a>02945       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02946"></a>02946    }
<a name="l02947"></a>02947 
<a name="l02948"></a>02948    <span class="comment">/* Create the derived state machine */</span>
<a name="l02949"></a>02949    smDescDer = <a class="code" href="_fw_sm_make_test_8c.html#ad4a573917f78998f6b9dd40b9913df67" title="Create a derived state machine and override one of its actions and one of its guards.">FwSmMakeTestSMDer1</a>(smDescBase, smData);
<a name="l02950"></a>02950 
<a name="l02951"></a>02951    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l02952"></a>02952    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l02953"></a>02953       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02954"></a>02954       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02955"></a>02955       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02956"></a>02956    }
<a name="l02957"></a>02957 
<a name="l02958"></a>02958    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l02959"></a>02959    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l02960"></a>02960    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02961"></a>02961       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02962"></a>02962       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02963"></a>02963       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02964"></a>02964    }
<a name="l02965"></a>02965 
<a name="l02966"></a>02966    <span class="comment">/* Execute state machine twice and check success */</span>
<a name="l02967"></a>02967    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02968"></a>02968    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=10) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02969"></a>02969       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02970"></a>02970       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02971"></a>02971       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02972"></a>02972    }
<a name="l02973"></a>02973 
<a name="l02974"></a>02974    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l02975"></a>02975    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02976"></a>02976       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02977"></a>02977       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02978"></a>02978       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02979"></a>02979    }
<a name="l02980"></a>02980 
<a name="l02981"></a>02981    <span class="comment">/* Command transition from S1 to FPS and check that nothing happens (guard is not true) */</span>
<a name="l02982"></a>02982    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#ae7e392109cabaa32573b6697c277dc0f" title="A transition identifier.">TR_S1_FPS</a>);
<a name="l02983"></a>02983    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l02984"></a>02984       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02985"></a>02985       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02986"></a>02986       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02987"></a>02987    }
<a name="l02988"></a>02988 
<a name="l02989"></a>02989    <span class="comment">/* Command transition from S1 to FPS and check that transition is executed (guard is true) */</span>
<a name="l02990"></a>02990    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l02991"></a>02991    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#ae7e392109cabaa32573b6697c277dc0f" title="A transition identifier.">TR_S1_FPS</a>);
<a name="l02992"></a>02992    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=0)) {
<a name="l02993"></a>02993       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02994"></a>02994       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l02995"></a>02995       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l02996"></a>02996    }
<a name="l02997"></a>02997 
<a name="l02998"></a>02998    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l02999"></a>02999    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03000"></a>03000    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03001"></a>03001 }
<a name="l03002"></a>03002 
<a name="l03003"></a>03003 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03004"></a><a class="code" href="_fw_sm_test_cases_8h.html#afc45536cf83baaaa00faccff93dccd58">03004</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#afc45536cf83baaaa00faccff93dccd58" title="Create a derived state machine by extending state machine SM6 (see FwSmMakeTestSM6) and then verify t...">FwSmTestCaseDer3</a>() {
<a name="l03005"></a>03005    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmDataBase;
<a name="l03006"></a>03006    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smDataBase = &amp;sSmDataBase;
<a name="l03007"></a>03007    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmDataBase;
<a name="l03008"></a>03008    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmDataBase = &amp;sEsmDataBase;
<a name="l03009"></a>03009    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmDataDer;
<a name="l03010"></a>03010    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smDataDer = &amp;sSmDataDer;
<a name="l03011"></a>03011    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmDataDer;
<a name="l03012"></a>03012    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmDataDer = &amp;sEsmDataDer;
<a name="l03013"></a>03013    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer, esmDescDer;
<a name="l03014"></a>03014 
<a name="l03015"></a>03015    <span class="comment">/* reset log */</span>
<a name="l03016"></a>03016    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03017"></a>03017 
<a name="l03018"></a>03018    <span class="comment">/* Create the base state machine */</span>
<a name="l03019"></a>03019    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smDataBase, esmDataBase);
<a name="l03020"></a>03020    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03021"></a>03021       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03022"></a>03022 
<a name="l03023"></a>03023    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03024"></a>03024    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03025"></a>03025       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03026"></a>03026       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03027"></a>03027    }
<a name="l03028"></a>03028 
<a name="l03029"></a>03029    <span class="comment">/* Start the base state machine */</span>
<a name="l03030"></a>03030    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescBase);
<a name="l03031"></a>03031 
<a name="l03032"></a>03032    <span class="comment">/* Create the derived state machine */</span>
<a name="l03033"></a>03033    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l03034"></a>03034 
<a name="l03035"></a>03035    <span class="comment">/* Initialize and set the data structure for the derived state machine (Outer SM) */</span>
<a name="l03036"></a>03036    smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03037"></a>03037    smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03038"></a>03038    smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03039"></a>03039    smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03040"></a>03040    smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03041"></a>03041    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDescDer, smDataDer);
<a name="l03042"></a>03042 
<a name="l03043"></a>03043    <span class="comment">/* Get the SM embedded in state S2 of the derived SM */</span>
<a name="l03044"></a>03044    esmDescDer = <a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDescDer,2);
<a name="l03045"></a>03045 
<a name="l03046"></a>03046    <span class="comment">/* Initialize and set the data structure for the derived state machine (Embedded SM) */</span>
<a name="l03047"></a>03047    esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03048"></a>03048    esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03049"></a>03049    esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03050"></a>03050    esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03051"></a>03051    esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 10;
<a name="l03052"></a>03052    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(esmDescDer, esmDataDer);
<a name="l03053"></a>03053 
<a name="l03054"></a>03054    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l03055"></a>03055    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03056"></a>03056       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03057"></a>03057       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03058"></a>03058       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03059"></a>03059       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03060"></a>03060    }
<a name="l03061"></a>03061 
<a name="l03062"></a>03062    <span class="comment">/* Start and execute SM (this brings the embedding SM in S2 and starts the ESM) */</span>
<a name="l03063"></a>03063    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;   <span class="comment">/* reset log */</span>
<a name="l03064"></a>03064    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l03065"></a>03065    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDescDer);
<a name="l03066"></a>03066    <span class="keywordflow">if</span> ((smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03067"></a>03067       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03068"></a>03068       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03069"></a>03069       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03070"></a>03070       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03071"></a>03071    }
<a name="l03072"></a>03072    <span class="keywordflow">if</span> ((esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03073"></a>03073       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03074"></a>03074       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03075"></a>03075       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03076"></a>03076       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03077"></a>03077    }
<a name="l03078"></a>03078 
<a name="l03079"></a>03079    <span class="comment">/* Send TR2 command to SM (this has no effect on the SM but causes the ESM to go from S1 to S2) */</span>
<a name="l03080"></a>03080    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l03081"></a>03081    <span class="keywordflow">if</span> ((smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03082"></a>03082       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03083"></a>03083       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03084"></a>03084       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03085"></a>03085       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03086"></a>03086    }
<a name="l03087"></a>03087    <span class="keywordflow">if</span> ((esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#a4be3cd785c906bad4165fa7a936a9177" title="Return the identifier of the current state of the state machine embedded in the current state (the su...">FwSmGetCurStateEmb</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03088"></a>03088       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03089"></a>03089       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03090"></a>03090       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03091"></a>03091       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03092"></a>03092    }
<a name="l03093"></a>03093    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03094"></a>03094 
<a name="l03095"></a>03095    <span class="comment">/* Execute the SM (this causes the do-action of the S2 of both the SM and ESM to be executed and then triggers */</span>
<a name="l03096"></a>03096    <span class="comment">/* a transition from S2 to S1 in the SM) */</span>
<a name="l03097"></a>03097    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDescDer);
<a name="l03098"></a>03098    <span class="keywordflow">if</span> ((smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=15) || (smDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=3) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03099"></a>03099       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03100"></a>03100       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03101"></a>03101       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03102"></a>03102       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03103"></a>03103    }
<a name="l03104"></a>03104    <span class="keywordflow">if</span> ((esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (esmDataDer-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(<a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>))!=0)) {
<a name="l03105"></a>03105       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03106"></a>03106       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03107"></a>03107       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03108"></a>03108       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03109"></a>03109    }
<a name="l03110"></a>03110    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=6) {
<a name="l03111"></a>03111       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03112"></a>03112       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03113"></a>03113       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03114"></a>03114       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03115"></a>03115    }
<a name="l03116"></a>03116    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=12)|| (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=13) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[3]!=3) ||
<a name="l03117"></a>03117          (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[4]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[5]!=1)) {
<a name="l03118"></a>03118       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03119"></a>03119       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03120"></a>03120       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03121"></a>03121       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03122"></a>03122    }
<a name="l03123"></a>03123    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[0]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[1]!=12)|| (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[2]!=12) ||
<a name="l03124"></a>03124          (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[3]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[4]!=2) || (<a class="code" href="_fw_sm_make_test_8c.html#ac84c282c1e4048a6d226065d1e75a4a4" title="Log array where the actions of the test state machines write the state of their state machine...">fwSm_logState</a>[5]!=1)) {
<a name="l03125"></a>03125       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03126"></a>03126       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03127"></a>03127       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03128"></a>03128       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03129"></a>03129    }
<a name="l03130"></a>03130 
<a name="l03131"></a>03131    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03132"></a>03132    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03133"></a>03133    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03134"></a>03134    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03135"></a>03135 }
<a name="l03136"></a>03136 
<a name="l03137"></a>03137 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03138"></a><a class="code" href="_fw_sm_test_cases_8h.html#aebd7d4d4f28d7cc6beae281d11b7503c">03138</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aebd7d4d4f28d7cc6beae281d11b7503c" title="Verify the ability of the configuration operation on a derived state machine to detect and report err...">FwSmTestCaseDerConfigErr1</a>() {
<a name="l03139"></a>03139    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03140"></a>03140    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03141"></a>03141    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l03142"></a>03142    <a class="code" href="_fw_sm_constants_8h.html#a00979ee9e3228460d1cb91e5d1ac8733" title="Type for a pointer to a state machine action.">FwSmAction_t</a> dummyAct1;
<a name="l03143"></a>03143    <a class="code" href="_fw_sm_constants_8h.html#a00979ee9e3228460d1cb91e5d1ac8733" title="Type for a pointer to a state machine action.">FwSmAction_t</a> dummyAct2;
<a name="l03144"></a>03144    <a class="code" href="_fw_sm_constants_8h.html#a48f62771901835485fc7135fabac7795" title="Type for a pointer to a state machine guard.">FwSmGuard_t</a> dummyGuard1;
<a name="l03145"></a>03145    <a class="code" href="_fw_sm_constants_8h.html#a48f62771901835485fc7135fabac7795" title="Type for a pointer to a state machine guard.">FwSmGuard_t</a> dummyGuard2;
<a name="l03146"></a>03146 
<a name="l03147"></a>03147    <span class="comment">/* reset log */</span>
<a name="l03148"></a>03148    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03149"></a>03149 
<a name="l03150"></a>03150    <span class="comment">/* Initialize data structures for the base state machine SM1 */</span>
<a name="l03151"></a>03151    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03152"></a>03152    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03153"></a>03153    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03154"></a>03154    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03155"></a>03155    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03156"></a>03156 
<a name="l03157"></a>03157    <span class="comment">/* Create the base state machine */</span>
<a name="l03158"></a>03158    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l03159"></a>03159    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03160"></a>03160       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03161"></a>03161 
<a name="l03162"></a>03162    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03163"></a>03163    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03164"></a>03164       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03165"></a>03165       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03166"></a>03166    }
<a name="l03167"></a>03167 
<a name="l03168"></a>03168    <span class="comment">/* Create the derived state machine */</span>
<a name="l03169"></a>03169    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l03170"></a>03170 
<a name="l03171"></a>03171    <span class="comment">/* Attempt to override a non-existent action and check that an error is reported */</span>
<a name="l03172"></a>03172    dummyAct1 = (<a class="code" href="_fw_sm_constants_8h.html#a00979ee9e3228460d1cb91e5d1ac8733" title="Type for a pointer to a state machine action.">FwSmAction_t</a>)1111;
<a name="l03173"></a>03173    dummyAct2 = (<a class="code" href="_fw_sm_constants_8h.html#a00979ee9e3228460d1cb91e5d1ac8733" title="Type for a pointer to a state machine action.">FwSmAction_t</a>)2222;
<a name="l03174"></a>03174    <a class="code" href="_fw_sm_config_8c.html#a3906aede123e3557f47fcbeac46d904c" title="Override an action (either a state action or a transition action) in a derived state machine...">FwSmOverrideAction</a>(smDescDer, dummyAct1, dummyAct2);
<a name="l03175"></a>03175    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3e0572a8927927580dbed8d72fc49790" title="The overridden action in a derived state machine does not exist.">smUndefAction</a>) {
<a name="l03176"></a>03176       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03177"></a>03177       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03178"></a>03178       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03179"></a>03179    }
<a name="l03180"></a>03180 
<a name="l03181"></a>03181    <span class="comment">/* Attempt to override a non-existent guard and check that an error is reported */</span>
<a name="l03182"></a>03182    dummyGuard1 = (<a class="code" href="_fw_sm_constants_8h.html#a48f62771901835485fc7135fabac7795" title="Type for a pointer to a state machine guard.">FwSmGuard_t</a>)1111;
<a name="l03183"></a>03183    dummyGuard2 = (<a class="code" href="_fw_sm_constants_8h.html#a48f62771901835485fc7135fabac7795" title="Type for a pointer to a state machine guard.">FwSmGuard_t</a>)2222;
<a name="l03184"></a>03184    <a class="code" href="_fw_sm_config_8c.html#a0575cce22596f8ee9b71cd716290ea19" title="Override a guard in a derived state machine.">FwSmOverrideGuard</a>(smDescDer, dummyGuard1, dummyGuard2);
<a name="l03185"></a>03185    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faafb76b13c5e92155995dba413ad32ccd" title="The overridden guard in a derived state machine does not exist.">smUndefGuard</a>) {
<a name="l03186"></a>03186       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03187"></a>03187       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03188"></a>03188       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03189"></a>03189    }
<a name="l03190"></a>03190 
<a name="l03191"></a>03191    <span class="comment">/* Attempt to override an action of a non-derived SM and check that an error is reported */</span>
<a name="l03192"></a>03192    <a class="code" href="_fw_sm_config_8c.html#a3906aede123e3557f47fcbeac46d904c" title="Override an action (either a state action or a transition action) in a derived state machine...">FwSmOverrideAction</a>(smDescBase, dummyAct1, dummyAct2);
<a name="l03193"></a>03193    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3f1b7474e571f4741827285cb6523a4e" title="The state machine where an action or a guard is overridden or a state machine is embedded is not a de...">smNotDerivedSM</a>) {
<a name="l03194"></a>03194       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03195"></a>03195       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03196"></a>03196       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03197"></a>03197    }
<a name="l03198"></a>03198 
<a name="l03199"></a>03199    <span class="comment">/* Attempt to override a guard of a non-derived SM and check that an error is reported */</span>
<a name="l03200"></a>03200    <a class="code" href="_fw_sm_config_8c.html#a0575cce22596f8ee9b71cd716290ea19" title="Override a guard in a derived state machine.">FwSmOverrideGuard</a>(smDescBase, dummyGuard1, dummyGuard2);
<a name="l03201"></a>03201    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3f1b7474e571f4741827285cb6523a4e" title="The state machine where an action or a guard is overridden or a state machine is embedded is not a de...">smNotDerivedSM</a>) {
<a name="l03202"></a>03202       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03203"></a>03203       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03204"></a>03204       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03205"></a>03205    }
<a name="l03206"></a>03206 
<a name="l03207"></a>03207    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03208"></a>03208    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03209"></a>03209    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03210"></a>03210 }
<a name="l03211"></a>03211 
<a name="l03212"></a>03212 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03213"></a><a class="code" href="_fw_sm_test_cases_8h.html#ada42d10cf1ca3ae9236b92f4b781f8f4">03213</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ada42d10cf1ca3ae9236b92f4b781f8f4" title="Verify the ability of the configuration functions of a derived state machines to detect and report er...">FwSmTestCaseDerEmbed1</a>() {
<a name="l03214"></a>03214    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03215"></a>03215    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03216"></a>03216    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer, esmDesc;
<a name="l03217"></a>03217 
<a name="l03218"></a>03218    <span class="comment">/* reset log */</span>
<a name="l03219"></a>03219    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03220"></a>03220 
<a name="l03221"></a>03221    <span class="comment">/* Initialize data structures for the base state machine SM1 */</span>
<a name="l03222"></a>03222    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03223"></a>03223    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03224"></a>03224    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03225"></a>03225    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03226"></a>03226    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03227"></a>03227 
<a name="l03228"></a>03228    <span class="comment">/* Create the base state machine */</span>
<a name="l03229"></a>03229    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l03230"></a>03230    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03231"></a>03231       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03232"></a>03232 
<a name="l03233"></a>03233    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03234"></a>03234    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03235"></a>03235       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03236"></a>03236       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03237"></a>03237    }
<a name="l03238"></a>03238 
<a name="l03239"></a>03239    <span class="comment">/* Create the derived state machine */</span>
<a name="l03240"></a>03240    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l03241"></a>03241 
<a name="l03242"></a>03242    <span class="comment">/* Create the embedded state machine */</span>
<a name="l03243"></a>03243    esmDesc = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(NULL);
<a name="l03244"></a>03244 
<a name="l03245"></a>03245    <span class="comment">/* Embed the state machine in state S1 */</span>
<a name="l03246"></a>03246    <a class="code" href="_fw_sm_config_8c.html#a5e196f4ac6259d45e0ce32c4dd8731c2" title="Embed a state machine in a state of a derived state machine.">FwSmEmbed</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, esmDesc);
<a name="l03247"></a>03247    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03248"></a>03248       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03249"></a>03249       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03250"></a>03250       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03251"></a>03251       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03252"></a>03252    }
<a name="l03253"></a>03253 
<a name="l03254"></a>03254    <span class="comment">/* Embed the state machine in state S1 a second time */</span>
<a name="l03255"></a>03255    <a class="code" href="_fw_sm_config_8c.html#a5e196f4ac6259d45e0ce32c4dd8731c2" title="Embed a state machine in a state of a derived state machine.">FwSmEmbed</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, esmDesc);
<a name="l03256"></a>03256    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa51829bf5cae11123a0a92195fd079d74" title="The state in a derived state machine to which an embedded state machine is added already holds an emb...">smEsmDefined</a>) {
<a name="l03257"></a>03257       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03258"></a>03258       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03259"></a>03259       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03260"></a>03260       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03261"></a>03261    }
<a name="l03262"></a>03262 
<a name="l03263"></a>03263    <span class="comment">/* Attempt to embed the state machine in a base state machine */</span>
<a name="l03264"></a>03264    <a class="code" href="_fw_sm_config_8c.html#a5e196f4ac6259d45e0ce32c4dd8731c2" title="Embed a state machine in a state of a derived state machine.">FwSmEmbed</a>(smDescBase, 1, esmDesc);
<a name="l03265"></a>03265    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3f1b7474e571f4741827285cb6523a4e" title="The state machine where an action or a guard is overridden or a state machine is embedded is not a de...">smNotDerivedSM</a>) {
<a name="l03266"></a>03266       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03267"></a>03267       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03268"></a>03268       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03269"></a>03269       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03270"></a>03270    }
<a name="l03271"></a>03271 
<a name="l03272"></a>03272    <span class="comment">/* Attempt to embed the state machine in a non-existent state */</span>
<a name="l03273"></a>03273    <a class="code" href="_fw_sm_config_8c.html#a5e196f4ac6259d45e0ce32c4dd8731c2" title="Embed a state machine in a state of a derived state machine.">FwSmEmbed</a>(smDescDer, 0, esmDesc);
<a name="l03274"></a>03274    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0da813d4e604587dc6ede2bd07677fc1" title="A state is added to a state machine with an illegal (out-of-range) identifier.">smIllStateId</a>) {
<a name="l03275"></a>03275       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03276"></a>03276       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03277"></a>03277       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03278"></a>03278       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03279"></a>03279    }
<a name="l03280"></a>03280 
<a name="l03281"></a>03281    smDescDer-&gt;<a class="code" href="struct_fw_sm_desc.html#a0bcf2a25d0d3e6a07259713b71ea86c9" title="either &#39;success&#39; or the code of the last error encountered by the state machine">errCode</a> = <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>;  <span class="comment">/* Reset error code */</span>
<a name="l03282"></a>03282 
<a name="l03283"></a>03283    <a class="code" href="_fw_sm_config_8c.html#a5e196f4ac6259d45e0ce32c4dd8731c2" title="Embed a state machine in a state of a derived state machine.">FwSmEmbed</a>(smDescDer, 2, esmDesc);
<a name="l03284"></a>03284    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0da813d4e604587dc6ede2bd07677fc1" title="A state is added to a state machine with an illegal (out-of-range) identifier.">smIllStateId</a>) {
<a name="l03285"></a>03285       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03286"></a>03286       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03287"></a>03287       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03288"></a>03288       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03289"></a>03289    }
<a name="l03290"></a>03290 
<a name="l03291"></a>03291    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(esmDesc);
<a name="l03292"></a>03292    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03293"></a>03293    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03294"></a>03294    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03295"></a>03295 }
<a name="l03296"></a>03296 
<a name="l03297"></a>03297 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03298"></a><a class="code" href="_fw_sm_test_cases_8h.html#a4a7431f6d33bc255d86c3bb8543cb76b">03298</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a4a7431f6d33bc255d86c3bb8543cb76b" title="Verify the use of a choice pseudo-state acting as a &quot;junction&quot; to join two branches from two differen...">FwSmTestCaseJunction1</a>() {
<a name="l03299"></a>03299    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03300"></a>03300    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03301"></a>03301    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l03302"></a>03302 
<a name="l03303"></a>03303    <span class="comment">/* reset log */</span>
<a name="l03304"></a>03304    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03305"></a>03305 
<a name="l03306"></a>03306    <span class="comment">/* Initialize data structures for the base state machine SM1 */</span>
<a name="l03307"></a>03307    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03308"></a>03308    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03309"></a>03309    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03310"></a>03310    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l03311"></a>03311    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03312"></a>03312 
<a name="l03313"></a>03313    <span class="comment">/* Create the state machine */</span>
<a name="l03314"></a>03314    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a4bb3a4a759d6123d0aefe0f6ae2f6dde" title="Operation to create and configure a state machine where the choice pseudo-state is used both to split...">FwSmMakeTestSM14</a>(smData);
<a name="l03315"></a>03315    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l03316"></a>03316       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03317"></a>03317 
<a name="l03318"></a>03318    <span class="comment">/* Check configuration of state machine */</span>
<a name="l03319"></a>03319    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03320"></a>03320       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03321"></a>03321       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03322"></a>03322    }
<a name="l03323"></a>03323 
<a name="l03324"></a>03324    <span class="comment">/* Start SM (this brings it to state S2) */</span>
<a name="l03325"></a>03325    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l03326"></a>03326    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03327"></a>03327       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03328"></a>03328       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03329"></a>03329    }
<a name="l03330"></a>03330 
<a name="l03331"></a>03331    <span class="comment">/* Send transition command TR1 to state machine (this has no effect) */</span>
<a name="l03332"></a>03332    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03333"></a>03333    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03334"></a>03334       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03335"></a>03335       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03336"></a>03336    }
<a name="l03337"></a>03337 
<a name="l03338"></a>03338    <span class="comment">/* Send transition command TR2 to state machine (this terminates it) */</span>
<a name="l03339"></a>03339    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l03340"></a>03340    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=4) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=0)) {
<a name="l03341"></a>03341       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03342"></a>03342       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03343"></a>03343    }
<a name="l03344"></a>03344 
<a name="l03345"></a>03345    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03346"></a>03346    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03347"></a>03347 }
<a name="l03348"></a>03348 
<a name="l03349"></a>03349 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03350"></a><a class="code" href="_fw_sm_test_cases_8h.html#a83503e073c5f55b45b50d5c4d4cf2427">03350</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a83503e073c5f55b45b50d5c4d4cf2427" title="Create a derived state machine by extending state machine SM5 (see FwSmMakeTestSM5) and then verify t...">FwSmTestCaseDer4</a>() {
<a name="l03351"></a>03351    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03352"></a>03352    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03353"></a>03353    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l03354"></a>03354 
<a name="l03355"></a>03355    <span class="comment">/* Instantiate the derived state machine */</span>
<a name="l03356"></a>03356    <a class="code" href="_fw_sm_s_create_8h.html#a3914406070fb2a81bf66f9147831f07d" title="Instantiate a descriptor for a derived state machine.">FW_SM_INST_DER</a>(sSmDescDer, 2, 4, 2)
<a name="l03357"></a>03357    smDescDer = &amp;sSmDescDer;
<a name="l03358"></a>03358 
<a name="l03359"></a>03359    <span class="comment">/* reset log */</span>
<a name="l03360"></a>03360    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03361"></a>03361 
<a name="l03362"></a>03362    <span class="comment">/* Initialize data structures for the base state machine SM5 */</span>
<a name="l03363"></a>03363    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03364"></a>03364    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03365"></a>03365    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03366"></a>03366    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03367"></a>03367    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03368"></a>03368 
<a name="l03369"></a>03369    <span class="comment">/* Create the base state machine */</span>
<a name="l03370"></a>03370    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(NULL);
<a name="l03371"></a>03371    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03372"></a>03372       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03373"></a>03373 
<a name="l03374"></a>03374    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03375"></a>03375    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03376"></a>03376       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03377"></a>03377       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03378"></a>03378    }
<a name="l03379"></a>03379 
<a name="l03380"></a>03380    <span class="comment">/* Initialize the derived state machine */</span>
<a name="l03381"></a>03381    <a class="code" href="_fw_sm_s_create_8c.html#aecbf6d07c2f929e8b0fb637d791f6812" title="Initialize a state machine descriptor to extend another state machine (the base state machine)...">FwSmInitDer</a>(smDescDer, smDescBase);
<a name="l03382"></a>03382 
<a name="l03383"></a>03383    <span class="comment">/* Set the data structure for the derived state machine */</span>
<a name="l03384"></a>03384    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDescDer, smData);
<a name="l03385"></a>03385 
<a name="l03386"></a>03386    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l03387"></a>03387    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03388"></a>03388       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03389"></a>03389       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03390"></a>03390    }
<a name="l03391"></a>03391 
<a name="l03392"></a>03392    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l03393"></a>03393    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l03394"></a>03394    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03395"></a>03395       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03396"></a>03396       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03397"></a>03397    }
<a name="l03398"></a>03398 
<a name="l03399"></a>03399    <span class="comment">/* Send transition command TR4 to SM and check that this has no effect */</span>
<a name="l03400"></a>03400    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03401"></a>03401    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a48ce3f0b954c1cbaead15ba901a1491b" title="A transition identifier.">TR4</a>);
<a name="l03402"></a>03402    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l03403"></a>03403       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03404"></a>03404       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03405"></a>03405    }
<a name="l03406"></a>03406 
<a name="l03407"></a>03407    <span class="comment">/* Set guard to prevent transition TR2 from S1 to S2 and then check that transition does not take place */</span>
<a name="l03408"></a>03408    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03409"></a>03409    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l03410"></a>03410    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=0)) {
<a name="l03411"></a>03411       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03412"></a>03412       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03413"></a>03413    }
<a name="l03414"></a>03414 
<a name="l03415"></a>03415    <span class="comment">/* Set guard to allow transition TR2 from S1 to S2 and then check that transition does take place */</span>
<a name="l03416"></a>03416    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03417"></a>03417    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l03418"></a>03418    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=6) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a>!=3)) {
<a name="l03419"></a>03419       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03420"></a>03420       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03421"></a>03421    }
<a name="l03422"></a>03422    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[0]!=3) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[1]!=4) || (<a class="code" href="_fw_sm_make_test_8c.html#a2d0700d77b8593acd2b614f998c79066" title="Log array where the actions of the test state machines write their markers.">fwSm_logMarker</a>[2]!=1)) {
<a name="l03423"></a>03423       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03424"></a>03424       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03425"></a>03425    }
<a name="l03426"></a>03426 
<a name="l03427"></a>03427    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03428"></a>03428    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03429"></a>03429 }
<a name="l03430"></a>03430 
<a name="l03431"></a>03431 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03432"></a><a class="code" href="_fw_sm_test_cases_8h.html#a1d567df44d11dff491ee2b2561adf3a1">03432</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a1d567df44d11dff491ee2b2561adf3a1" title="Instantiate a derived state machine and try to initialize it with a base state machine with the wrong...">FwSmTestCaseDerErr1</a>() {
<a name="l03433"></a>03433    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03434"></a>03434    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03435"></a>03435    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase;
<a name="l03436"></a>03436 
<a name="l03437"></a>03437    <span class="comment">/* Instantiate the first derived state machine (this one has the wrong</span>
<a name="l03438"></a>03438 <span class="comment">    * number of actions - 3 instead of 4)</span>
<a name="l03439"></a>03439 <span class="comment">    */</span>
<a name="l03440"></a>03440    <a class="code" href="_fw_sm_s_create_8h.html#a3914406070fb2a81bf66f9147831f07d" title="Instantiate a descriptor for a derived state machine.">FW_SM_INST_DER</a>(sSmDescDer1, 2, 3, 2)
<a name="l03441"></a>03441    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescDer1 = &amp;sSmDescDer1;
<a name="l03442"></a>03442 
<a name="l03443"></a>03443    <span class="comment">/* Instantiate the second derived state machine (this one has the wrong</span>
<a name="l03444"></a>03444 <span class="comment">    * number of guards - 3 instead of 2)</span>
<a name="l03445"></a>03445 <span class="comment">    */</span>
<a name="l03446"></a>03446    <a class="code" href="_fw_sm_s_create_8h.html#a3914406070fb2a81bf66f9147831f07d" title="Instantiate a descriptor for a derived state machine.">FW_SM_INST_DER</a>(sSmDescDer2, 2, 4, 3)
<a name="l03447"></a>03447    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescDer2 = &amp;sSmDescDer2;
<a name="l03448"></a>03448 
<a name="l03449"></a>03449 
<a name="l03450"></a>03450    <span class="comment">/* Initialize data structures for the base state machine SM5 */</span>
<a name="l03451"></a>03451    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03452"></a>03452    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03453"></a>03453    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03454"></a>03454    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03455"></a>03455    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03456"></a>03456 
<a name="l03457"></a>03457    <span class="comment">/* Create the base state machine */</span>
<a name="l03458"></a>03458    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(NULL);
<a name="l03459"></a>03459    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03460"></a>03460       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03461"></a>03461 
<a name="l03462"></a>03462    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03463"></a>03463    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03464"></a>03464       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03465"></a>03465       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03466"></a>03466    }
<a name="l03467"></a>03467 
<a name="l03468"></a>03468    <span class="comment">/* Try to initialize the first derived state machine and</span>
<a name="l03469"></a>03469 <span class="comment">    * check that an error is reported</span>
<a name="l03470"></a>03470 <span class="comment">    */</span>
<a name="l03471"></a>03471    <a class="code" href="_fw_sm_s_create_8c.html#aecbf6d07c2f929e8b0fb637d791f6812" title="Initialize a state machine descriptor to extend another state machine (the base state machine)...">FwSmInitDer</a>(smDescDer1, smDescBase);
<a name="l03472"></a>03472    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer1) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa89aae635d2fe20c7160d6437214d72f2" title="The number of actions in the base state machine is not the same as in the derived state machine...">smWrongNOfActions</a>) {
<a name="l03473"></a>03473       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03474"></a>03474       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03475"></a>03475    }
<a name="l03476"></a>03476 
<a name="l03477"></a>03477    <span class="comment">/* Try to initialize the second derived state machine and</span>
<a name="l03478"></a>03478 <span class="comment">    * check that an error is reported</span>
<a name="l03479"></a>03479 <span class="comment">    */</span>
<a name="l03480"></a>03480    <a class="code" href="_fw_sm_s_create_8c.html#aecbf6d07c2f929e8b0fb637d791f6812" title="Initialize a state machine descriptor to extend another state machine (the base state machine)...">FwSmInitDer</a>(smDescDer2, smDescBase);
<a name="l03481"></a>03481    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer2) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fac832b5d25ce37dfe905737f02ad7fd7b" title="The number of guards in the base state machine is not the same as in the derived state machine...">smWrongNOfGuards</a>) {
<a name="l03482"></a>03482       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03483"></a>03483       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03484"></a>03484    }
<a name="l03485"></a>03485 
<a name="l03486"></a>03486    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03487"></a>03487    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03488"></a>03488 }
<a name="l03489"></a>03489 
<a name="l03490"></a>03490 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03491"></a><a class="code" href="_fw_sm_test_cases_8h.html#ab6bb77f112699c3e2567319d5fba6fe4">03491</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#ab6bb77f112699c3e2567319d5fba6fe4" title="Create a derived state machine by extending state machine SM1 (see FwSmMakeTestSM1), override one of its actions and one of its guards, and then verify the correct behaviour of the derived state machine.">FwSmTestCaseDer5</a>() {
<a name="l03492"></a>03492    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03493"></a>03493    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03494"></a>03494    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l03495"></a>03495 
<a name="l03496"></a>03496    <span class="comment">/* reset log */</span>
<a name="l03497"></a>03497    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03498"></a>03498 
<a name="l03499"></a>03499    <span class="comment">/* Initialize data structures for the base state machine SM1 */</span>
<a name="l03500"></a>03500    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03501"></a>03501    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03502"></a>03502    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03503"></a>03503    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03504"></a>03504    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03505"></a>03505 
<a name="l03506"></a>03506    <span class="comment">/* Create the base state machine */</span>
<a name="l03507"></a>03507    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a21dc67e719af6a7867e96a3bb7e63649" title="Operation to create and configure the state machine SM1.">FwSmMakeTestSM1</a>(smData);
<a name="l03508"></a>03508    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03509"></a>03509       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03510"></a>03510 
<a name="l03511"></a>03511    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03512"></a>03512    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03513"></a>03513       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03514"></a>03514       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03515"></a>03515    }
<a name="l03516"></a>03516 
<a name="l03517"></a>03517    <span class="comment">/* Create the derived state machine */</span>
<a name="l03518"></a>03518    smDescDer = <a class="code" href="_fw_sm_make_test_8c.html#acc2860f6aa7375f25433b45808528d7d" title="Create a derived state machine and override one of its actions and one of its guards.">FwSmMakeTestSMDer1Static</a>(smDescBase, smData);
<a name="l03519"></a>03519 
<a name="l03520"></a>03520    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l03521"></a>03521    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03522"></a>03522       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03523"></a>03523       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03524"></a>03524    }
<a name="l03525"></a>03525 
<a name="l03526"></a>03526    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l03527"></a>03527    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l03528"></a>03528    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=8) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03529"></a>03529       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03530"></a>03530       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03531"></a>03531    }
<a name="l03532"></a>03532 
<a name="l03533"></a>03533    <span class="comment">/* Execute state machine twice and check success */</span>
<a name="l03534"></a>03534    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l03535"></a>03535    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=10) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03536"></a>03536       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03537"></a>03537       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03538"></a>03538    }
<a name="l03539"></a>03539 
<a name="l03540"></a>03540    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>);
<a name="l03541"></a>03541    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03542"></a>03542       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03543"></a>03543       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03544"></a>03544    }
<a name="l03545"></a>03545 
<a name="l03546"></a>03546    <span class="comment">/* Command transition from S1 to FPS and check that nothing happens (guard is not true) */</span>
<a name="l03547"></a>03547    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#ae7e392109cabaa32573b6697c277dc0f" title="A transition identifier.">TR_S1_FPS</a>);
<a name="l03548"></a>03548    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03549"></a>03549       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03550"></a>03550       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03551"></a>03551    }
<a name="l03552"></a>03552 
<a name="l03553"></a>03553    <span class="comment">/* Command transition from S1 to FPS and check that transition is executed (guard is true) */</span>
<a name="l03554"></a>03554    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l03555"></a>03555    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDescDer, <a class="code" href="_fw_sm_make_test_8h.html#ae7e392109cabaa32573b6697c277dc0f" title="A transition identifier.">TR_S1_FPS</a>);
<a name="l03556"></a>03556    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=12) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=2) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDescDer)!=0)) {
<a name="l03557"></a>03557       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03558"></a>03558       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03559"></a>03559    }
<a name="l03560"></a>03560 
<a name="l03561"></a>03561    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03562"></a>03562    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03563"></a>03563 }
<a name="l03564"></a>03564 
<a name="l03565"></a>03565 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03566"></a><a class="code" href="_fw_sm_test_cases_8h.html#a1b2ef75a89a96ac2f557f9dc5867a844">03566</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a1b2ef75a89a96ac2f557f9dc5867a844" title="Configure a state machine and then try to re-configure it and check that the reconfiguration attempt ...">FwSmTestCaseConfigErr2</a>() {
<a name="l03567"></a>03567    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03568"></a>03568    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03569"></a>03569    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l03570"></a>03570 
<a name="l03571"></a>03571    <span class="comment">/* reset log */</span>
<a name="l03572"></a>03572    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03573"></a>03573 
<a name="l03574"></a>03574    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l03575"></a>03575    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03576"></a>03576    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03577"></a>03577    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03578"></a>03578    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03579"></a>03579    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03580"></a>03580 
<a name="l03581"></a>03581    <span class="comment">/* Create the test SM */</span>
<a name="l03582"></a>03582    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a55bbf82a54d5031c0ecdaeb979e3fcd6" title="Operation to create and configure a state machine where the &#39;execute&#39; transition has a choice pseudo-...">FwSmMakeTestSM13</a>(smData);
<a name="l03583"></a>03583    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l03584"></a>03584       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03585"></a>03585 
<a name="l03586"></a>03586    <span class="comment">/* Check configuration of state machine */</span>
<a name="l03587"></a>03587    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03588"></a>03588       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03589"></a>03589       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03590"></a>03590    }
<a name="l03591"></a>03591 
<a name="l03592"></a>03592    <span class="comment">/* Try re-defining state S1 and check that an error is reported */</span>
<a name="l03593"></a>03593    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, 2, NULL, NULL, NULL, NULL);
<a name="l03594"></a>03594    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237faee73e3777f15541068114892fd3ae676" title="A state is added twice to the same state machine.">smStateIdInUse</a>) {
<a name="l03595"></a>03595       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03596"></a>03596       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03597"></a>03597    }
<a name="l03598"></a>03598 
<a name="l03599"></a>03599    <span class="comment">/* Try adding a new state and check that an error is reported */</span>
<a name="l03600"></a>03600    <a class="code" href="_fw_sm_config_8c.html#a7737739ad0ee0aa87056c68fd47d3708" title="Create a state with the given characteristics and add it to a state machine.">FwSmAddState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>, 2, NULL, NULL, NULL, NULL);
<a name="l03601"></a>03601    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa0da813d4e604587dc6ede2bd07677fc1" title="A state is added to a state machine with an illegal (out-of-range) identifier.">smIllStateId</a>) {
<a name="l03602"></a>03602       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03603"></a>03603       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03604"></a>03604    }
<a name="l03605"></a>03605 
<a name="l03606"></a>03606    <span class="comment">/* Try re-defining choice pseudo-state CPS1 and check that an error is reported */</span>
<a name="l03607"></a>03607    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, 2);
<a name="l03608"></a>03608    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa3221c7e832716d09734fdb17dcd23801" title="A choice pseudo-state is added twice to the same state machine.">smChoiceIdInUse</a>) {
<a name="l03609"></a>03609       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03610"></a>03610       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03611"></a>03611    }
<a name="l03612"></a>03612 
<a name="l03613"></a>03613    <span class="comment">/* Try adding a new choice pseudo-state and check that an error is reported */</span>
<a name="l03614"></a>03614    <a class="code" href="_fw_sm_config_8c.html#a94ace3150fa92f53571bb45d428e5adf" title="Create a choice pseudo-state with the given characteristics and add it to a state machine...">FwSmAddChoicePseudoState</a>(smDesc, <a class="code" href="_fw_sm_make_test_8h.html#ab77ea2c26141e2816e385ed18ea84899" title="A choice pseudo-state identifier.">CPS2</a>, 2);
<a name="l03615"></a>03615    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fae45d8f4d47ab74e68ff3ac8a316af614" title="A choice pseudo-state is added to a state machine with an illegal (out-of-range) identifier.">smIllChoiceId</a>) {
<a name="l03616"></a>03616       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03617"></a>03617       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03618"></a>03618    }
<a name="l03619"></a>03619 
<a name="l03620"></a>03620    <span class="comment">/* Try adding a new transition and check that an error is reported */</span>
<a name="l03621"></a>03621    <a class="code" href="_fw_sm_config_8c.html#a9db430ff105d2c0de6563e6025c9fa2e" title="Create a transition from a proper state to a proper state and add it to a state machine.">FwSmAddTransStaToSta</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, NULL, NULL);
<a name="l03622"></a>03622    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l03623"></a>03623       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03624"></a>03624       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03625"></a>03625    }
<a name="l03626"></a>03626 
<a name="l03627"></a>03627    <span class="comment">/* Try re-defining an existing transition and check that an error is reported */</span>
<a name="l03628"></a>03628    <a class="code" href="_fw_sm_config_8c.html#ac813b1b7b822d8715723c2e29364edb1" title="Create a transition from a proper state to a choice pseudo-state and add it to a state machine...">FwSmAddTransStaToCps</a>(smDesc, <a class="code" href="_fw_sm_constants_8h.html#a3e2ab84cdc75524201f9905c6363aaaa" title="Identifier of &quot;Execute&quot; transition in a state machine.">FW_TR_EXECUTE</a>, <a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>, <a class="code" href="_fw_sm_make_test_8h.html#a166123e34da6cb4cc55d4d8a97dfa40b" title="A choice pseudo-state identifier.">CPS1</a>, NULL, NULL);
<a name="l03629"></a>03629    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa67b0cbb06bc1cb9d9e263e08a7800b9f" title="A transition from a certain source (either a state or a choice pseudo-state) is added to a state mach...">smTooManyTrans</a>) {
<a name="l03630"></a>03630       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03631"></a>03631       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03632"></a>03632    }
<a name="l03633"></a>03633 
<a name="l03634"></a>03634    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03635"></a>03635    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03636"></a>03636 }
<a name="l03637"></a>03637 
<a name="l03638"></a>03638 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03639"></a><a class="code" href="_fw_sm_test_cases_8h.html#a9bc987670955b1b8bd59dfc0842f8489">03639</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a9bc987670955b1b8bd59dfc0842f8489" title="Create a derived state machine dynamically and then check the configuration of the newly created stat...">FwSmTestCaseDerConfig1</a>() {
<a name="l03640"></a>03640    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmDataBase;
<a name="l03641"></a>03641    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smDataBase = &amp;sSmDataBase;
<a name="l03642"></a>03642    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sEsmDataBase;
<a name="l03643"></a>03643    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* esmDataBase = &amp;sEsmDataBase;
<a name="l03644"></a>03644    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer, esmDescDer;
<a name="l03645"></a>03645 
<a name="l03646"></a>03646    <span class="comment">/* reset log */</span>
<a name="l03647"></a>03647    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03648"></a>03648 
<a name="l03649"></a>03649    <span class="comment">/* Create the base state machine */</span>
<a name="l03650"></a>03650    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a774523edc74de5156ded74f37f5ee947" title="Operation to create and configure the state machine SM6.">FwSmMakeTestSM6</a>(smDataBase, esmDataBase);
<a name="l03651"></a>03651    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03652"></a>03652       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03653"></a>03653 
<a name="l03654"></a>03654    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03655"></a>03655    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03656"></a>03656       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03657"></a>03657       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03658"></a>03658    }
<a name="l03659"></a>03659 
<a name="l03660"></a>03660    <span class="comment">/* Start the base state machine */</span>
<a name="l03661"></a>03661    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescBase);
<a name="l03662"></a>03662 
<a name="l03663"></a>03663    <span class="comment">/* Force the error code of the base SM to a non-nominal value */</span>
<a name="l03664"></a>03664    smDescBase-&gt;<a class="code" href="struct_fw_sm_desc.html#a0bcf2a25d0d3e6a07259713b71ea86c9" title="either &#39;success&#39; or the code of the last error encountered by the state machine">errCode</a> = <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa422fde8f0ddfead19f99d76cfe004037" title="A configuration error has been detected during the state machine configuration process.">smConfigErr</a>;
<a name="l03665"></a>03665 
<a name="l03666"></a>03666    <span class="comment">/* Create the derived state machine */</span>
<a name="l03667"></a>03667    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l03668"></a>03668 
<a name="l03669"></a>03669    <span class="comment">/* Get the SM embedded in state S2 of the derived SM */</span>
<a name="l03670"></a>03670    esmDescDer = <a class="code" href="_fw_sm_core_8c.html#acbf93bc6f5374ac04c7f7af4348c17ed" title="Return the state machine embedded in the i-th state of the argument state machine.">FwSmGetEmbSm</a>(smDescDer,2);
<a name="l03671"></a>03671 
<a name="l03672"></a>03672    <span class="comment">/* check that derived SM is a clone of base SM */</span>
<a name="l03673"></a>03673    <span class="keywordflow">if</span> (!IsClone(smDescBase, smDescDer)) {
<a name="l03674"></a>03674       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03675"></a>03675       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03676"></a>03676       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03677"></a>03677       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03678"></a>03678    }
<a name="l03679"></a>03679 
<a name="l03680"></a>03680    <span class="comment">/* Check the initial state of the derived state machine */</span>
<a name="l03681"></a>03681    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDescDer) == 1)  {
<a name="l03682"></a>03682       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03683"></a>03683       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03684"></a>03684       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03685"></a>03685       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03686"></a>03686    }
<a name="l03687"></a>03687 
<a name="l03688"></a>03688    <span class="comment">/* Check the initial value of the error code of the derived state machine */</span>
<a name="l03689"></a>03689    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa422fde8f0ddfead19f99d76cfe004037" title="A configuration error has been detected during the state machine configuration process.">smConfigErr</a>)  {
<a name="l03690"></a>03690       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03691"></a>03691       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03692"></a>03692       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03693"></a>03693       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03694"></a>03694    }
<a name="l03695"></a>03695 
<a name="l03696"></a>03696    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03697"></a>03697    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(esmDescDer);
<a name="l03698"></a>03698    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03699"></a>03699    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03700"></a>03700 }
<a name="l03701"></a>03701 
<a name="l03702"></a>03702 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03703"></a><a class="code" href="_fw_sm_test_cases_8h.html#a810e8cd789002203c9788d4470ca8538">03703</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a810e8cd789002203c9788d4470ca8538" title="Create a derived state machine statically and then check the configuration of the newly created state...">FwSmTestCaseDerConfig2</a>() {
<a name="l03704"></a>03704    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03705"></a>03705    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03706"></a>03706    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l03707"></a>03707 
<a name="l03708"></a>03708    <span class="comment">/* Instantiate the derived state machine */</span>
<a name="l03709"></a>03709    <a class="code" href="_fw_sm_s_create_8h.html#a3914406070fb2a81bf66f9147831f07d" title="Instantiate a descriptor for a derived state machine.">FW_SM_INST_DER</a>(sSmDescDer, 2, 4, 2)
<a name="l03710"></a>03710    smDescDer = &amp;sSmDescDer;
<a name="l03711"></a>03711 
<a name="l03712"></a>03712    <span class="comment">/* reset log */</span>
<a name="l03713"></a>03713    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03714"></a>03714 
<a name="l03715"></a>03715    <span class="comment">/* Initialize data structures for the base state machine SM5 */</span>
<a name="l03716"></a>03716    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03717"></a>03717    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03718"></a>03718    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03719"></a>03719    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03720"></a>03720    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03721"></a>03721 
<a name="l03722"></a>03722    <span class="comment">/* Create the base state machine */</span>
<a name="l03723"></a>03723    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a92b147f5e7cf4edd749eee143ee5f8c0" title="Operation to create and configure the state machine SM5.">FwSmMakeTestSM5</a>(NULL);
<a name="l03724"></a>03724    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03725"></a>03725       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03726"></a>03726 
<a name="l03727"></a>03727    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03728"></a>03728    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03729"></a>03729       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03730"></a>03730       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03731"></a>03731    }
<a name="l03732"></a>03732 
<a name="l03733"></a>03733    <span class="comment">/* Force the error code of the base SM to a non-nominal value */</span>
<a name="l03734"></a>03734    smDescBase-&gt;<a class="code" href="struct_fw_sm_desc.html#a0bcf2a25d0d3e6a07259713b71ea86c9" title="either &#39;success&#39; or the code of the last error encountered by the state machine">errCode</a> = <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa422fde8f0ddfead19f99d76cfe004037" title="A configuration error has been detected during the state machine configuration process.">smConfigErr</a>;
<a name="l03735"></a>03735 
<a name="l03736"></a>03736    <span class="comment">/* Initialize the derived state machine */</span>
<a name="l03737"></a>03737    <a class="code" href="_fw_sm_s_create_8c.html#aecbf6d07c2f929e8b0fb637d791f6812" title="Initialize a state machine descriptor to extend another state machine (the base state machine)...">FwSmInitDer</a>(smDescDer, smDescBase);
<a name="l03738"></a>03738 
<a name="l03739"></a>03739    <span class="comment">/* check that derived SM is a clone of base SM */</span>
<a name="l03740"></a>03740    <span class="keywordflow">if</span> (!IsClone(smDescBase, smDescDer)) {
<a name="l03741"></a>03741       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03742"></a>03742       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03743"></a>03743    }
<a name="l03744"></a>03744 
<a name="l03745"></a>03745    <span class="comment">/* Check the initial state of the derived state machine */</span>
<a name="l03746"></a>03746    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDescDer) == 1)  {
<a name="l03747"></a>03747       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03748"></a>03748       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03749"></a>03749    }
<a name="l03750"></a>03750 
<a name="l03751"></a>03751    <span class="comment">/* Check the initial value of the error code of the derived state machine */</span>
<a name="l03752"></a>03752    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_core_8c.html#a19edfb096b21ae27d0eed2f5e723aa85" title="Return the error code of the argument state machine.">FwSmGetErrCode</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fa422fde8f0ddfead19f99d76cfe004037" title="A configuration error has been detected during the state machine configuration process.">smConfigErr</a>)  {
<a name="l03753"></a>03753       <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03754"></a>03754       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03755"></a>03755    }
<a name="l03756"></a>03756 
<a name="l03757"></a>03757    <a class="code" href="_fw_sm_d_create_8c.html#a199ebb64451cac268177832a8c5ab602" title="Recursively release the memory which was allocated when the state machine descriptor was created...">FwSmReleaseRec</a>(smDescBase);
<a name="l03758"></a>03758    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03759"></a>03759 }
<a name="l03760"></a>03760 
<a name="l03761"></a>03761 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03762"></a><a class="code" href="_fw_sm_test_cases_8h.html#aaabdb7805cd6f69080640c9b14cca13b">03762</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aaabdb7805cd6f69080640c9b14cca13b" title="Verify the functioning of the execution counters.">FwSmTestCaseExecCnt1</a>() {
<a name="l03763"></a>03763    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03764"></a>03764    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03765"></a>03765    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc;
<a name="l03766"></a>03766 
<a name="l03767"></a>03767    <span class="comment">/* reset log */</span>
<a name="l03768"></a>03768    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03769"></a>03769 
<a name="l03770"></a>03770    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l03771"></a>03771    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03772"></a>03772    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03773"></a>03773    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l03774"></a>03774    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03775"></a>03775    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03776"></a>03776 
<a name="l03777"></a>03777    <span class="comment">/* Create test SM */</span>
<a name="l03778"></a>03778    smDesc = <a class="code" href="_fw_sm_make_test_8c.html#a3d1f08aa7c4675b04642a45c6e12c59b" title="Operation to create and configure a state machine which uses the execution counters.">FwSmMakeTestSM15</a>(smData);
<a name="l03779"></a>03779    <span class="keywordflow">if</span> (smDesc==NULL)
<a name="l03780"></a>03780       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03781"></a>03781 
<a name="l03782"></a>03782    <span class="comment">/* Check configuration of state machine */</span>
<a name="l03783"></a>03783    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03784"></a>03784       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03785"></a>03785       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03786"></a>03786    }
<a name="l03787"></a>03787 
<a name="l03788"></a>03788    <span class="comment">/* Check initial value of execution counters */</span>
<a name="l03789"></a>03789    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=0) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03790"></a>03790          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03791"></a>03791          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03792"></a>03792    }
<a name="l03793"></a>03793 
<a name="l03794"></a>03794    <span class="comment">/* Start SM (this brings it to state S1) */</span>
<a name="l03795"></a>03795    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l03796"></a>03796    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03797"></a>03797       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03798"></a>03798       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03799"></a>03799    }
<a name="l03800"></a>03800 
<a name="l03801"></a>03801    <span class="comment">/* Send command TR1 and check that nothing happens */</span>
<a name="l03802"></a>03802    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc,<a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03803"></a>03803    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=0) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03804"></a>03804       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03805"></a>03805       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03806"></a>03806    }
<a name="l03807"></a>03807    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=0) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03808"></a>03808          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03809"></a>03809          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03810"></a>03810    }
<a name="l03811"></a>03811 
<a name="l03812"></a>03812    <span class="comment">/* Execute SM and check that it makes a transition to S2 */</span>
<a name="l03813"></a>03813    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l03814"></a>03814    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03815"></a>03815       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03816"></a>03816       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03817"></a>03817    }
<a name="l03818"></a>03818    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=1) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03819"></a>03819          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03820"></a>03820          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03821"></a>03821    }
<a name="l03822"></a>03822 
<a name="l03823"></a>03823    <span class="comment">/* Send command TR1 and check that nothing happens */</span>
<a name="l03824"></a>03824    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc,<a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03825"></a>03825    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03826"></a>03826       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03827"></a>03827       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03828"></a>03828    }
<a name="l03829"></a>03829    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=1) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03830"></a>03830          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03831"></a>03831          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03832"></a>03832    }
<a name="l03833"></a>03833 
<a name="l03834"></a>03834    <span class="comment">/* Execute SM and check that counters are incremented but SM remains in SM2 */</span>
<a name="l03835"></a>03835    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l03836"></a>03836    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03837"></a>03837       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03838"></a>03838       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03839"></a>03839    }
<a name="l03840"></a>03840    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=2) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=1)) {
<a name="l03841"></a>03841          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03842"></a>03842          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03843"></a>03843    }
<a name="l03844"></a>03844 
<a name="l03845"></a>03845    <span class="comment">/* Send command TR1 and check that nothing happens */</span>
<a name="l03846"></a>03846    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc,<a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03847"></a>03847    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03848"></a>03848       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03849"></a>03849       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03850"></a>03850    }
<a name="l03851"></a>03851    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=2) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=1)) {
<a name="l03852"></a>03852          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03853"></a>03853          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03854"></a>03854    }
<a name="l03855"></a>03855 
<a name="l03856"></a>03856    <span class="comment">/* Execute SM and check that counters are incremented but SM remains in SM2 */</span>
<a name="l03857"></a>03857    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l03858"></a>03858    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=1) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>)) {
<a name="l03859"></a>03859       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03860"></a>03860       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03861"></a>03861    }
<a name="l03862"></a>03862    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=3) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=2)) {
<a name="l03863"></a>03863          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03864"></a>03864          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03865"></a>03865    }
<a name="l03866"></a>03866 
<a name="l03867"></a>03867    <span class="comment">/* Send command TR1 and check that SM moves to S1 */</span>
<a name="l03868"></a>03868    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc,<a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03869"></a>03869    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)) {
<a name="l03870"></a>03870       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03871"></a>03871       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03872"></a>03872    }
<a name="l03873"></a>03873    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=3) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03874"></a>03874          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03875"></a>03875          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03876"></a>03876    }
<a name="l03877"></a>03877 
<a name="l03878"></a>03878    <span class="comment">/* Execute SM and check that SM is stopped but counters are not reset */</span>
<a name="l03879"></a>03879    <a class="code" href="_fw_sm_core_8c.html#a1bf3c675f9a672f8ac23efc86b14260b" title="Convenience method to execute a state machine.">FwSmExecute</a>(smDesc);
<a name="l03880"></a>03880    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a>!=3) || (smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=0) || (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDesc)!=0)) {
<a name="l03881"></a>03881       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03882"></a>03882       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03883"></a>03883    }
<a name="l03884"></a>03884    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=4) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=1)) {
<a name="l03885"></a>03885          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03886"></a>03886          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03887"></a>03887    }
<a name="l03888"></a>03888 
<a name="l03889"></a>03889    <span class="comment">/* Restart SM and check that counters are reset */</span>
<a name="l03890"></a>03890    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc);
<a name="l03891"></a>03891    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#a2d2b1d2f620ad5dbfd77e9b276907ff4" title="Return the State Machine Execution Counter.">FwSmGetExecCnt</a>(smDesc)!=0) || (<a class="code" href="_fw_sm_core_8c.html#ad6fa329ff0d982067e5154a1c326d234" title="Return the State Execution Counter.">FwSmGetStateExecCnt</a>(smDesc)!=0)) {
<a name="l03892"></a>03892          <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03893"></a>03893          <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03894"></a>03894    }
<a name="l03895"></a>03895 
<a name="l03896"></a>03896    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc);
<a name="l03897"></a>03897    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03898"></a>03898 
<a name="l03899"></a>03899 }
<a name="l03900"></a>03900 
<a name="l03901"></a>03901 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03902"></a><a class="code" href="_fw_sm_test_cases_8h.html#a544848a9ba43459688a5a2c9a8f54160">03902</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#a544848a9ba43459688a5a2c9a8f54160" title="Create a derived state machine by extending state machine SM11 (see FwSmMakeTestSM11), and then verify the correct behaviour of the derived state machine.">FwSmTestCaseDer6</a>() {
<a name="l03903"></a>03903    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03904"></a>03904    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03905"></a>03905    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDescBase, smDescDer;
<a name="l03906"></a>03906 
<a name="l03907"></a>03907    <span class="comment">/* reset log */</span>
<a name="l03908"></a>03908    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03909"></a>03909 
<a name="l03910"></a>03910    <span class="comment">/* Initialize data structures for the base state machine SM5 */</span>
<a name="l03911"></a>03911    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03912"></a>03912    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03913"></a>03913    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03914"></a>03914    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 0;
<a name="l03915"></a>03915    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03916"></a>03916 
<a name="l03917"></a>03917    <span class="comment">/* Create the base state machine */</span>
<a name="l03918"></a>03918    smDescBase = <a class="code" href="_fw_sm_make_test_8c.html#a3da81efe980b0456ce792e0d4f2f4726" title="Operation to create and configure a degenerate state machine with neither states nor choice pseudo-st...">FwSmMakeTestSM11</a>(NULL);
<a name="l03919"></a>03919    <span class="keywordflow">if</span> (smDescBase==NULL)
<a name="l03920"></a>03920       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03921"></a>03921 
<a name="l03922"></a>03922    <span class="comment">/* Check configuration of base state machine */</span>
<a name="l03923"></a>03923    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescBase) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03924"></a>03924       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03925"></a>03925    }
<a name="l03926"></a>03926 
<a name="l03927"></a>03927    <span class="comment">/* Create the derived state machine */</span>
<a name="l03928"></a>03928    smDescDer = <a class="code" href="_fw_sm_d_create_8c.html#a3913bafd242230af5a5592bd837f3777" title="Create the descriptor of a derived state machine.">FwSmCreateDer</a>(smDescBase);
<a name="l03929"></a>03929 
<a name="l03930"></a>03930    <span class="comment">/* Set the data structure for the derived state machine */</span>
<a name="l03931"></a>03931    <a class="code" href="_fw_sm_config_8c.html#a1c0551070b56ccc02094f51b25521a3d" title="Set the pointer to the state machine data in the state machine descriptor.">FwSmSetData</a>(smDescDer, smData);
<a name="l03932"></a>03932 
<a name="l03933"></a>03933    <span class="comment">/* Check configuration of derived state machine */</span>
<a name="l03934"></a>03934    <span class="keywordflow">if</span> (<a class="code" href="_fw_sm_config_8c.html#a5c8c773b4e427d5840eb5be71a8c3bab" title="Recursively check the configuration of a state machine and all its embedded state machines...">FwSmCheckRec</a>(smDescDer) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) {
<a name="l03935"></a>03935       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03936"></a>03936       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03937"></a>03937       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03938"></a>03938    }
<a name="l03939"></a>03939 
<a name="l03940"></a>03940    <span class="comment">/* Start SM (this causes the SM to terminate) */</span>
<a name="l03941"></a>03941    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDescDer);
<a name="l03942"></a>03942    <span class="keywordflow">if</span> ((smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a>!=1) || (<a class="code" href="_fw_sm_core_8c.html#a2c5e1f475cdc1084ae3da51160f2efd9" title="Check whether the state machine is started.">FwSmIsStarted</a>(smDescDer)!=0)) {
<a name="l03943"></a>03943       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDescBase);
<a name="l03944"></a>03944       <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03945"></a>03945       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03946"></a>03946    }
<a name="l03947"></a>03947 
<a name="l03948"></a>03948    <a class="code" href="_fw_sm_d_create_8c.html#ab30a3efe968fb979f6e53e3a1f9ea826" title="Release the memory allocated to a derived state machine descriptor.">FwSmReleaseDer</a>(smDescDer);
<a name="l03949"></a>03949    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l03950"></a>03950 }
<a name="l03951"></a>03951 
<a name="l03952"></a>03952 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l03953"></a><a class="code" href="_fw_sm_test_cases_8h.html#afbf78ab0013c03baf5129f37001f2b3e">03953</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#afbf78ab0013c03baf5129f37001f2b3e" title="Verify the order of evaluation of guards on transitions out of a proper state.">FwSmTestCaseTrans7</a>() {
<a name="l03954"></a>03954    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l03955"></a>03955    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l03956"></a>03956    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc1, smDesc2, smDesc3;
<a name="l03957"></a>03957 
<a name="l03958"></a>03958    <span class="comment">/* reset log */</span>
<a name="l03959"></a>03959    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l03960"></a>03960 
<a name="l03961"></a>03961    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l03962"></a>03962    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l03963"></a>03963    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l03964"></a>03964    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l03965"></a>03965    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l03966"></a>03966    smData-&gt;<a class="code" href="struct_test_sm_data.html#a34f7b238da12e63dc832a550b1d7f97c" title="Flag checked by the transition guards.">flag_3</a> = 1;
<a name="l03967"></a>03967    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l03968"></a>03968 
<a name="l03969"></a>03969    <span class="comment">/* Create test SMs */</span>
<a name="l03970"></a>03970    smDesc1 = <a class="code" href="_fw_sm_make_test_8c.html#a0a5276f650bb92817fedec54fbc5db8e" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_1</a>(smData);
<a name="l03971"></a>03971    smDesc2 = <a class="code" href="_fw_sm_make_test_8c.html#a2c151d88b24d520b33ab02c66f5d3fc9" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_2</a>(smData);
<a name="l03972"></a>03972    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#a1b0f91d405cd6cb1390c74fe8b40380f" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_3</a>(smData);
<a name="l03973"></a>03973 
<a name="l03974"></a>03974    <span class="comment">/* Check configuration of state machine */</span>
<a name="l03975"></a>03975    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc1) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) || (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc2) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) ||
<a name="l03976"></a>03976                                                 (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>)) {
<a name="l03977"></a>03977       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l03978"></a>03978       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l03979"></a>03979       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l03980"></a>03980       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03981"></a>03981    }
<a name="l03982"></a>03982 
<a name="l03983"></a>03983    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l03984"></a>03984    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc1);
<a name="l03985"></a>03985    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l03986"></a>03986    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l03987"></a>03987    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) ||
<a name="l03988"></a>03988                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l03989"></a>03989       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l03990"></a>03990       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l03991"></a>03991       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l03992"></a>03992       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l03993"></a>03993    }
<a name="l03994"></a>03994 
<a name="l03995"></a>03995    <span class="comment">/* Send TR1 and check success */</span>
<a name="l03996"></a>03996    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc1, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03997"></a>03997    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc2, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03998"></a>03998    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l03999"></a>03999    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a30ad11566849cb5fed78e34ebff22301" title="A state identifier.">STATE_S4</a>) ||
<a name="l04000"></a>04000                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>)){
<a name="l04001"></a>04001       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04002"></a>04002       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04003"></a>04003       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04004"></a>04004       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04005"></a>04005    }
<a name="l04006"></a>04006 
<a name="l04007"></a>04007    <span class="comment">/* Stop and Restart SM and check outcome of start operation */</span>
<a name="l04008"></a>04008    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc1);
<a name="l04009"></a>04009    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc2);
<a name="l04010"></a>04010    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc3);
<a name="l04011"></a>04011    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc1);
<a name="l04012"></a>04012    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l04013"></a>04013    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l04014"></a>04014    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) ||
<a name="l04015"></a>04015                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l04016"></a>04016       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04017"></a>04017       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04018"></a>04018       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04019"></a>04019       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04020"></a>04020    }
<a name="l04021"></a>04021 
<a name="l04022"></a>04022    <span class="comment">/* Set Flag_1 to false */</span>
<a name="l04023"></a>04023    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l04024"></a>04024 
<a name="l04025"></a>04025    <span class="comment">/* Send TR1 and check success */</span>
<a name="l04026"></a>04026    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc1, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l04027"></a>04027    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc2, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l04028"></a>04028    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_make_test_8h.html#a58d72c3add7d201db1fabe5e09f37a87" title="A transition identifier.">TR1</a>);
<a name="l04029"></a>04029    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a30ad11566849cb5fed78e34ebff22301" title="A state identifier.">STATE_S4</a>) ||
<a name="l04030"></a>04030                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>)){
<a name="l04031"></a>04031       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04032"></a>04032       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04033"></a>04033       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04034"></a>04034       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04035"></a>04035    }
<a name="l04036"></a>04036 
<a name="l04037"></a>04037    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04038"></a>04038    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04039"></a>04039    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04040"></a>04040    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l04041"></a>04041 }
<a name="l04042"></a>04042 
<a name="l04043"></a>04043 <span class="comment">/*------------------------------------------------------------------------------------------------- */</span>
<a name="l04044"></a><a class="code" href="_fw_sm_test_cases_8h.html#aafb0e83adfe69451063f83351ee47a6f">04044</a> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9" title="Outcome of a state machine test case.">FwSmTestOutcome_t</a> <a class="code" href="_fw_sm_test_cases_8c.html#aafb0e83adfe69451063f83351ee47a6f" title="Verify the order of evaluation of guards on transitions out of a choice pseudo-state.">FwSmTestCaseTrans8</a>() {
<a name="l04045"></a>04045    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a> sSmData;
<a name="l04046"></a>04046    <span class="keyword">struct </span><a class="code" href="struct_test_sm_data.html" title="Type for the state machine data for the test state machines.">TestSmData</a>* smData = &amp;sSmData;
<a name="l04047"></a>04047    <a class="code" href="struct_fw_sm_desc.html" title="Structure representing a state machine descriptor.">FwSmDesc_t</a> smDesc1, smDesc2, smDesc3;
<a name="l04048"></a>04048 
<a name="l04049"></a>04049    <span class="comment">/* reset log */</span>
<a name="l04050"></a>04050    <a class="code" href="_fw_sm_make_test_8c.html#a8df675ae5fa9e5863a7d931a055b5610" title="Location in the log array where the next entry is written.">fwSm_logIndex</a> = 0;
<a name="l04051"></a>04051 
<a name="l04052"></a>04052    <span class="comment">/* Initialize data structure holding the state machine data */</span>
<a name="l04053"></a>04053    smData-&gt;<a class="code" href="struct_test_sm_data.html#ab7bd53e52a5bf29e3261345cf930b890" title="Counter incremented by the state actions.">counter_1</a> = 0;
<a name="l04054"></a>04054    smData-&gt;<a class="code" href="struct_test_sm_data.html#aa27b064a6348270a387287eae1a46f4d" title="Counter incremented by the transition actions.">counter_2</a> = 0;
<a name="l04055"></a>04055    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 1;
<a name="l04056"></a>04056    smData-&gt;<a class="code" href="struct_test_sm_data.html#a24dff9eb26952a40eb4115d005a1659a" title="Flag checked by the transition guards.">flag_2</a> = 1;
<a name="l04057"></a>04057    smData-&gt;<a class="code" href="struct_test_sm_data.html#a34f7b238da12e63dc832a550b1d7f97c" title="Flag checked by the transition guards.">flag_3</a> = 1;
<a name="l04058"></a>04058    smData-&gt;<a class="code" href="struct_test_sm_data.html#a8e2968551b34ce7fb0676ae2644cf7e5" title="Offset for markers written to log array.">logBase</a> = 0;
<a name="l04059"></a>04059 
<a name="l04060"></a>04060    <span class="comment">/* Create test SMs */</span>
<a name="l04061"></a>04061    smDesc1 = <a class="code" href="_fw_sm_make_test_8c.html#a0a5276f650bb92817fedec54fbc5db8e" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_1</a>(smData);
<a name="l04062"></a>04062    smDesc2 = <a class="code" href="_fw_sm_make_test_8c.html#a2c151d88b24d520b33ab02c66f5d3fc9" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_2</a>(smData);
<a name="l04063"></a>04063    smDesc3 = <a class="code" href="_fw_sm_make_test_8c.html#a1b0f91d405cd6cb1390c74fe8b40380f" title="Operation to create and configure a state machine to verify the order of evaluation of guards...">FwSmMakeTestSM16_3</a>(smData);
<a name="l04064"></a>04064 
<a name="l04065"></a>04065    <span class="comment">/* Check configuration of state machine */</span>
<a name="l04066"></a>04066    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc1) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) || (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc2) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>) ||
<a name="l04067"></a>04067                                                 (<a class="code" href="_fw_sm_config_8c.html#a47c40114ab6e4084c767f7e8e398f8a8" title="Check the correctness and completeness of the configuration of a state machine descriptor.">FwSmCheck</a>(smDesc3) != <a class="code" href="_fw_sm_constants_8h.html#ac9ef8122b7e429ac0da11c44f409237fada6f01b7054884a7555840c7d82dbd68" title="Return codes of a function which has completed execution without errors.">smSuccess</a>)) {
<a name="l04068"></a>04068       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04069"></a>04069       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04070"></a>04070       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04071"></a>04071       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04072"></a>04072    }
<a name="l04073"></a>04073 
<a name="l04074"></a>04074    <span class="comment">/* Start SM and check outcome of start operation */</span>
<a name="l04075"></a>04075    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc1);
<a name="l04076"></a>04076    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l04077"></a>04077    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l04078"></a>04078    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) ||
<a name="l04079"></a>04079                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l04080"></a>04080       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04081"></a>04081       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04082"></a>04082       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04083"></a>04083       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04084"></a>04084    }
<a name="l04085"></a>04085 
<a name="l04086"></a>04086    <span class="comment">/* Send TR2 and check success */</span>
<a name="l04087"></a>04087    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc1, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04088"></a>04088    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc2, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04089"></a>04089    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04090"></a>04090    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a8a8863dfdbadfd166bb399c592043c9f" title="A state identifier.">STATE_S2</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a30ad11566849cb5fed78e34ebff22301" title="A state identifier.">STATE_S4</a>) ||
<a name="l04091"></a>04091                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>)){
<a name="l04092"></a>04092       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04093"></a>04093       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04094"></a>04094       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04095"></a>04095       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04096"></a>04096    }
<a name="l04097"></a>04097 
<a name="l04098"></a>04098    <span class="comment">/* Stop and Restart SM and check outcome of start operation */</span>
<a name="l04099"></a>04099    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc1);
<a name="l04100"></a>04100    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc2);
<a name="l04101"></a>04101    <a class="code" href="_fw_sm_core_8c.html#a7019e9b7130560e84366249c1e1e20ca" title="Stop a state machine.">FwSmStop</a>(smDesc3);
<a name="l04102"></a>04102    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc1);
<a name="l04103"></a>04103    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc2);
<a name="l04104"></a>04104    <a class="code" href="_fw_sm_core_8c.html#af5d34eb9c80cecffc9cd7628f863f471" title="Start a state machine.">FwSmStart</a>(smDesc3);
<a name="l04105"></a>04105    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>) ||
<a name="l04106"></a>04106                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a37d9034f71fffba170dcb9e6399e232f" title="A state identifier.">STATE_S1</a>)){
<a name="l04107"></a>04107       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04108"></a>04108       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04109"></a>04109       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04110"></a>04110       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04111"></a>04111    }
<a name="l04112"></a>04112 
<a name="l04113"></a>04113    <span class="comment">/* Set Flag_1 to false */</span>
<a name="l04114"></a>04114    smData-&gt;<a class="code" href="struct_test_sm_data.html#a2fdeda83a4cb7d4885b0c05d872b1b6a" title="Flag checked by the transition guards.">flag_1</a> = 0;
<a name="l04115"></a>04115 
<a name="l04116"></a>04116    <span class="comment">/* Send TR1 and check success */</span>
<a name="l04117"></a>04117    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc1, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04118"></a>04118    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc2, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04119"></a>04119    <a class="code" href="_fw_sm_core_8c.html#a1c27b02c0b247a0d752611572719b4c2" title="Trigger a transition in a state machine.">FwSmMakeTrans</a>(smDesc3, <a class="code" href="_fw_sm_make_test_8h.html#a5acb2ded4f7783b7d2c92cb40f98df04" title="A transition identifier.">TR2</a>);
<a name="l04120"></a>04120    <span class="keywordflow">if</span> ((<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc1)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>) || (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc2)!=<a class="code" href="_fw_sm_make_test_8h.html#a30ad11566849cb5fed78e34ebff22301" title="A state identifier.">STATE_S4</a>) ||
<a name="l04121"></a>04121                                                 (<a class="code" href="_fw_sm_core_8c.html#aa9b494014ee15c3fe724f8446883f634" title="Return the identifier of the current state in a state machine (or zero if the state machine is stoppe...">FwSmGetCurState</a>(smDesc3)!=<a class="code" href="_fw_sm_make_test_8h.html#a40e467c84290d71357b67c453f1c27be" title="A state identifier.">STATE_S3</a>)){
<a name="l04122"></a>04122       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04123"></a>04123       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04124"></a>04124       <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04125"></a>04125       <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9a19c4da990d21c30db46c248caa3411e0" title="Test case failure.">smTestCaseFailure</a>;
<a name="l04126"></a>04126    }
<a name="l04127"></a>04127 
<a name="l04128"></a>04128    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc1);
<a name="l04129"></a>04129    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc2);
<a name="l04130"></a>04130    <a class="code" href="_fw_sm_d_create_8c.html#a313e69d56d405109aebb0e98b699132a" title="Release the memory which was allocated when the state machine descriptor.">FwSmRelease</a>(smDesc3);
<a name="l04131"></a>04131    <span class="keywordflow">return</span> <a class="code" href="_fw_sm_test_cases_8h.html#ab355e31d6b3c0029833f3e8b3a6cdbf9adb0be3e62764767a9c59d34f91f3ba22" title="Test case success.">smTestCaseSuccess</a>;
<a name="l04132"></a>04132 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_fw_sm_test_cases_8c.html">FwSmTestCases.c</a>      </li>
<hr class="footer"/><address style="text-align: right;"><small>
<a href="http://www.pnp-software.com">P&amp;P Software GmbH</a>, Copyright 2011, All Rights Reserved</small></address>
</body>
</html>
